"use strict";(self.webpackChunkpracticaParcial=self.webpackChunkpracticaParcial||[]).push([[179],{2011:(it,Ce,k)=>{k.d(Ce,{Dh:()=>he,GT:()=>pe,cc:()=>Te,hO:()=>Ge,on:()=>B,pX:()=>X,xv:()=>ue});var d=k(5e3),K=k(127),O=k(5813);it=k.hmd(it);const oe=["ngOnDestroy"],X=(ve,Xe,Ze,Ie={})=>new Proxy(ve,{get:(ye,_e)=>Ze.runOutsideAngular(()=>{var He;if(ve[_e])return(null===(He=null==Ie?void 0:Ie.spy)||void 0===He?void 0:He.get)&&Ie.spy.get(_e,ve[_e]),ve[_e];if(oe.indexOf(_e)>-1)return()=>{};const je=Xe.toPromise().then(ne=>{const qe=ne&&ne[_e];return"function"==typeof qe?qe.bind(ne):qe&&qe.then?qe.then(J=>Ze.run(()=>J)):Ze.run(()=>qe)});return new Proxy(()=>{},{get:(ne,qe)=>je[qe],apply:(ne,qe,J)=>je.then(se=>{var te;const Ee=se&&se(...J);return(null===(te=null==Ie?void 0:Ie.spy)||void 0===te?void 0:te.apply)&&Ie.spy.apply(_e,J,Ee),Ee})})})}),pe=(ve,Xe)=>{Xe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Ie=>{Object.defineProperty(ve.prototype,Ie,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Ie))})})};class re{constructor(Xe){return Xe}}const he=new d.OlP("angularfire2.app.options"),ue=new d.OlP("angularfire2.app.name");function B(ve,Xe,Ze){const ye="object"==typeof Ze&&Ze||{};ye.name=ye.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const He=K.Z.apps.filter(je=>je&&je.name===ye.name)[0]||Xe.runOutsideAngular(()=>K.Z.initializeApp(ve,ye));try{JSON.stringify(ve)!==JSON.stringify(He.options)&&j("error",`${He.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new re(He)}const j=(ve,...Xe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ve](...Xe)},Q={provide:re,useFactory:B,deps:[he,d.R0b,[new d.FiY,ue]]};let Ge=(()=>{class ve{constructor(Ze){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",d.q4F.full,Ze.toString())}static initializeApp(Ze,Ie){return{ngModule:ve,providers:[{provide:he,useValue:Ze},{provide:ue,useValue:Ie}]}}}return ve.\u0275fac=function(Ze){return new(Ze||ve)(d.LFG(d.Lbi))},ve.\u0275mod=d.oAB({type:ve}),ve.\u0275inj=d.cJS({providers:[Q]}),ve})();function Te(ve,Xe,Ze,Ie,ye){const[,_e,He]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===ve)||[];if(_e)return function xe(ve,Xe){try{return ve.toString()===Xe.toString()}catch(Ze){return ve===Xe}}(ye,He)||(fe("error",`${Xe} was already initialized on the ${Ze} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ye,was:He})),_e;{const je=Ie();return globalThis.\u0275AngularfireInstanceCache.push([ve,je,ye]),je}}const ke=!!it.hot,fe=(ve,...Xe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ve](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Ce,k)=>{k.d(Ce,{q4:()=>Zn,iC:()=>yt,HU:()=>ki,vb:()=>id,JM:()=>Ca});var d=k(5e3),K=k(5867),O=k(5861),oe=k(9681),X=k(2090),pe=k(4859),re=k(1877);const he="@firebase/installations",j="w:0.5.8",Q="FIS_v2",ve=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(I){return I instanceof X.ZR&&I.code.includes("request-failed")}function Ze({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ie(I){return{token:I.token,requestStatus:2,expiresIn:J(I.expiresIn),creationTime:Date.now()}}function ye(I,D){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(I,D){const F=(yield D.json()).error;return ve.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function je(I,{refreshToken:D}){const x=He(I);return x.append("Authorization",function se(I){return`${Q} ${I}`}(D)),x}function ne(I){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function J(I){return Number(I.replace("s","000"))}function te(I,D){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:x}){const F=Ze(I),Z=He(I),W=D.getImmediate({optional:!0});if(W){const wt=yield W.getHeartbeatsHeader();wt&&Z.append("x-firebase-client",wt)}const Le={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Q,appId:I.appId,sdkVersion:j})},Ye=yield ne(()=>fetch(F,Le));if(Ye.ok){const wt=yield Ye.json();return{fid:wt.fid||x,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Ie(wt.authToken)}}throw yield ye("Create Installation",Ye)})).apply(this,arguments)}function ge(I){return new Promise(D=>{setTimeout(D,I)})}const It=/^[cdef][\w-]{21}$/;function rn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function $e(I){return function Pe(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return It.test(x)?x:""}catch(I){return""}}function Ut(I){return`${I.appName}!${I.appId}`}const Jn=new Map;function vn(I,D){const x=Ut(I);Wt(x,D),function Bt(I,D){const x=function Yr(){return!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=I=>{Wt(I.data.key,I.data.fid)}),ir}();x&&x.postMessage({key:I,fid:D}),function cs(){0===Jn.size&&ir&&(ir.close(),ir=null)}()}(x,D)}function Wt(I,D){const x=Jn.get(I);if(x)for(const F of x)F(D)}let ir=null;const Mr="firebase-installations-store";let zi=null;function Zi(){return zi||(zi=(0,X.X3)("firebase-installations-database",1,(I,D)=>{0===D&&I.createObjectStore(Mr)})),zi}function ot(I,D){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(I,D){const x=Ut(I),Z=(yield Zi()).transaction(Mr,"readwrite"),W=Z.objectStore(Mr),Se=yield W.get(x);return yield W.put(D,x),yield Z.complete,(!Se||Se.fid!==D.fid)&&vn(I,D.fid),D})).apply(this,arguments)}function Xn(I){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(I){const D=Ut(I),F=(yield Zi()).transaction(Mr,"readwrite");yield F.objectStore(Mr).delete(D),yield F.complete})).apply(this,arguments)}function Qr(I,D){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(I,D){const x=Ut(I),Z=(yield Zi()).transaction(Mr,"readwrite"),W=Z.objectStore(Mr),Se=yield W.get(x),Le=D(Se);return void 0===Le?yield W.delete(x):yield W.put(Le,x),yield Z.complete,Le&&(!Se||Se.fid!==Le.fid)&&vn(I,Le.fid),Le})).apply(this,arguments)}function gn(I){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(I){let D;const x=yield Qr(I.appConfig,F=>{const Z=ds(F),W=ua(I,Z);return D=W.registrationPromise,W.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function ds(I){return Vt(I||{fid:rn(),registrationStatus:0})}function ua(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ve.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function jt(I,D){return rt.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:mt(I)}:{installationEntry:D}}function rt(){return(rt=(0,O.Z)(function*(I,D){try{const x=yield te(I,D);return ot(I.appConfig,x)}catch(x){throw Xe(x)&&409===x.customData.serverCode?yield Xn(I.appConfig):yield ot(I.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function mt(I){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(I){let D=yield xi(I.appConfig);for(;1===D.registrationStatus;)yield ge(100),D=yield xi(I.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield gn(I);return F||x}return D})).apply(this,arguments)}function xi(I){return Qr(I,D=>{if(!D)throw ve.create("installation-not-found");return Vt(D)})}function Vt(I){return function Bs(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function mr(I,D){return or.apply(this,arguments)}function or(){return(or=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},x){const F=at(I,x),Z=je(I,x),W=D.getImmediate({optional:!0});if(W){const wt=yield W.getHeartbeatsHeader();wt&&Z.append("x-firebase-client",wt)}const Le={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:j,appId:I.appId}})},Ye=yield ne(()=>fetch(F,Le));if(Ye.ok)return Ie(yield Ye.json());throw yield ye("Generate Auth Token",Ye)})).apply(this,arguments)}function at(I,{fid:D}){return`${Ze(I)}/${D}/authTokens:generate`}function yr(I){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(I,D=!1){let x;const F=yield Qr(I.appConfig,W=>{if(!Nt(W))throw ve.create("not-registered");const Se=W.authToken;if(!D&&U(Se))return W;if(1===Se.requestStatus)return x=We(I,D),W;{if(!navigator.onLine)throw ve.create("app-offline");const Le=$(W);return x=ut(I,Le),Le}});return x?yield x:F.authToken})).apply(this,arguments)}function We(I,D){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(I,D){let x=yield Je(I.appConfig);for(;1===x.authToken.requestStatus;)yield ge(100),x=yield Je(I.appConfig);const F=x.authToken;return 0===F.requestStatus?yr(I,D):F})).apply(this,arguments)}function Je(I){return Qr(I,D=>{if(!Nt(D))throw ve.create("not-registered");return function ce(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function ut(I,D){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(I,D){try{const x=yield mr(I,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield ot(I.appConfig,F),x}catch(x){if(!Xe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ot(I.appConfig,F)}else yield Xn(I.appConfig);throw x}})).apply(this,arguments)}function Nt(I){return void 0!==I&&2===I.registrationStatus}function U(I){return 2===I.requestStatus&&!function L(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function $(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Ve(){return(Ve=(0,O.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:F}=yield gn(D);return F?F.catch(console.error):yr(D).catch(console.error),x.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(I,D=!1){const x=I;return yield _r(x),(yield yr(x,D)).token})).apply(this,arguments)}function _r(I){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,O.Z)(function*(I){const{registrationPromise:D}=yield gn(I);D&&(yield D)})).apply(this,arguments)}function Gn(I){return ve.create("missing-app-config-values",{valueName:I})}const ca="installations",Me=I=>{const D=I.getProvider("app").getImmediate(),x=function Wi(I){if(!I||!I.options)throw Gn("App Configuration");if(!I.name)throw Gn("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw Gn(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},xt=I=>{const D=I.getProvider("app").getImmediate(),x=(0,oe._getProvider)(D,ca).getImmediate();return{getId:()=>function Y(I){return Ve.apply(this,arguments)}(x),getToken:Z=>function ft(I){return Kt.apply(this,arguments)}(x,Z)}};(function cn(){(0,oe._registerComponent)(new pe.wA(ca,Me,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",xt,"PRIVATE"))})(),(0,oe.registerVersion)(he,"0.5.8"),(0,oe.registerVersion)(he,"0.5.8","esm2017");const ar="@firebase/remote-config",An=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bh{constructor(D,x,F,Z){this.client=D,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Z;D.eTag=Z&&Z.eTag;const W=yield x.client.fetch(D),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(Se),W})()}}function Pc(I=navigator){return I.languages&&I.languages[0]||I.language}class ru{constructor(D,x,F,Z,W,Se){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=W,this.appId=Se}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ye={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:x.appId,language_code:Pc()},wt={method:"POST",headers:Le,body:JSON.stringify(Ye)},$t=fetch(Se,wt),bt=new Promise((si,yn)=>{D.signal.addEventListener(()=>{const rs=new Error("The operation was aborted.");rs.name="AbortError",yn(rs)})});let Un;try{yield Promise.race([$t,bt]),Un=yield $t}catch(si){let yn="fetch-client-network";throw"AbortError"===si.name&&(yn="fetch-timeout"),An.create(yn,{originalErrorMessage:si.message})}let Mn=Un.status;const lo=Un.headers.get("ETag")||void 0;let Uo,$r;if(200===Un.status){let si;try{si=yield Un.json()}catch(yn){throw An.create("fetch-client-parse",{originalErrorMessage:yn.message})}Uo=si.entries,$r=si.state}if("INSTANCE_STATE_UNSPECIFIED"===$r?Mn=500:"NO_CHANGE"===$r?Mn=304:("NO_TEMPLATE"===$r||"EMPTY_CONFIG"===$r)&&(Uo={}),304!==Mn&&200!==Mn)throw An.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:lo,config:Uo}})()}}class vp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function kn(I,D){return new Promise((x,F)=>{const Z=Math.max(D-Date.now(),0),W=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(W),F(An.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const W=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),W}catch(W){if(!function kc(I){if(!(I instanceof X.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(W))throw W;const Se={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Se),Z.attemptFetch(D,Se)}})()}}class Fc{constructor(D,x,F,Z,W){this.app=D,this._client=x,this._storageCache=F,this._storage=Z,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function il(I,D){const x=I.target.error||void 0;return An.create(D,{originalErrorMessage:x&&x.message})}const ms="app_namespace_store";class Ip{constructor(D,x,F,Z=function bp(){return new Promise((I,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(il(F,"storage-open"))},x.onsuccess=F=>{I(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ms,{keyPath:"compositeKey"})}}catch(x){D(An.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,W)=>{const Le=F.transaction([ms],"readonly").objectStore(ms),Ye=x.createCompositeKey(D);try{const wt=Le.get(Ye);wt.onerror=$t=>{W(il($t,"storage-get"))},wt.onsuccess=$t=>{const bt=$t.target.result;Z(bt?bt.value:void 0)}}catch(wt){W(An.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(D,x){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((W,Se)=>{const Ye=Z.transaction([ms],"readwrite").objectStore(ms),wt=F.createCompositeKey(D);try{const $t=Ye.put({compositeKey:wt,value:x});$t.onerror=bt=>{Se(il(bt,"storage-set"))},$t.onsuccess=()=>{W()}}catch($t){Se(An.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,W)=>{const Le=F.transaction([ms],"readwrite").objectStore(ms),Ye=x.createCompositeKey(D);try{const wt=Le.delete(Ye);wt.onerror=$t=>{W(il($t,"storage-delete"))},wt.onsuccess=()=>{Z()}}catch(wt){W(An.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Vc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),W=yield x;W&&(D.lastFetchStatus=W);const Se=yield F;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const Le=yield Z;Le&&(D.activeConfig=Le)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Gs(){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}!function So(){(0,oe._registerComponent)(new pe.wA("remote-config",function I(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,X.hl)())throw An.create("indexed-db-unavailable");const{projectId:W,apiKey:Se,appId:Le}=F.options;if(!W)throw An.create("registration-project-id");if(!Se)throw An.create("registration-api-key");if(!Le)throw An.create("registration-app-id");const Ye=new Ip(Le,F.name,x=x||"firebase"),wt=new Vc(Ye),$t=new re.Yd(ar);$t.logLevel=re.in.ERROR;const bt=new ru(Z,oe.SDK_VERSION,x,W,Se,Le),Un=new vp(bt,Ye),Mn=new bh(Un,Ye,wt,$t),lo=new Fc(F,Mn,wt,Ye,$t);return function fi(I){const D=(0,X.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(lo),lo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ar,"0.3.7"),(0,oe.registerVersion)(ar,"0.3.7","esm2017")}();const sl="/firebase-messaging-sw.js",ys="/firebase-cloud-messaging-push-scope",Lr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qs="google.c.a.c_id",ha="google.c.a.c_l",Uc="google.c.a.ts",Dp="google.c.a.e";var _s=(()=>{return(I=_s||(_s={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",_s;var I})();function ei(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function su(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let W=0;W<F.length;++W)Z[W]=F.charCodeAt(W);return Z}const ou="fcm_token_details_db",ur="fcm_token_object_Store";function Dh(I){return au.apply(this,arguments)}function au(){return au=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(ou))return null;let D=null;return(yield(0,X.X3)(ou,5,function(){var F=(0,O.Z)(function*(Z,W,Se,Le){var Ye;if(W<2||!Z.objectStoreNames.contains(ur))return;const wt=Le.objectStore(ur),$t=yield wt.index("fcmSenderId").get(I);if(yield wt.clear(),$t)if(2===W){const bt=$t;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;D={token:bt.fcmToken,createTime:null!==(Ye=bt.createTime)&&void 0!==Ye?Ye:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:ei(bt.vapidKey)}}}else if(3===W){const bt=$t;D={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ei(bt.auth),p256dh:ei(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ei(bt.vapidKey)}}}else if(4===W){const bt=$t;D={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ei(bt.auth),p256dh:ei(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ei(bt.vapidKey)}}}});return function(Z,W,Se,Le){return F.apply(this,arguments)}}())).close(),yield(0,X.Lj)(ou),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Bc(D)?D:null}),au.apply(this,arguments)}function Bc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ji="firebase-messaging-store";let fa=null;function ol(){return fa||(fa=(0,X.X3)("firebase-messaging-database",1,(I,D)=>{0===D&&I.createObjectStore(Ji)})),fa}function dn(I){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(I){const D=Zs(I),F=yield(yield ol()).transaction(Ji).objectStore(Ji).get(D);if(F)return F;{const Z=yield Dh(I.appConfig.senderId);if(Z)return yield vs(I,Z),Z}})).apply(this,arguments)}function vs(I,D){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(I,D){const x=Zs(I),Z=(yield ol()).transaction(Ji,"readwrite");return yield Z.objectStore(Ji).put(D,x),yield Z.complete,D})).apply(this,arguments)}function jc(I){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(I){const D=Zs(I),F=(yield ol()).transaction(Ji,"readwrite");yield F.objectStore(Ji).delete(D),yield F.complete})).apply(this,arguments)}function Zs({appConfig:I}){return I.appId}const Sn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pa(I,D){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(I,D){const x=yield ws(I),F=lt(D),Z={method:"POST",headers:x,body:JSON.stringify(F)};let W;try{W=yield(yield fetch(Ur(I.appConfig),Z)).json()}catch(Se){throw Sn.create("token-subscribe-failed",{errorInfo:Se})}if(W.error)throw Sn.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw Sn.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function Er(I,D){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(I,D){const x=yield ws(I),F=lt(D.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(F)};let W;try{W=yield(yield fetch(`${Ur(I.appConfig)}/${D.token}`,Z)).json()}catch(Se){throw Sn.create("token-update-failed",{errorInfo:Se})}if(W.error)throw Sn.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw Sn.create("token-update-no-token");return W.token})).apply(this,arguments)}function Xi(I,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(I,D){const F={method:"DELETE",headers:yield ws(I)};try{const W=yield(yield fetch(`${Ur(I.appConfig)}/${D}`,F)).json();if(W.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(Z){throw Sn.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function Ur({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ws(I){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function lt({p256dh:I,auth:D,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:D,p256dh:I}};return F!==Lr&&(Z.web.applicationPubKey=F),Z}const du=6048e5;function ga(I){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(I){const D=yield ll(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:ei(D.getKey("auth")),p256dh:ei(D.getKey("p256dh"))},F=yield dn(I.firebaseDependencies);if(F){if(No(F.subscriptionOptions,x))return Date.now()>=F.createTime+du?al(I,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Xi(I.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return we(I.firebaseDependencies,x)}return we(I.firebaseDependencies,x)})).apply(this,arguments)}function fu(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(I){const D=yield dn(I.firebaseDependencies);D&&(yield Xi(I.firebaseDependencies,D.token),yield jc(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function al(I,D){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(I,D){try{const x=yield Er(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield vs(I.firebaseDependencies,F),x}catch(x){throw yield fu(I),x}})).apply(this,arguments)}function we(I,D){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(I,D){const F={token:yield pa(I,D),createTime:Date.now(),subscriptionOptions:D};return yield vs(I,F),F.token})).apply(this,arguments)}function ll(I,D){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:su(D)})})).apply(this,arguments)}function No(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Oo(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Br(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const F=D.notification.body;F&&(I.notification.body=F);const Z=D.notification.image;Z&&(I.notification.image=Z)}(D,I),function cl(I,D){!D.data||(I.data=D.data)}(D,I),function dl(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const x=D.fcmOptions.link;x&&(I.fcmOptions.link=x);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function Hc(I){return"object"==typeof I&&!!I&&qs in I}function hl(I,D){const x=[];for(let F=0;F<I.length;F++)x.push(I.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Is(I){return Sn.create("missing-app-config-values",{valueName:I})}hl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lr{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function gu(I){if(!I||!I.options)throw Is("App Configuration Object");if(!I.name)throw Is("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const F of D)if(!x[F])throw Is(F);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ti(I){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(sl,{scope:ys}),I.swRegistration.update().catch(()=>{})}catch(D){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ds(I,D){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ti(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function fl(I,D){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Lr)})).apply(this,arguments)}function pl(){return(pl=(0,O.Z)(function*(I,D){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield fl(I,null==D?void 0:D.vapidKey),yield Ds(I,null==D?void 0:D.serviceWorkerRegistration),ga(I)})).apply(this,arguments)}function ma(I,D,x){return ya.apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(I,D,x){const F=gl(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[qs],message_name:x[ha],message_time:x[Uc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gl(I){switch(I){case _s.NOTIFICATION_CLICKED:return"notification_open";case _s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $c(){return($c=(0,O.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===_s.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Oo(x)):I.onMessageHandler.next(Oo(x)));const F=x.data;Hc(F)&&"1"===F[Dp]&&(yield ma(I,x.messageType,F))})).apply(this,arguments)}const yl="@firebase/messaging",Gc=I=>{const D=new lr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ml(I,D){return $c.apply(this,arguments)}(D,x)),D},Ks=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function _u(I,D){return pl.apply(this,arguments)}(D,F)}};function zc(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qc(){(0,oe._registerComponent)(new pe.wA("messaging",Gc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",Ks,"PRIVATE")),(0,oe.registerVersion)(yl,"0.9.12"),(0,oe.registerVersion)(yl,"0.9.12","esm2017")}();const vl="analytics",Gm="firebase_id",_a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vu="https://www.googletagmanager.com/gtag/js",Fn=new re.Yd("@firebase/analytics");function Zc(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function Cp(I,D){const x=document.createElement("script");x.src=`${vu}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Po(I,D,x,F,Z,W){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,O.Z)(function*(I,D,x,F,Z,W){const Se=F[Z];try{if(Se)yield D[Se];else{const Ye=(yield Zc(x)).find(wt=>wt.measurementId===Z);Ye&&(yield D[Ye.appId])}}catch(Le){Fn.error(Le)}I("config",Z,W)})).apply(this,arguments)}function wl(I,D,x,F,Z){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(I,D,x,F,Z){try{let W=[];if(Z&&Z.send_to){let Se=Z.send_to;Array.isArray(Se)||(Se=[Se]);const Le=yield Zc(x);for(const Ye of Se){const wt=Le.find(bt=>bt.measurementId===Ye),$t=wt&&D[wt.appId];if(!$t){W=[];break}W.push($t)}}0===W.length&&(W=Object.values(D)),yield Promise.all(W),I("event",F,Z||{})}catch(W){Fn.error(W)}})).apply(this,arguments)}function Tp(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(vu))return D;return null}const Ft=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Js=new class zn{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function yi(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Rr(I){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I){var D;const{appId:x,apiKey:F}=I,Z={method:"GET",headers:yi(F)},W=_a.replace("{app-id}",x),Se=yield fetch(W,Z);if(200!==Se.status&&304!==Se.status){let Le="";try{const Ye=yield Se.json();(null===(D=Ye.error)||void 0===D?void 0:D.message)&&(Le=Ye.error.message)}catch(Ye){}throw Ft.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Le})}return Se.json()})).apply(this,arguments)}function Ri(I){return dt.apply(this,arguments)}function dt(){return(dt=(0,O.Z)(function*(I,D=Js,x){const{appId:F,apiKey:Z,measurementId:W}=I.options;if(!F)throw Ft.create("no-app-id");if(!Z){if(W)return{measurementId:W,appId:F};throw Ft.create("no-api-key")}const Se=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new bl;return setTimeout((0,O.Z)(function*(){Le.abort()}),void 0!==x?x:6e4),va({appId:F,apiKey:Z,measurementId:W},Se,Le,D)})).apply(this,arguments)}function va(I,D,x){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},F,Z=Js){const{appId:W,measurementId:Se}=I;try{yield As(F,D)}catch(Le){if(Se)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:W,measurementId:Se};throw Le}try{const Le=yield Rr(I);return Z.deleteThrottleMetadata(W),Le}catch(Le){if(!Yc(Le)){if(Z.deleteThrottleMetadata(W),Se)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:W,measurementId:Se};throw Le}const Ye=503===Number(Le.customData.httpStatus)?(0,X.$s)(x,Z.intervalMillis,30):(0,X.$s)(x,Z.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Ye,backoffCount:x+1};return Z.setThrottleMetadata(W,wt),Fn.debug(`Calling attemptFetch again in ${Ye} millis`),va(I,wt,F,Z)}})).apply(this,arguments)}function As(I,D){return new Promise((x,F)=>{const Z=Math.max(D-Date.now(),0),W=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(W),F(Ft.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Yc(I){if(!(I instanceof X.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class bl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Ah(){return ko.apply(this,arguments)}function ko(){return(ko=(0,O.Z)(function*(){if(!(0,X.hl)())return Fn.warn(Ft.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(I){return Fn.warn(Ft.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(I,D,x,F,Z,W,Se){var Le;const Ye=Ri(I);Ye.then(Mn=>{x[Mn.measurementId]=Mn.appId,I.options.measurementId&&Mn.measurementId!==I.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>Fn.error(Mn)),D.push(Ye);const wt=Ah().then(Mn=>{if(Mn)return F.getId()}),[$t,bt]=yield Promise.all([Ye,wt]);Tp()||Cp(W,$t.measurementId),Z("js",new Date);const Un=null!==(Le=null==Se?void 0:Se.config)&&void 0!==Le?Le:{};return Un.origin="firebase",Un.update=!0,null!=bt&&(Un[Gm]=bt),Z("config",$t.measurementId,Un),$t.measurementId})).apply(this,arguments)}class jr{constructor(D){this.app=D}_delete(){return delete _i[this.app.options.appId],Promise.resolve()}}let _i={},eo=[];const Il={};let Fo,to,Ss="dataLayer",no=!1;function ni(I,D,x){!function Ea(){const I=[];if((0,X.ru)()&&I.push("This is a browser extension environment."),(0,X.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=Ft.create("invalid-analytics-context",{errorInfo:D});Fn.warn(x.message)}}();const F=I.options.appId;if(!F)throw Ft.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ft.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_i[F])throw Ft.create("already-exists",{id:F});if(!no){!function ts(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Ss);const{wrappedGtag:W,gtagCore:Se}=function Th(I,D,x,F,Z){let W=function(...Se){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(W=window[Z]),window[Z]=function Kc(I,D,x,F){function W(){return(W=(0,O.Z)(function*(Se,Le,Ye){try{"event"===Se?yield wl(I,D,x,Le,Ye):"config"===Se?yield Po(I,D,x,F,Le,Ye):I("set",Le)}catch(wt){Fn.error(wt)}})).apply(this,arguments)}return function Z(Se,Le,Ye){return W.apply(this,arguments)}}(W,I,D,x),{gtagCore:W,wrappedGtag:window[Z]}}(_i,eo,Il,Ss,"gtag");to=W,Fo=Se,no=!0}return _i[F]=function Xs(I,D,x,F,Z,W,Se){return Ni.apply(this,arguments)}(I,eo,Il,D,Fo,Ss,x),new jr(I)}function wa(){return(wa=(0,O.Z)(function*(I,D,x,F,Z){if(Z&&Z.global)I("event",x,F);else{const W=yield D;I("event",x,Object.assign(Object.assign({},F),{send_to:W}))}})).apply(this,arguments)}function Ia(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}const Cu="@firebase/analytics";!function Mp(){(0,oe._registerComponent)(new pe.wA(vl,(D,{options:x})=>ni(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function I(D){try{const x=D.getProvider(vl).getImmediate();return{logEvent:(F,Z,W)=>function Jc(I,D,x,F){I=(0,X.m9)(I),function bu(I,D,x,F,Z){return wa.apply(this,arguments)}(to,_i[I.app.options.appId],D,x,F).catch(Z=>Fn.error(Z))}(x,F,Z,W)}}catch(x){throw Ft.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Cu,"0.7.8"),(0,oe.registerVersion)(Cu,"0.7.8","esm2017")}();var ed=k(4408),zm=k(7565);const Tl=new class xn extends zm.v{}(class so extends ed.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Zm=k(4986),td=k(8505),fn=k(9468),ri=k(5363);const Zn=new d.GfV("7.3.0"),Ei="__angularfire_symbol__analyticsIsSupportedValue",wi="__angularfire_symbol__analyticsIsSupported",ii="__angularfire_symbol__remoteConfigIsSupportedValue",xs="__angularfire_symbol__remoteConfigIsSupported",Da="__angularfire_symbol__messagingIsSupportedValue",nd="__angularfire_symbol__messagingIsSupported";function Ca(I,D,x){if(D){if(1===D.length)return D[0];const W=D.filter(Se=>Se.app===x);if(1===W.length)return W[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[wi]||(globalThis[wi]=Ia().then(I=>globalThis[Ei]=I).catch(()=>globalThis[Ei]=!1)),globalThis[nd]||(globalThis[nd]=zc().then(I=>globalThis[Da]=I).catch(()=>globalThis[Da]=!1)),globalThis[xs]||(globalThis[xs]=Gs().then(I=>globalThis[ii]=I).catch(()=>globalThis[ii]=!1));const id=(I,D)=>{const x=D?[D]:(0,K.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(I).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function le(){}class Pi{constructor(D,x=Tl){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Z=this.zone;return this.delegate.schedule(function(Se){Z.runGuarded(()=>{D.apply(this,[Se])})},x,F)}}class Tu{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",le,{},le,le)),x.pipe((0,td.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ki=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Pi(Zone.current)),this.insideAngular=x.run(()=>new Pi(Zone.current,Zm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Et(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function yt(I){return Et(),function Fi(I){return function(x){return(x=x.lift(new Tu(I.ngZone))).pipe((0,fn.R)(I.outsideAngular),(0,ri.Q)(I.insideAngular))}}(Et())(I)}},2090:(it,Ce,k)=>{k.d(Ce,{$s:()=>Bs,BH:()=>Te,G6:()=>ne,L:()=>ue,LL:()=>Pe,Lj:()=>kt,Mn:()=>He,Sg:()=>xe,UG:()=>ve,US:()=>re,X3:()=>ut,ZB:()=>Q,ZR:()=>ge,b$:()=>Ie,d:()=>ye,eu:()=>J,hl:()=>qe,jU:()=>Xe,m9:()=>at,ne:()=>ot,pd:()=>zi,r3:()=>Wt,ru:()=>Ze,tV:()=>B,uI:()=>fe,vZ:()=>cs,w1:()=>_e,xO:()=>Si,xb:()=>ir,z$:()=>ke,zI:()=>se,zd:()=>Mr});var d=k(5861);const X=function(U){const L=[];let $=0;for(let ce=0;ce<U.length;ce++){let Y=U.charCodeAt(ce);Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):55296==(64512&Y)&&ce+1<U.length&&56320==(64512&U.charCodeAt(ce+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++ce)),L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Y=0;Y<U.length;Y+=3){const Ve=U[Y],ft=Y+1<U.length,Kt=ft?U[Y+1]:0,_r=Y+2<U.length,Ht=_r?U[Y+2]:0;let ln=(15&Kt)<<2|Ht>>6,tr=63&Ht;_r||(tr=64,ft||(ln=64)),ce.push($[Ve>>2],$[(3&Ve)<<4|Kt>>4],$[ln],$[tr])}return ce.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(X(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,ce=0;for(;$<U.length;){const Y=U[$++];if(Y<128)L[ce++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ve=U[$++];L[ce++]=String.fromCharCode((31&Y)<<6|63&Ve)}else if(Y>239&&Y<365){const _r=((7&Y)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[ce++]=String.fromCharCode(55296+(_r>>10)),L[ce++]=String.fromCharCode(56320+(1023&_r))}else{const Ve=U[$++],ft=U[$++];L[ce++]=String.fromCharCode((15&Y)<<12|(63&Ve)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Y=0;Y<U.length;){const Ve=$[U.charAt(Y++)],Kt=Y<U.length?$[U.charAt(Y)]:0;++Y;const Ht=Y<U.length?$[U.charAt(Y)]:64;++Y;const At=Y<U.length?$[U.charAt(Y)]:64;if(++Y,null==Ve||null==Kt||null==Ht||null==At)throw Error();ce.push(Ve<<2|Kt>>4),64!==Ht&&(ce.push(Kt<<4&240|Ht>>2),64!==At&&ce.push(Ht<<6&192|At))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=X(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!Ge($)||(U[$]=Q(U[$],L[$]));return U}function Ge(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,ce)=>{$?this.reject($):this.resolve(ce),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,ce))}}}function xe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=L||"demo-project",Y=U.iat||0,Ve=U.sub||U.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Y,exp:Y+3600,auth_time:Y,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ft)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function Ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return ke().indexOf("Electron/")>=0}function _e(){const U=ke();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function He(){return ke().indexOf("MSAppHost/")>=0}function ne(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function J(){return new Promise((U,L)=>{try{let $=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ce);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(ce),U(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Ve;L((null===(Ve=Y.error)||void 0===Ve?void 0:Ve.message)||"")}}catch($){L($)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor(L,$,ce){super($),this.code=L,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(L,$,ce){this.service=L,this.serviceName=$,this.errors=ce}create(L,...$){const ce=$[0]||{},Y=`${this.service}/${L}`,Ve=this.errors[L],ft=Ve?function It(U,L){return U.replace(qt,($,ce)=>{const Y=L[ce];return null!=Y?String(Y):`<${ce}?>`})}(Ve,ce):"Error";return new ge(Y,`${this.serviceName}: ${ft} (${Y}).`,ce)}}const qt=/\{\$([^}]+)}/g;function Wt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function ir(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function cs(U,L){if(U===L)return!0;const $=Object.keys(U),ce=Object.keys(L);for(const Y of $){if(!ce.includes(Y))return!1;const Ve=U[Y],ft=L[Y];if(xr(Ve)&&xr(ft)){if(!cs(Ve,ft))return!1}else if(Ve!==ft)return!1}for(const Y of ce)if(!$.includes(Y))return!1;return!0}function xr(U){return null!==U&&"object"==typeof U}function Si(U){const L=[];for(const[$,ce]of Object.entries(U))Array.isArray(ce)?ce.forEach(Y=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(ce));return L.length?"&"+L.join("&"):""}function Mr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Y,Ve]=ce.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Ve)}}),L}function zi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function ot(U,L){const $=new kr(U,L);return $.subscribe.bind($)}class kr{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(ce=>{this.error(ce)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,ce){let Y;if(void 0===L&&void 0===$&&void 0===ce)throw new Error("Missing Observer.");Y=function $n(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:ce},void 0===Y.next&&(Y.next=Qr),void 0===Y.error&&(Y.error=Qr),void 0===Y.complete&&(Y.complete=Qr);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(ft){}}),this.observers.push(Y),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function Bs(U,L=1e3,$=2){const ce=L*Math.pow($,U),Y=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Y)}function at(U){return U&&U._delegate?U._delegate:U}function yr(U,L){return new Promise(($,ce)=>{U.onsuccess=Y=>{$(Y.target.result)},U.onerror=Y=>{var Ve;ce(`${L}: ${null===(Ve=Y.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Pt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$="readonly"){return new We(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new De(this._db.createObjectStore(L,$))}close(){this._db.close()}}class We{constructor(L){this._transaction=L,this.complete=new Promise(($,ce)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(L){return new De(this._transaction.objectStore(L))}}class De{constructor(L){this._store=L}index(L){return new Je(this._store.index(L))}createIndex(L,$,ce){return new Je(this._store.createIndex(L,$,ce))}get(L){return yr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return yr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return yr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return yr(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(L){this._index=L}get(L){return yr(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,$){return new Promise((ce,Y)=>{try{const Ve=indexedDB.open(U,L);Ve.onsuccess=ft=>{ce(new Pt(ft.target.result))},Ve.onerror=ft=>{var Kt;Y(`Error opening indexedDB: ${null===(Kt=ft.target.error)||void 0===Kt?void 0:Kt.message}`)},Ve.onupgradeneeded=ft=>{$(new Pt(Ve.result),ft.oldVersion,ft.newVersion,new We(Ve.transaction))}}catch(Ve){Y(`Error opening indexedDB: ${Ve.message}`)}})}function kt(U){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(U){return new Promise((L,$)=>{try{const ce=indexedDB.deleteDatabase(U);ce.onsuccess=()=>{L()},ce.onerror=Y=>{var Ve;$(`Error deleting indexedDB database "${U}": ${null===(Ve=Y.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(ce){$(`Error deleting indexedDB database "${U}": ${ce.message}`)}})})).apply(this,arguments)}},934:(it,Ce,k)=>{var d=k(5e3);let K=null;function O(){return K}const re=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ue(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const B=new d.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new j((0,d.LFG)(re))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(n){const e=(0,d.LFG)(re).location;return new Ze((0,d.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const Xe=new d.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+ke(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+ke(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(Xe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+ke(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+ke(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(Xe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ke(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ke,n.joinWithSlash=Te,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function _e(){return new ye((0,d.LFG)(fe),(0,d.LFG)(he))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}function Hs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}class ps{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ps(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),Ki(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ki(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ki(n,e){n.context.$implicit=e.item}let Mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function ur(n){return"server"===n}let uu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new lu((0,d.LFG)(re),window)}),n})();class lu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ji(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class dn{}class vs extends class Ro extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){K||(K=n)}(new vs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jc(){return an=an||document.querySelector("base"),an?an.getAttribute("href"):null}();return null==t?null:function Zs(n){zs=zs||document.createElement("a"),zs.setAttribute("href",n);const e=zs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){an=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hs(document.cookie,e)}}let zs,an=null;const vr=new d.OlP("TRANSITION_ID"),pa=[{provide:d.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[vr,re,d.zs3],multi:!0}];class gi{static init(){(0,d.VLi)(new gi)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Er=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Es=new d.OlP("EventManagerPlugins");let Xi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Es),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class cu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ur=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ws=(()=>{class n extends Ur{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bs))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function bs(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},du=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(du,n),t.push(o))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new No(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new cl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xi),d.LFG(ws),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class No{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class cl extends No{constructor(e,t,r,o){super(e),this.component=r;const u=we(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function al(n){return"_ngcontent-%COMP%".replace(du,n)}(o+"-"+r.id),this.hostAttr=function ul(n){return"_nghost-%COMP%".replace(du,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class dl extends No{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=we(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Hc=(()=>{class n extends cu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const hl=["alt","control","meta","shift"],Is={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ti={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mu=(()=>{class n extends cu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(hl.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Ds(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&lr.hasOwnProperty(e)&&(e=lr[e]))}return Is[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),hl.forEach(u=>{u!=o&&ti[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const pl=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function mi(){vs.makeCurrent(),gi.init()},multi:!0},{provide:re,useFactory:function yu(){return(0,d.RDi)(document),document},deps:[]}]),ma=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function fl(){return new d.qLn},deps:[]},{provide:Es,useClass:Hc,multi:!0,deps:[re,d.R0b,d.Lbi]},{provide:Es,useClass:mu,multi:!0,deps:[re]},{provide:mn,useClass:mn,deps:[Xi,ws,d.AFp]},{provide:d.FYo,useExisting:mn},{provide:Ur,useExisting:ws},{provide:ws,useClass:ws,deps:[re]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Xi,useClass:Xi,deps:[Es,d.R0b]},{provide:dn,useClass:Er,deps:[]}];let ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:vr,useExisting:d.AFp},pa]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:ma,imports:[Mo,d.hGG]}),n})();"undefined"!=typeof window&&window;var Eu=k(7669),Ft=k(8996);function ht(...n){const e=(0,Eu.yG)(n);return(0,Ft.D)(n,e)}var qn=k(8306),zn=k(5577),Js=k(576);function yi(n,e){return(0,Js.m)(e)?(0,zn.z)(n,e,1):(0,zn.z)(n,1)}var Rr=k(4482),Mt=k(5403);function Ri(n,e){return(0,Rr.e)((t,r)=>{let o=0;t.subscribe((0,Mt.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var dt=k(4004);class va{}class ns{}class As{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(h):this.headers.set(u,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof As?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new As;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof As?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let h=this.headers.get(t);if(!h)return;h=h.filter(m=>-1===u.indexOf(m)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Yc{encodeKey(e){return Xs(e)}encodeValue(e){return Xs(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ah=/%(\d[a-f0-9])/gi,ko={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Xs(n){return encodeURIComponent(n).replace(Ah,(e,t)=>{var r;return null!==(r=ko[t])&&void 0!==r?r:e})}function Ni(n){return`${n}`}class jr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Yc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function bl(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[h,m]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],w=t.get(h)||[];w.push(m),t.set(h,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new jr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ni(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Ni(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class eo{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ss(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function wu(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Fo(n){return"undefined"!=typeof FormData&&n instanceof FormData}class no{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Il(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new As),this.context||(this.context=new eo),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+h}}else this.params=new jr,this.urlWithParams=t}serializeBody(){return null===this.body?null:Ss(this.body)||wu(this.body)||Fo(this.body)||function to(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof jr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Fo(this.body)?null:wu(this.body)?this.body.type||null:Ss(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof jr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,u=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,M=e.params||this.params;const N=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((H,G)=>H.set(G,e.setHeaders[G]),C)),e.setParams&&(M=Object.keys(e.setParams).reduce((H,G)=>H.set(G,e.setParams[G]),M)),new no(r,o,h,{params:M,headers:C,context:N,reportProgress:w,responseType:u,withCredentials:m})}}var Ln=(()=>((Ln=Ln||{})[Ln.Sent=0]="Sent",Ln[Ln.UploadProgress=1]="UploadProgress",Ln[Ln.ResponseHeader=2]="ResponseHeader",Ln[Ln.DownloadProgress=3]="DownloadProgress",Ln[Ln.Response=4]="Response",Ln[Ln.User=5]="User",Ln))();class Ea{constructor(e,t=200,r="OK"){this.headers=e.headers||new As,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ni extends Ea{constructor(e={}){super(e),this.type=Ln.ResponseHeader}clone(e={}){return new ni({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class bu extends Ea{constructor(e={}){super(e),this.type=Ln.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new bu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wa extends Ea{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Iu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let vi=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof no)u=t;else{let w,C;w=o.headers instanceof As?o.headers:new As(o.headers),o.params&&(C=o.params instanceof jr?o.params:new jr({fromObject:o.params})),u=new no(t,r,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=ht(u).pipe(yi(w=>this.handler.handle(w)));if(t instanceof no||"events"===o.observe)return h;const m=h.pipe(Ri(w=>w instanceof bu));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,dt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,dt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,dt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,dt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new jr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Iu(o,r))}post(t,r,o={}){return this.request("POST",t,Iu(o,r))}put(t,r,o={}){return this.request("PUT",t,Iu(o,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(va))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Dl{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ro=new d.OlP("HTTP_INTERCEPTORS");let Du=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const bn=/^\)\]\}',?\n/;let xp=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qn.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((G,ee)=>o.setRequestHeader(G,ee.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&o.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();o.responseType="json"!==G?G:"text"}const u=t.serializeBody();let h=null;const m=()=>{if(null!==h)return h;const G=o.statusText||"OK",ee=new As(o.getAllResponseHeaders()),Re=function Sp(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return h=new ni({headers:ee,status:o.status,statusText:G,url:Re}),h},w=()=>{let{headers:G,status:ee,statusText:Re,url:nt}=m(),vt=null;204!==ee&&(vt=void 0===o.response?o.responseText:o.response),0===ee&&(ee=vt?200:0);let Lt=ee>=200&&ee<300;if("json"===t.responseType&&"string"==typeof vt){const Zt=vt;vt=vt.replace(bn,"");try{vt=""!==vt?JSON.parse(vt):null}catch(Rt){vt=Zt,Lt&&(Lt=!1,vt={error:Rt,text:vt})}}Lt?(r.next(new bu({body:vt,headers:G,status:ee,statusText:Re,url:nt||void 0})),r.complete()):r.error(new wa({error:vt,headers:G,status:ee,statusText:Re,url:nt||void 0}))},C=G=>{const{url:ee}=m(),Re=new wa({error:G,status:o.status||0,statusText:o.statusText||"Unknown Error",url:ee||void 0});r.error(Re)};let M=!1;const N=G=>{M||(r.next(m()),M=!0);let ee={type:Ln.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(ee.total=G.total),"text"===t.responseType&&!!o.responseText&&(ee.partialText=o.responseText),r.next(ee)},H=G=>{let ee={type:Ln.UploadProgress,loaded:G.loaded};G.lengthComputable&&(ee.total=G.total),r.next(ee)};return o.addEventListener("load",w),o.addEventListener("error",C),o.addEventListener("timeout",C),o.addEventListener("abort",C),t.reportProgress&&(o.addEventListener("progress",N),null!==u&&o.upload&&o.upload.addEventListener("progress",H)),o.send(u),r.next({type:Ln.Sent}),()=>{o.removeEventListener("error",C),o.removeEventListener("abort",C),o.removeEventListener("load",w),o.removeEventListener("timeout",C),t.reportProgress&&(o.removeEventListener("progress",N),null!==u&&o.upload&&o.upload.removeEventListener("progress",H)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Jc=new d.OlP("XSRF_COOKIE_NAME"),Cu=new d.OlP("XSRF_HEADER_NAME");class Xc{}let Mp=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re),d.LFG(d.Lbi),d.LFG(Jc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ed=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xc),d.LFG(Cu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(ro,[]);this.chain=r.reduceRight((o,u)=>new Dl(o,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ns),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Tl=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ed,useClass:Du}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Jc,useValue:t.cookieName}:[],t.headerName?{provide:Cu,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ed,{provide:ro,useExisting:ed,multi:!0},{provide:Xc,useClass:Mp},{provide:Jc,useValue:"XSRF-TOKEN"},{provide:Cu,useValue:"X-XSRF-TOKEN"}]}),n})(),Lo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[vi,{provide:va,useClass:so},xp,{provide:ns,useExisting:xp}],imports:[[Tl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var fn=k(2011),ri=k(4986),Zn=k(5813),Ei=k(8189);function ii(...n){return function wi(){return(0,Ei.J)(1)}()((0,Ft.D)(n,(0,Eu.yG)(n)))}function xs(...n){const e=(0,Eu.yG)(n);return(0,Rr.e)((t,r)=>{(e?ii(n,t,e):ii(n,t)).subscribe(r)})}function Da(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Mt.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function nd(n,e,t,r,o){return(u,h)=>{let m=t,w=e,C=0;u.subscribe((0,Mt.x)(h,M=>{const N=C++;w=m?n(w,M,N):(m=!0,M),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function Vo(n,e){return(0,Rr.e)(nd(n,e,arguments.length>=2,!0))}var oo=k(4671);function rd(n,e){return n===e}k(820);var Ke,id=k(3942),le=k(5861),Pi=k(9681),Tu=k(4859),ki=k(1877),Et=k(2090),Sh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vn={},Ta=Ta||{},yt=Sh||self;function Fi(){}function ao(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function uo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var D="closure_uid_"+(1e9*Math.random()>>>0),x=0;function F(n,e,t){return n.call.apply(n.bind,arguments)}function Z(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function W(n,e,t){return(W=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?F:Z).apply(null,arguments)}function Se(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Le(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Ye(){this.s=this.s,this.o=this.o}var $t={};Ye.prototype.s=!1,Ye.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function I(n){return Object.prototype.hasOwnProperty.call(n,D)&&n[D]||(n[D]=++x)}(this);delete $t[n]}},Ye.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bt=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Un=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function lo(n){return Array.prototype.concat.apply([],arguments)}function Uo(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $r(n){return/^[\s\xa0]*$/.test(n)}var Nr,si=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yn(n,e){return-1!=n.indexOf(e)}function rs(n,e){return n<e?-1:n>e?1:0}e:{var xh=yt.navigator;if(xh){var Al=xh.userAgent;if(Al){Nr=Al;break e}}Nr=""}function Bo(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mh(n){const e={};for(const t in n)e[t]=n[t];return e}var Rp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Np(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Rp.length;u++)t=Rp[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ms(n){return Ms[" "](n),n}Ms[" "]=Fi;var sd,n,Wm=yn(Nr,"Opera"),Au=yn(Nr,"Trident")||yn(Nr,"MSIE"),Rh=yn(Nr,"Edge"),Su=Rh||Au,Km=yn(Nr,"Gecko")&&!(yn(Nr.toLowerCase(),"webkit")&&!yn(Nr,"Edge"))&&!(yn(Nr,"Trident")||yn(Nr,"MSIE"))&&!yn(Nr,"Edge"),Ym=yn(Nr.toLowerCase(),"webkit")&&!yn(Nr,"Edge");function Op(){var n=yt.document;return n?n.documentMode:void 0}e:{var xu="",xl=(n=Nr,Km?/rv:([^\);]+)(\)|;)/.exec(n):Rh?/Edge\/([\d\.]+)/.exec(n):Au?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ym?/WebKit\/(\S+)/.exec(n):Wm?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xl&&(xu=xl?xl[1]:""),Au){var jo=Op();if(null!=jo&&jo>parseFloat(xu)){sd=String(jo);break e}}sd=xu}var Qm={};var Oh=yt.document&&Au&&(Op()||parseInt(sd,10))||void 0,kp=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{yt.addEventListener("test",Fi,e),yt.removeEventListener("test",Fi,e)}catch(t){}return n}();function br(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Aa(n,e){if(br.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Km){e:{try{Ms(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Fp[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Aa.Z.h.call(this)}}br.prototype.h=function(){this.defaultPrevented=!0},Le(Aa,br);var Fp={2:"touch",3:"pen",4:"mouse"};Aa.prototype.h=function(){Aa.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rl="closure_listenable_"+(1e6*Math.random()|0),Jm=0;function Xm(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Jm,this.ca=this.fa=!1}function Mu(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function od(n){this.src=n,this.g={},this.h=0}function Li(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=bt(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Mu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sa(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}od.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=Sa(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Xm(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var ad="closure_lm_"+(1e6*Math.random()|0),Lp={};function Ph(n,e,t,r,o){if(r&&r.once)return Vp(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ph(n,e[u],t,r,o);return null}return t=Lh(t),n&&n[Rl]?n.N(e,t,uo(r)?!!r.capture:!!r,o):ey(n,e,t,!1,r,o)}function ey(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=uo(o)?!!o.capture:!!o,m=co(n);if(m||(n[ad]=m=new od(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function ty(){var e=w0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)kp||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Up(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Vp(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Vp(n,e[u],t,r,o);return null}return t=Lh(t),n&&n[Rl]?n.O(e,t,uo(r)?!!r.capture:!!r,o):ey(n,e,t,!0,r,o)}function kh(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)kh(n,e[u],t,r,o);else r=uo(r)?!!r.capture:!!r,t=Lh(t),n&&n[Rl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sa(u=n.g[e],t,r,o))&&(Mu(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=co(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sa(e,t,r,o)),(t=-1<n?e[n]:null)&&Fh(t))}function Fh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rl])Li(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Up(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=co(e))?(Li(t,n),0==t.h&&(t.src=null,e[ad]=null)):Mu(n)}}}function Up(n){return n in Lp?Lp[n]:Lp[n]="on"+n}function w0(n,e){if(n.ca)n=!0;else{e=new Aa(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Fh(n),n=t.call(r,e)}return n}function co(n){return(n=n[ad])instanceof od?n:null}var Bp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lh(n){return"function"==typeof n?n:(n[Bp]||(n[Bp]=function(e){return n.handleEvent(e)}),n[Bp])}function In(){Ye.call(this),this.i=new od(this),this.P=this,this.I=null}function cr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new br(e,n);else if(e instanceof br)e.target=e.target||n;else{var o=e;Np(e=new br(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=Gr(h,r,!0,e)&&o}if(o=Gr(h=e.g=n,r,!0,e)&&o,o=Gr(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Gr(h=e.g=t[u],r,!1,e)&&o}function Gr(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&Li(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Le(In,Ye),In.prototype[Rl]=!0,In.prototype.removeEventListener=function(n,e,t,r){kh(this,n,e,t,r)},In.prototype.M=function(){if(In.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mu(t[r]);delete n.g[e],n.h--}}this.I=null},In.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},In.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var xa=yt.JSON.stringify;function jp(){var n=ny;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Nl,Vh=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new b0,n=>n.reset());class b0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hp(n){yt.setTimeout(()=>{throw n},0)}function $p(n,e){Nl||function Uh(){var n=yt.Promise.resolve(void 0);Nl=function(){n.then(ry)}}(),Ol||(Nl(),Ol=!0),ny.add(n,e)}var Ol=!1,ny=new class ud{constructor(){this.h=this.g=null}add(e,t){const r=Vh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ry(){for(var n;n=jp();){try{n.h.call(n.g)}catch(t){Hp(t)}var e=Vh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ol=!1}function Ma(n,e){In.call(this),this.h=n||1,this.g=e||yt,this.j=W(this.kb,this),this.l=Date.now()}function Bh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function jh(n,e,t){if("function"==typeof n)t&&(n=W(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=W(n.handleEvent,n)}return 2147483647<Number(e)?-1:yt.setTimeout(n,e||0)}function ld(n){n.g=jh(()=>{n.g=null,n.i&&(n.i=!1,ld(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Le(Ma,In),(Ke=Ma.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cr(this,"tick"),this.da&&(Bh(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){Ma.Z.M.call(this),Bh(this),delete this.g};class Hh extends Ye{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ld(this)}M(){super.M(),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ru(n){Ye.call(this),this.h=n,this.g={}}Le(Ru,Ye);var Pl=[];function kl(n,e,t,r){Array.isArray(t)||(t&&(Pl[0]=t.toString()),t=Pl);for(var o=0;o<t.length;o++){var u=Ph(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function cd(n){Bo(n.g,function(e,t){this.g.hasOwnProperty(t)&&Fh(e)},n),n.g={}}function dd(){this.g=!0}function Nu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qp(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return xa(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Ru.prototype.M=function(){Ru.Z.M.call(this),cd(this)},Ru.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dd.prototype.Aa=function(){this.g=!1},dd.prototype.info=function(){};var Ra={},Fl=null;function hd(){return Fl=Fl||new In}function Gh(n){br.call(this,Ra.Ma,n)}function Ll(n){const e=hd();cr(e,new Gh(e,n))}function iy(n,e){br.call(this,Ra.STAT_EVENT,n),this.stat=e}function oi(n){const e=hd();cr(e,new iy(e,n))}function Ou(n,e){br.call(this,Ra.Na,n),this.size=e}function Kn(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){n()},e)}Ra.Ma="serverreachability",Le(Gh,br),Ra.STAT_EVENT="statevent",Le(iy,br),Ra.Na="timingevent",Le(Ou,br);var Ho={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ul(){}function $o(){}Ul.prototype.h=null;var Bl,Na={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qr(){br.call(this,"d")}function Oa(){br.call(this,"c")}function fd(){}function Go(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ru(this),this.P=zp,this.W=new Ma(n=Su?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pd}function pd(){this.i=null,this.g="",this.h=!1}Le(qr,br),Le(Oa,br),Le(fd,Ul),fd.prototype.g=function(){return new XMLHttpRequest},fd.prototype.i=function(){return{}},Bl=new fd;var zp=45e3,gd={},md={};function Vi(n,e,t){n.K=1,n.v=R(fo(e)),n.s=t,n.U=!0,qh(n,null)}function qh(n,e){n.F=Date.now(),Pu(n),n.A=fo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Gl(t.h,"t",r),n.C=0,t=n.l.H,n.h=new pd,n.g=Tt(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Hh(W(n.Ia,n,n.g),n.O)),kl(n.V,n.g,"readystatechange",n.gb),e=n.H?Mh(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ll(1),function Wn(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var M=C[0];C=C[1];var N=M.split("_");h=2<=N.length&&"type"==N[1]?h+(M+"=")+C+"&":h+(M+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Zp(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yd(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=sy(n,t),o==md){4==e&&(n.o=4,oi(14),r=!1),Nu(n.j,n.m,null,"[Incomplete Response]");break}if(o==gd){n.o=4,oi(15),Nu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Nu(n.j,n.m,o,null),is(n,o)}Zp(n)&&o!=md&&o!=gd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yy(e),e.L=!0,oi(11))):(Nu(n.j,n.m,t,"[Invalid Chunked Response]"),ka(n),Pa(n))}function sy(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?md:(t=Number(e.substring(t,r)),isNaN(t)?gd:(r+=1)+t>e.length?md:(e=e.substr(r,t),n.C=r+t,e))}function Pu(n){n.Y=Date.now()+n.P,dr(n,n.P)}function dr(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kn(W(n.eb,n),e)}function ku(n){n.B&&(yt.clearTimeout(n.B),n.B=null)}function Pa(n){0==n.l.G||n.I||N0(n.l,n)}function ka(n){ku(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Bh(n.W),cd(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function is(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ay(t.i,n)))if(t.I=n.N,!n.J&&ay(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Kn(W(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ag(t),tf(t)}og(t),oi(18)}if(1>=I0(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else ql(t,11)}else if((n.J||t.g==n)&&ag(t),!$r(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ee=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var u=r.i;!u.g&&(yn(ee,"spdy")||yn(ee,"quic")||yn(ee,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(uy(u,u.h),u.h=null))}if(r.D){const Re=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.sa=Re,T(r.F,r.D,Re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=P0(r,r.H?r.la:null,r.W),h.J){ly(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(ku(m),Pu(m)),r.g=h}else M0(r);0<t.l.length&&sg(t)}else"stop"!=C[0]&&"close"!=C[0]||ql(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ql(t,7):ef(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Ll(4)}catch(C){}}function Hl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ao(n)||"string"==typeof n)Un(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ao(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function jl(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ao(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Fa(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Fa)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function zh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ho(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ho(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ho(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=Go.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==ss(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const M=ss(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||Su||this.g&&(this.h.h||this.g.ga()||T0(this.g)))){this.I||4!=M||7==e||Ll(8==e||0>=N?3:2),ku(this);var t=this.g.ba();this.N=t;t:if(Zp(this)){var r=T0(this.g);n="";var o=r.length,u=4==ss(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ka(this),Pa(this);var h="";break t}this.h.i=new yt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function Gp(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$r(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,oi(12),ka(this),Pa(this);break e}Nu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,is(this,t)}this.U?(yd(this,M,h),Su&&this.i&&3==M&&(kl(this.V,this.W,"tick",this.fb),this.W.start())):(Nu(this.j,this.m,h,null),is(this,h)),4==M&&ka(this),this.i&&!this.I&&(4==M?N0(this.l,this):(this.i=!1,Pu(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,oi(12)):(this.o=0,oi(13)),ka(this),Pa(this)}}}catch(M){}},Ke.fb=function(){if(this.g){var n=ss(this.g),e=this.g.ga();this.C<e.length&&(ku(this),yd(this,n,e),this.i&&4!=n&&Pu(this))}},Ke.cancel=function(){this.I=!0,ka(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function $h(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ll(3),oi(17)),ka(this),this.o=2,Pa(this)):dr(this,this.Y-n)},(Ke=Fa.prototype).R=function(){zh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return zh(this),this.g.concat()},Ke.get=function(n,e){return ho(this.h,n)?this.h[n]:e},Ke.set=function(n,e){ho(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Wp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function La(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof La){this.g=void 0!==e?e:n.g,y(this,n.j),this.s=n.s,f(this,n.i),p(this,n.m),this.l=n.l,e=n.h;var t=new po;t.i=e.i,e.g&&(t.g=new Fa(e.g),t.h=e.h),v(this,t),this.o=n.o}else n&&(t=String(n).match(Wp))?(this.g=!!e,y(this,t[1]||"",!0),this.s=Fe(t[2]||""),f(this,t[3]||"",!0),p(this,t[4]),this.l=Fe(t[5]||"",!0),v(this,t[6]||"",!0),this.o=Fe(t[7]||"")):(this.g=!!e,this.h=new po(null,this.g))}function fo(n){return new La(n)}function y(n,e,t){n.j=t?Fe(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function f(n,e,t){n.i=t?Fe(e,!0):e}function p(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function v(n,e,t){e instanceof po?(n.h=e,function Zh(n,e){e&&!n.j&&(Rs(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Kp(this,r),Gl(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Qe(e,$l)),n.h=new po(e,n.g))}function T(n,e,t){n.h.set(e,t)}function R(n){return T(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Fe(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qe(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pt),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pt(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}La.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qe(e,st,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qe(e,st,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qe(t,"/"==t.charAt(0)?Ui:Dn,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qe(t,_d)),n.join("")};var st=/[#\/\?@]/g,Dn=/[#\?:]/g,Ui=/[#\?]/g,$l=/[#\?@]/g,_d=/#/g;function po(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rs(n){n.g||(n.g=new Fa,n.h=0,n.i&&function oy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Kp(n,e){Rs(n),e=qo(n,e),ho(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ho((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&zh(n)))}function go(n,e){return Rs(n),e=qo(n,e),ho(n.g.h,e)}function Gl(n,e,t){Kp(n,e),0<t.length&&(n.i=null,n.g.set(qo(n,e),Uo(t)),n.h+=t.length)}function qo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Yp(n){this.l=n||Wh,n=yt.PerformanceNavigationTiming?0<(n=yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(yt.g&&yt.g.Ea&&yt.g.Ea()&&yt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=po.prototype).add=function(n,e){Rs(this),this.i=null,n=qo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){Rs(this),this.g.forEach(function(t,r){Un(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){Rs(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ke.R=function(n){Rs(this);var e=[];if("string"==typeof n)go(this,n)&&(e=lo(e,this.g.get(qo(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lo(e,n[t])}return e},Ke.set=function(n,e){return Rs(this),this.i=null,go(this,n=qo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var Wh=10;function Qp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function I0(n){return n.h?1:n.g?n.g.size:0}function ay(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function uy(n,e){n.g?n.g.add(e):n.h=e}function ly(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Jp(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Uo(n.i)}function Xp(){}function cy(){this.g=new Xp}function Wb(n,e,t){const r=t||"";try{Hl(n,function(o,u){let h=o;uo(o)&&(h=xa(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Kh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Ed(n){this.l=n.$b||null,this.j=n.ib||!1}function zo(n,e){In.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=eg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xp.prototype.stringify=function(n){return yt.JSON.stringify(n,void 0)},Xp.prototype.parse=function(n){return yt.JSON.parse(n,void 0)},Le(Ed,Ul),Ed.prototype.g=function(){return new zo(this.l,this.j)},Ed.prototype.i=function(n){return function(){return n}}({}),Le(zo,In);var eg=0;function dy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Yh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Fu(n)}function Fu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=zo.prototype).open=function(n,e){if(this.readyState!=eg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Fu(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||yt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yh(this)),this.readyState=eg},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Fu(this)),this.g&&(this.readyState=3,Fu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==yt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yh(this):Fu(this),3==this.readyState&&dy(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,Yh(this))},Ke.Ta=function(n){this.g&&(this.response=n,Yh(this))},Ke.ha=function(){this.g&&Yh(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Yb=yt.JSON.parse;function nr(n){In.call(this),this.headers=new Fa,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hy,this.K=this.L=!1}Le(nr,In);var hy="",D0=/^https?$/i,fy=["POST","PUT"];function tg(n){return"content-type"==n.toLowerCase()}function Qh(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,py(n),Jh(n)}function py(n){n.D||(n.D=!0,cr(n,"complete"),cr(n,"error"))}function ng(n){if(n.h&&void 0!==Ta&&(!n.C[1]||4!=ss(n)||2!=n.ba()))if(n.v&&4==ss(n))jh(n.Fa,0,n);else if(cr(n,"readystatechange"),4==ss(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Wp)[1]||null;if(!o&&yt.self&&yt.self.location){var u=yt.self.location.protocol;o=u.substr(0,u.length-1)}r=!D0.test(o?o.toLowerCase():"")}t=r}if(t)cr(n,"complete"),cr(n,"success");else{n.m=6;try{var h=2<ss(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",py(n)}}finally{Jh(n)}}}function Jh(n,e){if(n.g){rg(n);const t=n.g,r=n.C[0]?Fi:null;n.g=null,n.C=null,e||cr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function rg(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(yt.clearTimeout(n.A),n.A=null)}function ss(n){return n.g?n.g.readyState:0}function T0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case hy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function A0(n){let e="";return Bo(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):T(n,e,t))}function Xh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function my(n){this.za=0,this.l=[],this.h=new dd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Xh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Xh("baseRetryDelayMs",5e3,n),this.$a=Xh("retryDelaySeedMs",1e4,n),this.Ya=Xh("forwardChannelMaxRetries",2,n),this.ra=Xh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Yp(n&&n.concurrentRequestLimit),this.Ca=new cy,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ef(n){if(Qb(n),3==n.G){var e=n.V++,t=fo(n.F);T(t,"SID",n.J),T(t,"RID",e),T(t,"TYPE","terminate"),nf(n,t),(e=new Go(n,n.h,e,void 0)).K=2,e.v=R(fo(t)),t=!1,yt.navigator&&yt.navigator.sendBeacon&&(t=yt.navigator.sendBeacon(e.v.toString(),"")),!t&&yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Tt(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pu(e)}O0(n)}function tf(n){n.g&&(yy(n),n.g.cancel(),n.g=null)}function Qb(n){tf(n),n.u&&(yt.clearTimeout(n.u),n.u=null),ag(n),n.i.cancel(),n.m&&("number"==typeof n.m&&yt.clearTimeout(n.m),n.m=null)}function ig(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&sg(n)}function sg(n){Qp(n.i)||n.m||(n.m=!0,$p(n.Ha,n),n.C=0)}function x0(n,e){var t;t=e?e.m:n.V++;const r=fo(n.F);T(r,"SID",n.J),T(r,"RID",t),T(r,"AID",n.U),nf(n,r),n.o&&n.s&&gy(r,n.o,n.s),t=new Go(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ns(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),uy(n.i,t),Vi(t,r,e)}function nf(n,e){n.j&&Hl({},function(t,r){T(e,r,t)})}function Ns(n,e,t){t=Math.min(n.l.length,t);var r=n.j?W(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const M=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{Wb(M,h,"req"+C+"_")}catch(N){r&&r(M)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function M0(n){n.g||n.u||(n.Y=1,$p(n.Ga,n),n.A=0)}function og(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Kn(W(n.Ga,n),_y(n,n.A)),n.A++,0))}function yy(n){null!=n.B&&(yt.clearTimeout(n.B),n.B=null)}function R0(n){n.g=new Go(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=fo(n.oa);T(e,"RID","rpc"),T(e,"SID",n.J),T(e,"CI",n.N?"0":"1"),T(e,"AID",n.U),nf(n,e),T(e,"TYPE","xmlhttp"),n.o&&n.s&&gy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=R(fo(e)),t.s=null,t.U=!0,qh(t,n)}function ag(n){null!=n.v&&(yt.clearTimeout(n.v),n.v=null)}function N0(n,e){var t=null;if(n.g==e){ag(n),yy(n),n.g=null;var r=2}else{if(!ay(n.i,e))return;t=e.D,ly(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;cr(r=hd(),new Ou(r,t,e,o)),sg(n)}else M0(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function S0(n,e){return!(I0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Kn(W(n.Ha,n,e),_y(n,n.C)),n.C++,0)))}(n,e)||2==r&&og(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ql(n,5);break;case 4:ql(n,10);break;case 3:ql(n,6);break;default:ql(n,2)}}function _y(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ql(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=W(n.jb,n);t||(t=new La("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||y(t,"https"),R(t)),function Kb(n,e){const t=new dd;if(yt.Image){const r=new Image;r.onload=Se(Kh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Se(Kh,t,r,"TestLoadImage: error",!1,e),r.onabort=Se(Kh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Se(Kh,t,r,"TestLoadImage: timeout",!1,e),yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else oi(2);n.G=0,n.j&&n.j.va(e),O0(n),Qb(n)}function O0(n){n.G=0,n.I=-1,n.j&&((0!=Jp(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Uo(n.l),n.l.length=0),n.j.ua())}function P0(n,e,t){let r=function q(n){return n instanceof La?fo(n):new La(n,void 0)}(t);if(""!=r.i)e&&f(r,e+"."+r.i),p(r,r.m);else{const o=yt.location;r=function ie(n,e,t,r){var o=new La(null,void 0);return n&&y(o,n),e&&f(o,e),t&&p(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Bo(n.aa,function(o,u){T(r,u,o)}),t=n.sa,(e=n.D)&&t&&T(r,e,t),T(r,"VER",n.ma),nf(n,r),r}function Tt(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Ba&&!n.qa?new Ed({ib:!0}):n.qa)).L=n.H,e}function vy(){}function rf(){if(Au&&!(10<=Number(Oh)))throw Error("Environmental error: no available transport.")}function Bi(n,e){In.call(this),this.g=new my(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!$r(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$r(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zl(this)}function sf(n){qr.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Os(){Oa.call(this),this.status=1}function zl(n){this.g=n}(Ke=nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bl.g(),this.C=function Ir(n){return n.h||(n.h=n.i())}(this.u?this.u:Bl),this.g.onreadystatechange=W(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Qh(this,u)}n=t||"";const o=new Fa(this.headers);r&&Hl(r,function(u,h){o.set(h,u)}),r=function Mn(n){e:{var e=tg;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=yt.FormData&&n instanceof yt.FormData,!(0<=bt(fy,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rg(this),0<this.B&&((this.K=function C0(n){return Au&&function Nh(){return function Sl(n){var e=Qm;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=si(String(sd)).split("."),t=si("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=rs(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||rs(0==o[2].length,0==u[2].length)||rs(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=W(this.pa,this)):this.A=jh(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Qh(this,u)}},Ke.pa=function(){void 0!==Ta&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cr(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,cr(this,"complete"),cr(this,"abort"),Jh(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jh(this,!0)),nr.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?ng(this):this.cb())},Ke.cb=function(){ng(this)},Ke.ba=function(){try{return 2<ss(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Yb(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=my.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Go(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Mh(u),Np(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ns(this,o,e),T(t=fo(this.F),"RID",n),T(t,"CVER",22),this.D&&T(t,"X-HTTP-Session-Id",this.D),nf(this,t),this.o&&u&&gy(t,this.o,u),uy(this.i,o),this.Ra&&T(t,"TYPE","init"),this.ja?(T(t,"$req",e),T(t,"SID","null"),o.$=!0,Vi(o,t,null)):Vi(o,t,e),this.G=2}}else 3==this.G&&(n?x0(this,n):0==this.l.length||Qp(this.i)||x0(this))},Ke.Ga=function(){if(this.u=null,R0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Kn(W(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,oi(10),tf(this),R0(this))},Ke.ab=function(){null!=this.v&&(this.v=null,tf(this),og(this),oi(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),oi(2)):(this.h.info("Failed to ping google.com"),oi(1))},(Ke=vy.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},rf.prototype.g=function(n,e){return new Bi(n,e)},Le(Bi,In),Bi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),$p(W(n.hb,n,e))),oi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=P0(n,null,n.W),sg(n)},Bi.prototype.close=function(){ef(this.g)},Bi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ig(this.g,e)}else this.v?((e={}).__data__=xa(n),ig(this.g,e)):ig(this.g,n)},Bi.prototype.M=function(){this.g.j=null,delete this.j,ef(this.g),delete this.g,Bi.Z.M.call(this)},Le(sf,qr),Le(Os,Oa),Le(zl,vy),zl.prototype.xa=function(){cr(this.g,"a")},zl.prototype.wa=function(n){cr(this.g,new sf(n))},zl.prototype.va=function(n){cr(this.g,new Os(n))},zl.prototype.ua=function(){cr(this.g,"b")},rf.prototype.createWebChannel=rf.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,Vl.COMPLETE="complete",$o.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",In.prototype.listen=In.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.La,nr.prototype.getLastErrorCode=nr.prototype.Da,nr.prototype.getStatus=nr.prototype.ba,nr.prototype.getResponseJson=nr.prototype.Qa,nr.prototype.getResponseText=nr.prototype.ga,nr.prototype.send=nr.prototype.ea;var Jb=Vn.createWebChannelTransport=function(){return new rf},Ey=Vn.getStatEventTarget=function(){return hd()},mo=Vn.ErrorCode=Ho,wy=Vn.EventType=Vl,k0=Vn.Event=Ra,ug=Vn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oT=Vn.FetchXmlHttpFactory=Ed,of=Vn.WebChannel=$o,aT=Vn.XhrIo=nr;const af="@firebase/firestore";class hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");let Lu="9.6.11";const Zo=new ki.Yd("@firebase/firestore");function uf(){return Zo.logLevel}function Oe(n,...e){if(Zo.logLevel<=ki.in.DEBUG){const t=e.map(by);Zo.debug(`Firestore (${Lu}): ${n}`,...t)}}function fr(n,...e){if(Zo.logLevel<=ki.in.ERROR){const t=e.map(by);Zo.error(`Firestore (${Lu}): ${n}`,...t)}}function lf(n,...e){if(Zo.logLevel<=ki.in.WARN){const t=e.map(by);Zo.warn(`Firestore (${Lu}): ${n}`,...t)}}function by(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Lu}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function Dt(n,e){n||tt()}function ze(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Et.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hr.UNAUTHENTICATED))}shutdown(){}}class cT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dT{constructor(e){this.t=e,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,le.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new lg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new hr(e)}}class hT{constructor(e,t,r){this.type="FirstParty",this.user=hr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class fT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new eI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ps{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function gT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ps.A=-1;class Va{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=gT(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function wd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Iy(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Bn(0,0))}static max(){return new _t(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function cg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ua(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class bd{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends bd{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const Dy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends bd{construct(e,t,r){return new Pr(e,t,r)}static isValidIdentifier(e){return Dy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(t)}static emptyPath(){return new Pr([])}}class Wl{constructor(e){this.fields=e,e.sort(Pr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const cf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=cf.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(n.seconds),nanos:Rn(n.nanos)}}function Rn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ks(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function Kl(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Yl(n){const e=n.mapValue.fields.__previous_value__;return Kl(e)?Yl(e):e}function df(n){const e=os(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class F0{constructor(e,t,r,o,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Wo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}function Ba(n){return null==n}function Ql(n){return 0===n&&1/n==-1/0}function Cy(n){return"number"==typeof n&&Number.isInteger(n)&&!Ql(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Xt.fromString(e))}static fromName(e){return new Ue(Xt.fromString(e).popFirst(5))}static empty(){return new Ue(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Xt(e.slice()))}}const L0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ty={nullValue:"NULL_VALUE"};function Id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kl(n)?4:V0(n)?9:10:tt()}function yo(n,e){if(n===e)return!0;const t=Id(n);if(t!==Id(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return df(n).isEqual(df(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=os(r.timestampValue),h=os(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ks(n.bytesValue).isEqual(ks(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Rn(r.geoPointValue.latitude)===Rn(o.geoPointValue.latitude)&&Rn(r.geoPointValue.longitude)===Rn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Rn(r.integerValue)===Rn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Rn(r.doubleValue),h=Rn(o.doubleValue);return u===h?Ql(u)===Ql(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return wd(n.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(cg(u)!==cg(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!yo(u[m],h[m])))return!1;return!0}(n,e);default:return tt()}var o}function Dd(n,e){return void 0!==(n.values||[]).find(t=>yo(t,e))}function Vu(n,e){if(n===e)return 0;const t=Id(n),r=Id(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Rn(o.integerValue||o.doubleValue),m=Rn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return Ay(n.timestampValue,e.timestampValue);case 4:return Ay(df(n),df(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(o,u){const h=ks(o),m=ks(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const C=St(h[w],m[w]);if(0!==C)return C}return St(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=St(Rn(o.latitude),Rn(u.latitude));return 0!==h?h:St(Rn(o.longitude),Rn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const C=Vu(h[w],m[w]);if(C)return C}return St(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const h=o.fields||{},m=Object.keys(h),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const N=St(m[M],C[M]);if(0!==N)return N;const H=Vu(h[m[M]],w[C[M]]);if(0!==H)return H}return St(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function Ay(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=os(n),r=os(e),o=St(t.seconds,r.seconds);return 0!==o?o:St(t.nanos,r.nanos)}function Cd(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=os(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ks(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=Sy(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${Sy(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function Cr(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xy(n){return!!n&&"integerValue"in n}function hf(n){return!!n&&"arrayValue"in n}function nI(n){return!!n&&"nullValue"in n}function rI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ff(n){return!!n&&"mapValue"in n}function dg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function V0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function My(n){return"nullValue"in n?Ty:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cr(Wo.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function U0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cr(Wo.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?L0:tt()}function B0(n,e){return void 0===n?e:void 0===e||Vu(n,e)>0?n:e}function j0(n,e){return void 0===n?e:void 0===e||Vu(n,e)<0?n:e}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dg(t)}setAll(e){let t=Pr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=dg(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ff(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Zl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ai(dg(this.value))}}function Ry(n){const e=[];return Zl(n.fields,(t,r)=>{const o=new Pr([t]);if(ff(r)){const u=Ry(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Wl(e)}class Cn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Cn(e,0,_t.min(),_t.min(),ai.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,_t.min(),ai.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,_t.min(),ai.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Ny(n){return n.fields.find(e=>2===e.kind)}function Jl(n){return n.fields.filter(e=>2!==e.kind)}pf.UNKNOWN_ID=-1;class gf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Td{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Td(0,_o.min())}}function H0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new _o(o,Ue.empty(),e)}function Ko(n){return new _o(n.readTime,n.key,-1)}class _o{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _o(_t.min(),Ue.empty(),-1)}static max(){return new _o(_t.max(),Ue.empty(),-1)}}function iI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}class sI{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function oI(n,e=null,t=[],r=[],o=null,u=null,h=null){return new sI(n,e,t,r,o,u,h)}function Uu(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Cd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ba(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cd(r)).join(",")),e.P=t}return e.P}function mf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!z0(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!yo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ly(n.startAt,e.startAt)&&Ly(n.endAt,e.endAt)}function hg(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ad(n,e){return n.filters.filter(t=>t instanceof pr&&t.field.isEqual(e))}function $0(n,e,t){let r,o=!0;for(const u of Ad(n,e)){let h,m=!0;switch(u.op){case"<":case"<=":h=My(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Ty}B0(r,h)===h&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];B0(r,h)===h&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function G0(n,e,t){let r,o=!0;for(const u of Ad(n,e)){let h,m=!0;switch(u.op){case">=":case">":h=U0(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=L0}j0(r,h)===h&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];j0(r,h)===h&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class pr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Oy(e,t,r):"array-contains"===t?new q0(e,r):"in"===t?new lI(e,r):"not-in"===t?new cI(e,r):"array-contains-any"===t?new ky(e,r):new pr(e,t,r)}static V(e,t,r){return"in"===t?new uI(e,r):new Py(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Vu(t,this.value)):null!==t&&Id(this.value)===Id(t)&&this.v(Vu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Oy extends pr{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.v(t)}}class uI extends pr{constructor(e,t){super(e,"in",t),this.keys=fg(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Py extends pr{constructor(e,t){super(e,"not-in",t),this.keys=fg(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fg(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class q0 extends pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hf(t)&&Dd(t.arrayValue,this.value)}}class lI extends pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dd(this.value.arrayValue,t)}}class cI extends pr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dd(this.value.arrayValue,t)}}class ky extends pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dd(this.value.arrayValue,r))}}class Xl{constructor(e,t){this.position=e,this.inclusive=t}}class Sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function z0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Fy(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?Ue.comparator(Ue.fromName(h.referenceValue),t.key):Vu(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Ly(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yo(n.position[t],e.position[t]))return!1;return!0}class Yo{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Vy(n,e,t,r,o,u,h,m){return new Yo(n,e,t,r,o,u,h,m)}function ji(n){return new Yo(n)}function ec(n){return!Ba(n.limit)&&"F"===n.limitType}function pg(n){return!Ba(n.limit)&&"L"===n.limitType}function Uy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Z0(n){for(const e of n.filters)if(e.S())return e.field;return null}function yf(n){return null!==n.collectionGroup}function tc(n){const e=ze(n);if(null===e.D){e.D=[];const t=Z0(e),r=Uy(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Sd(t)),e.D.push(new Sd(Pr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Sd(Pr.keyField(),u))}}}return e.D}function Hi(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=oI(e.path,e.collectionGroup,tc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of tc(e))t.push(new Sd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Xl(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Xl(e.startAt.position,!e.startAt.inclusive):null;e.C=oI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function xd(n,e,t){return new Yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _f(n,e){return mf(Hi(n),Hi(e))&&n.limitType===e.limitType}function gg(n){return`${Uu(Hi(n))}|lt:${n.limitType}`}function mg(n){return`Query(target=${function aI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Cd(r.value)}`;var r}).join(", ")}]`),Ba(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Cd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Cd(t)).join(",")),`Target(${e})`}(Hi(n))}; limitType=${n.limitType})`}function yg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ue.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=Fy(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,tc(t),r)||t.endAt&&!function(o,u,h){const m=Fy(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,tc(t),r)));var t,r}function By(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function W0(n){return(e,t)=>{let r=!1;for(const o of tc(n)){const u=jy(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function jy(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),w=h.data.field(o);return null!==m&&null!==w?Vu(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function K0(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function Y0(n){return{integerValue:""+n}}function Hy(n,e){return Cy(e)?Y0(e):K0(n,e)}class ja{constructor(){this._=void 0}}function Q0(n,e,t){return n instanceof vo?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof nc?X0(n,e):n instanceof rc?eE(n,e):function(r,o){const u=J0(r,o),h=_g(u)+_g(r.k);return xy(u)&&xy(r.k)?Y0(h):K0(r.M,h)}(n,e)}function dI(n,e,t){return n instanceof nc?X0(n,e):n instanceof rc?eE(n,e):t}function J0(n,e){return n instanceof bi?xy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vo extends ja{}class nc extends ja{constructor(e){super(),this.elements=e}}function X0(n,e){const t=$y(e);for(const r of n.elements)t.some(o=>yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class rc extends ja{constructor(e){super(),this.elements=e}}function eE(n,e){let t=$y(e);for(const r of n.elements)t=t.filter(o=>!yo(o,r));return{arrayValue:{values:t}}}class bi extends ja{constructor(e,t){super(),this.M=e,this.k=t}}function _g(n){return Rn(n.integerValue||n.doubleValue)}function $y(n){return hf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Md{constructor(e,t){this.field=e,this.transform=t}}class nE{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Eg{}function hI(n,e,t){n instanceof vf?function(r,o,u){const h=r.value.clone(),m=bg(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Rd?function(r,o,u){if(!vg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=bg(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(fI(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wg(n,e,t){var o;n instanceof vf?function(r,o,u){if(!vg(r.precondition,o))return;const h=r.value.clone(),m=iE(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(rE(o),h).setHasLocalMutations()}(n,e,t):n instanceof Rd?function(r,o,u){if(!vg(r.precondition,o))return;const h=iE(r.fieldTransforms,u,o),m=o.data;m.setAll(fI(r)),m.setAll(h),o.convertToFoundDocument(rE(o),m).setHasLocalMutations()}(n,e,t):vg(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function mT(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=J0(r.transform,o||null);null!=u&&(null==t&&(t=ai.empty()),t.set(r.field,u))}return t||null}function Gy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wd(t,r,(o,u)=>function tE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof nc&&r instanceof nc||t instanceof rc&&r instanceof rc?wd(t.elements,r.elements,yo):t instanceof bi&&r instanceof bi?yo(t.k,r.k):t instanceof vo&&r instanceof vo);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function rE(n){return n.isFoundDocument()?n.version:_t.min()}class vf extends Eg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Rd extends Eg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function fI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bg(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,dI(h,m,t[o]))}return r}function iE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,Q0(u,h,e))}return r}class Nd extends Eg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ig extends Eg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class yT{constructor(e){this.count=e}}var hn,tn;function pI(n){switch(n){default:return tt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function qy(n){if(void 0===n)return fr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case hn.OK:return ae.OK;case hn.CANCELLED:return ae.CANCELLED;case hn.UNKNOWN:return ae.UNKNOWN;case hn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case hn.INTERNAL:return ae.INTERNAL;case hn.UNAVAILABLE:return ae.UNAVAILABLE;case hn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case hn.NOT_FOUND:return ae.NOT_FOUND;case hn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case hn.ABORTED:return ae.ABORTED;case hn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case hn.DATA_LOSS:return ae.DATA_LOSS;default:return tt()}}(tn=hn||(hn={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Ua(this.inner)}size(){return this.innerSize}}class Yn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dg(this.root,e,this.comparator,!0)}}class Dg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ui.RED,this.left=null!=o?o:ui.EMPTY,this.right=null!=u?u:ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ui(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ui.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cg(this.data.getIterator())}getIteratorFrom(e){return new Cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class Cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Od(n){return n.hasNext()?n.getNext():void 0}const zy=new Yn(Ue.comparator);function Fs(){return zy}const gI=new Yn(Ue.comparator);function Zy(){return gI}function Ef(){return new Ha(n=>n.toString(),(n,e)=>n.isEqual(e))}const mI=new Yn(Ue.comparator),yI=new _n(Ue.comparator);function nn(...n){let e=yI;for(const t of n)e=e.add(t);return e}const Pd=new _n(St);function Tg(){return Pd}class $a{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,wf.createSynthesizedTargetChangeForCurrentChange(e,t)),new $a(_t.min(),r,Tg(),Fs(),nn())}}class wf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new wf(Dr.EMPTY_BYTE_STRING,t,nn(),nn(),nn())}}class Ag{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Sg{constructor(e,t){this.targetId=e,this.$=t}}class Eo{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class kd{constructor(){this.B=0,this.L=bf(),this.U=Dr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=nn(),t=nn(),r=nn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new wf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=bf()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class li{constructor(e){this.nt=e,this.st=new Map,this.it=Fs(),this.rt=Bu(),this.ot=new _n(St)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(hg(u))if(0===r){const h=new Ue(u.path);this.ct(t,h,Cn.newNoDocument(h,_t.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&hg(m.target)){const w=new Ue(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.ct(h,w,Cn.newNoDocument(w,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=nn();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new $a(e,t,this.ot,this.it,r);return this.it=Fs(),this.rt=Bu(),this.ot=new _n(St),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new kd,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new _n(St),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new kd),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Bu(){return new Yn(Ue.comparator)}function bf(){return new Yn(Ue.comparator)}const Ls={asc:"ASCENDING",desc:"DESCENDING"},Wy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Fd{constructor(e,t){this.databaseId=e,this.N=t}}function Qo(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ic(n,e){return n.N?e.toBase64():e.toUint8Array()}function Ld(n,e){return Qo(n,e.toTimestamp())}function jn(n){return Dt(!!n),_t.fromTimestamp(function(e){const t=os(e);return new Bn(t.seconds,t.nanos)}(n))}function ju(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sc(n){const e=Xt.fromString(n);return Dt(Mg(e)),e}function Jo(n,e){return ju(n.databaseId,e.path)}function Ii(n,e){const t=sc(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(Yy(t))}function xg(n,e){return ju(n.databaseId,e)}function Ky(n){const e=sc(n);return 4===e.length?Xt.emptyPath():Yy(e)}function Vd(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yy(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Qy(n,e,t){return{name:Jo(n,e),fields:t.value.mapValue.fields}}function Jy(n,e,t){const r=Ii(n,e.name),o=jn(e.updateTime),u=new ai({mapValue:{fields:e.fields}}),h=Cn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Ud(n,e){let t;if(e instanceof vf)t={update:Qy(n,e.key,e.value)};else if(e instanceof Nd)t={delete:Jo(n,e.key)};else if(e instanceof Rd)t={update:Qy(n,e.key,e.data),updateMask:wI(e.fieldMask)};else{if(!(e instanceof Ig))return tt();t={verify:Jo(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof vo)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof nc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof rc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bi)return{fieldPath:u.field.canonicalString(),increment:h.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ld(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Xy(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?gr.updateTime(jn(o.updateTime)):void 0!==o.exists?gr.exists(o.exists):gr.none():gr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(Dt("REQUEST_TIME"===h.setToServerValue),m=new vo):"appendMissingElements"in h?m=new nc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new rc(h.removeAllFromArray.values||[]):"increment"in h?m=new bi(u,h.increment):tt();const w=Pr.fromServerFormat(h.fieldPath);return new Md(w,m)}(n,o)):[];var o;if(e.update){const o=Ii(n,e.update.name),u=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Wl((e.updateMask.fieldPaths||[]).map(C=>Pr.fromServerFormat(C)));return new Rd(o,u,h,t,r)}return new vf(o,u,t,r)}if(e.delete){const o=Ii(n,e.delete);return new Nd(o,t)}if(e.verify){const o=Ii(n,e.verify);return new Ig(o,t)}return tt()}function uE(n,e){return{documents:[xg(n,e.path)]}}function lE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(M=>function(N){if("=="===N.op){if(rI(N.value))return{unaryFilter:{field:oc(N.field),op:"IS_NAN"}};if(nI(N.value))return{unaryFilter:{field:oc(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(rI(N.value))return{unaryFilter:{field:oc(N.field),op:"IS_NOT_NAN"}};if(nI(N.value))return{unaryFilter:{field:oc(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oc(N.field),op:vI(N.op),value:N.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:oc((M=C).field),direction:dE(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(C=e.limit,n.N||Ba(C)?C:{value:C});var C,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function e_(n){let e=Ky(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=cE(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(M=>{return new Sd(Bd((N=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(M){let N;return N="object"==typeof M?M.value:M,Ba(N)?null:N}(t.limit));let w=null;var M;t.startAt&&(w=new Xl((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Xl(M.values||[],!M.before)}(t.endAt)),Vy(e,o,h,u,m,"F",w,C)}function cE(n){return n?void 0!==n.unaryFilter?[_T(n)]:void 0!==n.fieldFilter?[EI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cE(e)).reduce((e,t)=>e.concat(t)):tt():[]}function dE(n){return Ls[n]}function vI(n){return Wy[n]}function oc(n){return{fieldPath:n.canonicalString()}}function Bd(n){return Pr.fromServerFormat(n.fieldPath)}function EI(n){return pr.create(Bd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function _T(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Bd(n.unaryFilter.field);return pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Bd(n.unaryFilter.field);return pr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bd(n.unaryFilter.field);return pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bd(n.unaryFilter.field);return pr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function wI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mg(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=II(e)),e=bI(n.get(t),e);return II(e)}function bI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function II(n){return n+"\x01\x01"}function Ga(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&tt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:tt()}u=h+2}return new Xt(r)}const DI=["userId","batchId"];function Rg(n,e){return[n,zr(e)]}function t_(n,e,t){return[n,zr(e),t]}const vT={},CI=["prefixPath","collectionGroup","readTime","documentId"],jd=["prefixPath","collectionGroup","documentId"],TI=["collectionGroup","readTime","prefixPath","documentId"],hE=["canonicalId","targetId"],AI=["targetId","path"],fE=["path","targetId"],Ng=["collectionId","parent"],SI=["indexId","uid"],pE=["uid","sequenceNumber"],xI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MI=["indexId","uid","orderedDocumentKey"],RI=["userId","collectionPath","documentId"],NI=["userId","collectionPath","largestBatchId"],OI=["userId","collectionGroup","largestBatchId"],n_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PI=[...n_,"documentOverlays"],r_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gE=[...r_,"indexConfiguration","indexState","indexEntries"],Og="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},w=>r(w))}),h=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Pg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Or,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Hd(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=$d(r.target.error);this.At.reject(new Hd(e,o))}}static open(e,t,r,o){try{return new Pg(t,e.transaction(o,r))}catch(u){throw new Hd(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new i_(t)}}class Xo{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Xo.Vt((0,Et.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),ac(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Et.hl)())return!1;if(Xo.St())return!0;const e=(0,Et.z$)(),t=Xo.Vt(e),r=0<t&&t<10,o=Xo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,le.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new Hd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Ae(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Hd(e,m))},u.onupgradeneeded=h=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.bt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,le.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Pg.open(u.db,e,h?"readonly":"readwrite",r),C=o(w).next(M=>(w.Pt(),M)).catch(M=>(w.abort(M),de.reject(M))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class If{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ac(this.Ft.delete())}}class Hd extends Ae{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qa(n){return"IndexedDbTransactionError"===n.name}class i_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ac(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),ac(this.store.add(e))}get(e){return ac(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),ac(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),ac(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const h=$d(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new If(m),C=t(m.primaryKey,m.value,w);if(C instanceof de){const M=C.catch(N=>(w.done(),de.reject(N)));r.push(M)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ac(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=$d(r.target.error);t(o)}})}let Df=!1;function $d(n){const e=Xo.Vt((0,Et.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Df||(Df=!0,setTimeout(()=>{throw r},0)),r}}return n}class kg extends kI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=ze(n);return Xo.xt(t.Ht,e)}class s_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&hI(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&wg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&wg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&wd(this.mutations,e.mutations,(t,r)=>Gy(t,r))&&wd(this.baseMutations,e.baseMutations,(t,r)=>Gy(t,r))}}class Cf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=mI;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Cf(e,t,r,o)}}class Tf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class za{constructor(e,t,r,o,u=_t.min(),h=_t.min(),m=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class o_{constructor(e){this.Jt=e}}function u_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jo(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Qo(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Za(e.version)}}var o,u;return r}function Af(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hu(n){const e=new Bn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Gd(n,e){const t=(e.baseMutations||[]).map(u=>Xy(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Xy(n.Jt,u)),o=Bn.fromMillis(e.localWriteTimeMs);return new s_(e.batchId,o,t,r)}function qd(n){const e=Hu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hu(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=Hi(ji(Ky(o.documents[0])))):r=Hi(e_(n.query)),new za(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function l_(n,e){const t=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let o;o=hg(e.target)?uE(n.Jt,e.target):lE(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Sf(n){const e=e_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xd(e,e.limit,"L"):e}function Fg(n,e){return new Tf(e.largestBatchId,Xy(n.Jt,e.overlayMutation))}function mE(n,e){const t=e.path.lastSegment();return[n,zr(e.path.popLast()),t]}class FI{getBundleMetadata(e,t){return yE(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Hu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return yE(e).put({bundleId:(r=t).id,createTime:Za(jn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return c_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Sf(o.bundledQuery),readTime:Hu(o.readTime)};var o})}saveNamedQuery(e,t){return c_(e).put({name:(r=t).name,readTime:Za(jn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function yE(n){return Zr(n,"bundles")}function c_(n){return Zr(n,"namedQueries")}class xf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new xf(e,t.uid||"")}getOverlay(e,t){return zd(e).get(mE(this.userId,t)).next(r=>r?Fg(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new Tf(t,h);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(zr(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(zd(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ef(),u=zr(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return zd(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const C=Fg(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ef();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zd(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,M)=>{const N=Fg(this.M,C);u.size()<o||N.largestBatchId===h?(u.set(N.getKey(),N),h=N.largestBatchId):M.done()}).next(()=>u)}Xt(e,t){return zd(e).put(function(r,o,u){const[h,m,w]=mE(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ud(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function zd(n){return Zr(n,"documentOverlays")}class $u{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Rn(e.integerValue));else if("doubleValue"in e){const r=Rn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ql(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ks(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?V0(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ue.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function _E(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function d_(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=_E(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}$u.fe=new $u;class vE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=d_(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=d_(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class EE{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class wE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Zd{constructor(){this.De=new vE,this.Ce=new EE(this.De),this.xe=new wE(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class uc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new uc(this.indexId,this.documentKey,this.arrayValue,r)}}function lc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bE(n.arrayValue,e.arrayValue),0!==t?t:(t=bE(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function bE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class IE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ny(e);if(void 0!==t&&!this.Be(t))return!1;const r=Jl(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class LI{constructor(){this.qe=new rr}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getFieldIndex(e,t){return de.resolve(null)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class rr{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _n(Xt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _n(Xt.comparator)).toArray()}}const cc=new Uint8Array(0);class VI{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new rr,this.Ge=new Ha(r=>Uu(r),(r,o)=>mf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:zr(o)};return DE(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Iy(t),""],!1,!0);return DE(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Ga(h.parent))}return r})}addFieldIndex(e,t){const r=Lg(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Lg(e),o=Mf(e),u=Wd(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Wd(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=nn();const m=[];return de.forEach(u,(w,C)=>{var M;Oe("IndexedDbIndexManager",`Using index ${M=w,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${Uu(t)}`);const N=function(Zt,Rt){const Qt=Ny(Rt);if(void 0===Qt)return null;for(const pn of Ad(Zt,Qt.fieldPath))switch(pn.op){case"array-contains-any":return pn.value.arrayValue.values||[];case"array-contains":return[pn.value]}return null}(C,w),H=function(Zt,Rt){const Qt=new Map;for(const pn of Jl(Rt))for(const qi of Ad(Zt,pn.fieldPath))switch(qi.op){case"==":case"in":Qt.set(pn.fieldPath.canonicalString(),qi.value);break;case"not-in":case"!=":return Qt.set(pn.fieldPath.canonicalString(),qi.value),Array.from(Qt.values())}return null}(C,w),G=function(Zt,Rt){const Qt=[];let pn=!0;for(const qi of Jl(Rt)){const _p=0===qi.kind?$0(Zt,qi.fieldPath,Zt.startAt):G0(Zt,qi.fieldPath,Zt.startAt);if(!_p.value)return null;Qt.push(_p.value),pn&&(pn=_p.inclusive)}return new Xl(Qt,pn)}(C,w),ee=function(Zt,Rt){const Qt=[];let pn=!0;for(const qi of Jl(Rt)){const _p=0===qi.kind?G0(Zt,qi.fieldPath,Zt.endAt):$0(Zt,qi.fieldPath,Zt.endAt);if(!_p.value)return null;Qt.push(_p.value),pn&&(pn=_p.inclusive)}return new Xl(Qt,pn)}(C,w),Re=this.je(w,C,G),nt=this.je(w,C,ee),vt=this.We(w,C,H),Lt=this.ze(w.indexId,N,Re,!!G&&G.inclusive,nt,!!ee&&ee.inclusive,vt);return de.forEach(Lt,Zt=>r.Gt(Zt,t.limit).next(Rt=>{Rt.forEach(Qt=>{const pn=Ue.fromSegments(Qt.documentKey);h.has(pn)||(h=h.add(pn),m.push(pn))})}))}).next(()=>m)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,h,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=w/(null!=t?t.length:1),M=[];for(let N=0;N<w;++N){const H=t?this.He(t[N/C]):cc,G=r?this.Je(e,H,r[N%C],o):this.Ye(e),ee=u?this.Xe(e,H,u[N%C],h):this.Ye(e+1);M.push(...this.createRange(G,ee,m.map(Re=>this.Je(e,H,Re,!0))))}return M}Je(e,t,r,o){const u=new uc(e,Ue.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new uc(e,Ue.empty(),t,r);return o?u.ke():u}Ye(e){return new uc(e,Ue.empty(),cc,cc)}getFieldIndex(e,t){const r=new IE(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const h=u.filter(m=>r.$e(m));return h.sort((m,w)=>w.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new Zd;for(const o of Jl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);$u.fe.Zt(u,h)}return r.Se()}He(e){const t=new Zd;return $u.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Zd;return $u.fe.Zt(Cr(this.databaseId,t),r.Ne(function(o){const u=Jl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Zd);let u=0;for(const h of Jl(e)){const m=r[u++];for(const w of o)if(this.en(t,h.fieldPath)&&hf(m))o=this.nn(o,h,m);else{const C=w.Ne(h.kind);$u.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const w=new Zd;w.seed(m.Se()),$u.fe.Zt(h,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof pr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Lg(e),o=Mf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{h.push(function(C,M){const N=M?new Td(M.sequenceNumber,new _o(Hu(M.readTime),new Ue(Ga(M.documentKey)),M.largestBatchId)):Td.empty(),H=C.fields.map(([G,ee])=>new gf(Pr.fromServerFormat(G),ee));return new pf(C.indexId,C.collectionGroup,H,N)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:St(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Lg(e),u=Mf(e);return this.rn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:Za((H=r).readTime),documentKey:zr(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?de.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,w=>this.on(e,o,w).next(C=>{const M=this.un(u,w);return C.isEqual(M)?de.resolve():this.an(e,u,w,C,M)}))))})}cn(e,t,r,o){return Wd(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Wd(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Wd(e);let u=new _n(lc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,m)=>{u=u.add(new uc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new _n(lc);const o=this.Ze(t,e);if(null==o)return r;const u=Ny(t);if(null!=u){const h=e.data.field(u.fieldPath);if(hf(h))for(const m of h.arrayValue.values||[])r=r.add(new uc(t.indexId,e.key,this.He(m),o))}else r=r.add(new uc(t.indexId,e.key,cc,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,w,C,M,N){const H=m.getIterator(),G=w.getIterator();let ee=Od(H),Re=Od(G);for(;ee||Re;){let nt=!1,vt=!1;if(ee&&Re){const Lt=C(ee,Re);Lt<0?vt=!0:Lt>0&&(nt=!0)}else null!=ee?vt=!0:nt=!0;nt?(M(Re),Re=Od(G)):vt?(N(ee),ee=Od(H)):(ee=Od(H),Re=Od(G))}}(o,u,lc,m=>{h.push(this.cn(e,t,r,m))},m=>{h.push(this.hn(e,t,r,m))}),de.waitFor(h)}rn(e){let t=1;return Mf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>lc(h,m)).filter((h,m,w)=>!m||0!==lc(h,w[m-1]));const o=[];o.push(e);for(const h of r){const m=lc(h,e),w=lc(h,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(h),o.push(h.ke());else if(w>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,cc,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,cc,[]]));return u}}function DE(n){return Zr(n,"collectionParents")}function Wd(n){return Zr(n,"indexEntries")}function Lg(n){return Zr(n,"indexConfiguration")}function Mf(n){return Zr(n,"indexState")}const h_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Tr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Tr(e,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CE(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:h},(M,N,H)=>(m++,H.delete()));u.push(w.next(()=>{Dt(1===m)}));const C=[];for(const M of t.mutations){const N=t_(e,M.key.path,t.batchId);u.push(o.delete(N)),C.push(M.key)}return de.waitFor(u).next(()=>C)}function Vg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Tr.DEFAULT_COLLECTION_PERCENTILE=10,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tr.DEFAULT=new Tr(41943040,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tr.DISABLED=new Tr(-1,0,0);class Ug{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Ug(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Rf(e),h=Wa(e);return h.add({}).next(m=>{Dt("number"==typeof m);const w=new s_(m,t,r,o),C=function(H,G,ee){const Re=ee.baseMutations.map(vt=>Ud(H.Jt,vt)),nt=ee.mutations.map(vt=>Ud(H.Jt,vt));return{userId:G,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Re,mutations:nt}}(this.M,this.userId,w),M=[];let N=new _n((H,G)=>St(H.canonicalString(),G.canonicalString()));for(const H of o){const G=t_(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),M.push(h.put(C)),M.push(u.put(G,vT))}return N.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),de.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Wa(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Gd(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Wa(e).Wt({index:"userMutationsIndex",range:o},(h,m,w)=>{m.userId===this.userId&&(Dt(m.batchId>=r),u=Gd(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wa(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Gd(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Rg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Rf(e).Wt({range:o},(h,m,w)=>{const[C,M,N]=h,H=Ga(M);if(C===this.userId&&t.path.isEqual(H))return Wa(e).get(N).next(G=>{if(!G)throw tt();Dt(G.userId===this.userId),u.push(Gd(this.M,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(St);const o=[];return t.forEach(u=>{const h=Rg(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=Rf(e).Wt({range:m},(C,M,N)=>{const[H,G,ee]=C,Re=Ga(G);H===this.userId&&u.path.isEqual(Re)?r=r.add(ee):N.done()});o.push(w)}),de.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Rg(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new _n(St);return Rf(e).Wt({range:h},(w,C,M)=>{const[N,H,G]=w,ee=Ga(H);N===this.userId&&r.isPrefixOf(ee)?ee.length===o&&(m=m.add(G)):M.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Wa(e).get(u).next(h=>{if(null===h)throw tt();Dt(h.userId===this.userId),r.push(Gd(this.M,h))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return CE(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Rf(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=Ga(u[1]);o.push(w)}else m.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return TE(e,this.userId,t)}wn(e){return f_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function TE(n,e,t){const r=Rg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Rf(n).Wt({range:u,jt:!0},(m,w,C)=>{const[M,N,H]=m;M===e&&N===o&&(h=!0),C.done()}).next(()=>h)}function Wa(n){return Zr(n,"mutations")}function Rf(n){return Zr(n,"documentMutations")}function f_(n){return Zr(n,"mutationQueues")}class Ka{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Ka(0)}static yn(){return new Ka(-1)}}class ea{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Ka(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>_t.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kd(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Kd(e).Wt((h,m)=>{const w=qd(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Kd(e).Wt((r,o)=>{const u=qd(o);t(u)})}pn(e){return AE(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}In(e,t){return AE(e).put("targetGlobalKey",t)}Tn(e,t){return Kd(e).put(l_(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Uu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Kd(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,w)=>{const C=qd(m);mf(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Wr(e);return t.forEach(h=>{const m=zr(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Wr(e);return de.forEach(t,u=>{const h=zr(u.path);return de.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Wr(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Wr(e);let u=nn();return o.Wt({range:r,jt:!0},(h,m,w)=>{const C=Ga(h[1]),M=new Ue(C);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=zr(t.path),o=IDBKeyRange.bound([r],[Iy(r)],!1,!0);let u=0;return Wr(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],w,C)=>{0!==h&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Kd(e).get(t).next(r=>r?qd(r):null)}}function Kd(n){return Zr(n,"targets")}function AE(n){return Zr(n,"targetGlobal")}function Wr(n){return Zr(n,"targetDocuments")}function Kr(n){return as.apply(this,arguments)}function as(){return as=(0,le.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Og)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),as.apply(this,arguments)}function p_([n,e],[t,r]){const o=St(n,t);return 0===o?St(e,r):o}class SE{constructor(e){this.An=e,this.buffer=new _n(p_),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();p_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,le.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){qa(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Kr(o)}yield t.Sn(e)}))}}class BI{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Ps.A);const r=new SE(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(h_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h_):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,h,m,w,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),uf()<=ki.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-M}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class jI{constructor(e,t){this.db=e,this.garbageCollector=new BI(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Bg(e,r)}removeReference(e,t,r){return Bg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Bg(e,t)}On(e,t){return function(r,o){let u=!1;return f_(r).zt(h=>TE(r,h,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(h,m)=>{if(m<=t){const w=this.On(e,h).next(C=>{if(!C)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,_t.min()),Wr(e).delete([0,zr(h.path)])))});o.push(w)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Bg(e,t)}Mn(e,t){const r=Wr(e);let o,u=Ps.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:C})=>{0===h?(u!==Ps.A&&t(new Ue(Ga(o)),u),u=C,o=w):u=Ps.A}).next(()=>{u!==Ps.A&&t(new Ue(Ga(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bg(n,e){return Wr(n).put((r=n.currentSequenceNumber,{targetId:0,path:zr(e.path),sequenceNumber:r}));var r}class jg{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nf{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return dc(e).put(r)}removeEntry(e,t,r){return dc(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Af(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return dc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yd(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return dc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yd(t))},(o,u)=>{r={document:this.$n(t,u),size:Vg(u)}}).next(()=>r)}getEntries(e,t){let r=Fs();return this.Ln(e,t,(o,u)=>{const h=this.$n(o,u);r=r.insert(o,h)}).next(()=>r)}Un(e,t){let r=Fs(),o=new Yn(Ue.comparator);return this.Ln(e,t,(u,h)=>{const m=this.$n(u,h);r=r.insert(u,m),o=o.insert(u,Vg(h))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let o=new _n(Of);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Yd(o.first()),Yd(o.last())),h=o.getIterator();let m=h.getNext();return dc(e).Wt({index:"documentKeyIndex",range:u},(w,C,M)=>{const N=Ue.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Of(m,N)<0;)r(m,null),m=h.getNext();m&&m.isEqual(N)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?M.Ut(Yd(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dc(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=Fs();for(const w of h){const C=this.$n(Ue.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Fs();const h=m_(t,r),m=m_(t,_o.max());return dc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,C,M)=>{const N=this.$n(Ue.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new HI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return g_(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Fn(e,t){return g_(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function a_(n,e){let t;if(e.document)t=Jy(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ue.fromSegments(e.noDocument.path),o=Hu(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ue.fromSegments(e.unknownDocument.path),o=Hu(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Bn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Cn.newInvalidDocument(e)}}class HI extends jg{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ha(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new _n((u,h)=>St(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const w=u_(this.Kn.M,h);o=o.add(u.path.popLast()),r+=Vg(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=u_(this.Kn.M,h.convertToNoDocument(_t.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function g_(n){return Zr(n,"remoteDocumentGlobal")}function dc(n){return Zr(n,"remoteDocumentsV14")}function Yd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function m_(n,e){const t=e.documentKey.path.toArray();return[n,Af(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Of(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=St(t[u],r[u]),o)return o;return o=St(t.length,r.length),o||(o=St(t[t.length-2],r[r.length-2]),o||St(t[t.length-1],r[r.length-1]))}class $I{constructor(e){this.M=e}kt(e,t,r,o){const u=new Pg("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DI,{unique:!0}),m.createObjectStore("documentMutations"),y_(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),y_(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DI,{unique:!0});const M=w.store("mutations"),N=C.map(H=>M.put(H));return de.waitFor(N)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Qn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(h=h.next(()=>this.Wn(u))),r<8&&o>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.Hn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:RI});w.createIndex("collectionPathOverlayIndex",NI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",OI,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:CI});w.createIndex("documentKeyIndex",jd),w.createIndex("collectionGroupIndex",TI)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:SI}).createIndex("sequenceNumberIndex",pE,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:xI}).createIndex("documentKeyIndex",MI,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Vg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>de.forEach(m,w=>{Dt(w.userId===u.userId);const C=Gd(this.M,w);return CE(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const w=new Xt(h),C=[0,zr(w)];u.push(t.get(C).next(M=>M?de.resolve():t.put({targetId:0,path:zr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Ng});const r=t.store("collectionParents"),o=new rr,u=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:zr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const w=new Xt(h);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,w],C)=>{const M=Ga(m);return u(M.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=qd(o),h=l_(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),w=(C=h,C.document?new Ue(Xt.fromString(C.document.name).popFirst(5)):C.noDocument?Ue.fromSegments(C.noDocument.path):C.unknownDocument?Ue.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(M))}).next(()=>de.waitFor(o))}}function y_(n){n.createObjectStore("targetDocuments",{keyPath:AI}).createIndex("documentTargetsIndex",fE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hE,{unique:!0}),n.createObjectStore("targetGlobal")}const Hg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pf{constructor(e,t,r,o,u,h,m,w,C,M,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=m,this.Xn=C,this.Zn=M,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=H=>Promise.resolve(),!Pf.vt())throw new Ae(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,o),this.hs=t+"main",this.M=new o_(w),this.ls=new Xo(this.hs,this.ts,new $I(this.M)),this.fs=new ea(this.referenceDelegate,this.M),this.ds=new Nf(this.M),this._s=new FI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===M&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,Hg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ps(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,le.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(qa(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Gu(e).get("owner").next(t=>de.resolve(this.bs(t)))}Vs(e){return kf(e).delete(this.clientId)}vs(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Zr(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ds(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return de.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):Gu(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,Hg);return!1}}return!(!this.networkEnabled||!this.inForeground)||kf(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kg(t,Ps.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>kf(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Ug.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new VI(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return xf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?gE:13===h?r_:12===h?PI:11===h?n_:void tt();var h;let m;return this.ls.runTransaction(e,o,u,w=>(m=new kg(w,this.es?this.es.next():Ps.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ae(ae.FAILED_PRECONDITION,Og);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return Gu(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ae.FAILED_PRECONDITION,Hg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put("owner",t)}static vt(){return Xo.vt()}Rs(e){const t=Gu(e);return t.get("owner").next(r=>this.bs(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Et.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(n){return Zr(n,"owner")}function kf(n){return Zr(n,"clientMetadata")}function $g(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xE{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ue.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):yf(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ue(t)).next(r=>{let o=Zy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Zy();return this.indexManager.getCollectionParents(e,o).next(h=>de.forEach(h,m=>{const w=(C=t,M=m.child(o),new Yo(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.zs(e,w,r).next(C=>{C.forEach((M,N)=>{u=u.insert(M,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Cn.newInvalidDocument(w),o=o.insert(w,C)),wg(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,h)=>{yg(t,h)||(o=o.remove(u))}),o))}}class Gg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=nn(),o=nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gg(e,t.fromCache,r,o)}}class __{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(_t.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const h=this.ei(t,u);return(ec(t)||pg(t))&&this.ni(t.limitType,h,o,r)?this.ti(e,t):(uf()<=ki.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mg(t)),this.Zs.Qs(e,t,H0(r,-1)).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ei(e,t){let r=new _n(W0(e));return t.forEach((o,u)=>{yg(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return uf()<=ki.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",mg(t)),this.Zs.Qs(e,t,_o.min())}}class ME{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new Yn(St),this.ri=new Ha(u=>Uu(u),mf),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new xE(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function v_(n,e,t,r){return new ME(n,e,t,r)}function E_(n,e){return w_.apply(this,arguments)}function w_(){return w_=(0,le.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=nn();for(const C of o){h.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of u){m.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return t.ci.Ks(r,w).next(C=>({hi:C,removedBatchIds:h,addedBatchIds:m}))})})}),w_.apply(this,arguments)}function GI(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(h,m,w,C){const M=w.batch,N=M.keys();let H=de.resolve();return N.forEach(G=>{H=H.next(()=>C.getEntry(m,G)).next(ee=>{const Re=w.docVersions.get(G);Dt(null!==Re),ee.version.compareTo(Re)<0&&(M.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),C.addEntry(ee)))})}),H.next(()=>h.Bs.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function RE(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function qI(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,M)=>{const N=o.get(M);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,M).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,M)));let H=N.withSequenceNumber(u.currentSequenceNumber);var G,ee,Re;e.targetMismatches.has(M)?H=H.withResumeToken(Dr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(M,H),ee=H,Re=C,(0===(G=N).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,H))});let w=Fs();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(NE(u,h,e.documentUpdates).next(C=>{w=C})),!r.isEqual(_t.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(M=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return de.waitFor(m).next(()=>h.apply(u)).next(()=>t.ci.Gs(u,w)).next(()=>w)}).then(u=>(t.ii=o,u))}function NE(n,e,t){let r=nn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Fs();return t.forEach((h,m)=>{const w=o.get(h);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),u})}function zI(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Qd(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.fs.allocateTargetId(r).next(h=>(o=new za(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Jd(n,e,t){return b_.apply(this,arguments)}function b_(){return b_=(0,le.Z)(function*(n,e,t){const r=ze(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!qa(h))throw h;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),b_.apply(this,arguments)}function qg(n,e,t){const r=ze(n);let o=_t.min(),u=nn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,C){const M=ze(m),N=M.ri.get(C);return void 0!==N?de.resolve(M.ii.get(N)):M.fs.getTargetData(w,C)}(r,h,Hi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.si.Qs(h,e,t?o:_t.min(),t?u:nn())).next(m=>(kE(r,By(e),m),{documents:m,li:u})))}function OE(n,e){const t=ze(n),r=ze(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function PE(n,e){const t=ze(n),r=t.oi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,H0(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(kE(t,e,o),o))}function kE(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function I_(){return I_=(0,le.Z)(function*(n,e,t,r){const o=ze(n);let u=nn(),h=Fs();for(const C of t){const M=e.fi(C.metadata.name);C.document&&(u=u.add(M));const N=e.di(C);N.setReadTime(e._i(C.metadata.readTime)),h=h.insert(M,N)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield Qd(o,(C=r,Hi(ji(Xt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>NE(C,m,h).next(M=>(m.apply(C),M)).next(M=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.ci.Gs(C,M)).next(()=>M)))}),I_.apply(this,arguments)}function WI(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,le.Z)(function*(n,e,t=nn()){const r=yield Qd(n,Hi(Sf(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=jn(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Dr.EMPTY_BYTE_STRING,h);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),D_.apply(this,arguments)}class KI{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return de.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:jn(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:Sf(r.bundledQuery),readTime:jn(r.readTime)}),de.resolve();var r}}class FE{constructor(){this.overlays=new Yn(Ue.comparator),this.gi=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=Ef(),u=t.length+1,h=new Ue(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Yn((C,M)=>C-M);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=u.get(C.largestBatchId);null===M&&(M=Ef(),u=u.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=Ef(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Tf(t,r));let u=this.gi.get(t);void 0===u&&(u=nn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class zg{constructor(){this.yi=new _n(Ar.pi),this.Ii=new _n(Ar.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Ar(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Ar(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Ue(new Xt([])),r=new Ar(t,e),o=new Ar(t,e+1),u=[];return this.Ii.forEachInRange([r,o],h=>{this.Ai(h),u.push(h.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ue(new Xt([])),r=new Ar(t,e),o=new Ar(t,e+1);let u=nn();return this.Ii.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Ar(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ar{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ue.comparator(e.key,t.key)||St(e.vi,t.vi)}static Ti(e,t){return St(e.vi,t.vi)||Ue.comparator(e.key,t.key)}}class LE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new _n(Ar.pi)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const h=new s_(u,t,r,o);this.Bs.push(h);for(const m of o)this.Di=this.Di.add(new Ar(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,t){return de.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ar(t,0),o=new Ar(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],h=>{const m=this.Ci(h.vi);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(St);return t.forEach(o=>{const u=new Ar(o,0),h=new Ar(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,h],m=>{r=r.add(m.vi)})}),de.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ue.isDocumentKey(u)||(u=u.child(""));const h=new Ar(new Ue(u),0);let m=new _n(St);return this.Di.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.vi)),!0)},h),de.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return de.forEach(t.mutations,o=>{const u=new Ar(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Ar(t,0),o=this.Di.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class VE{constructor(e){this.Mi=e,this.docs=new Yn(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Fs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Cn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=Fs();const u=new Ue(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||iI(Ko(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Oi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new UE(this)}getSize(e){return de.resolve(this.size)}}class UE extends jg{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class BE{constructor(e){this.persistence=e,this.Fi=new Ha(t=>Uu(t),mf),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.$i=0,this.Bi=new zg,this.targetCount=0,this.Li=Ka.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),de.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Bi.containsKey(t))}}class jE{constructor(e,t){this.Ui={},this.overlays={},this.es=new Ps(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new BE(this),this.indexManager=new LI,this.ds=new VE(r=>this.referenceDelegate.qi(r)),this.M=new o_(t),this._s=new KI(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new LE(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new HE(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return de.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class HE extends kI{constructor(e){super(),this.currentSequenceNumber=e}}class Zg{constructor(e){this.persistence=e,this.ji=new zg,this.Wi=null}static zi(e){return new Zg(e)}get Hi(){if(this.Wi)return this.Wi;throw tt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),de.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Hi,r=>{const o=Ue.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return de.or([()=>de.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function C_(n,e){return`firestore_clients_${n}_${e}`}function qu(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function T_(n,e){return`firestore_targets_${n}_${e}`}class Wg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new Ae(o.error.code,o.error.message))),h?new Wg(e,t,o.state,u):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ta{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new ta(e,r.state,o):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class A_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Tg();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=Cy(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new A_(e,u):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ff{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ff(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $E{constructor(){this.activeTargetIds=Tg()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kg{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Yn(St),this.started=!1,this.rr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=C_(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new $E),this.cr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(C_(e.persistenceKey,o));if(u){const h=A_.Yi(o,u);h&&(e.ir=e.ir.insert(h.clientId,h))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(T_(this.persistenceKey,e));if(r){const o=ta.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(T_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let h=Ps.A;if(null!=u)try{const m=JSON.parse(u);Dt("number"==typeof m),h=m}catch(m){fr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==Ps.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new Wg(this.currentUser,e,t,r),u=qu(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=qu(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=T_(this.persistenceKey,e),u=new ta(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return A_.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Wg.Yi(new hr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return ta.Yi(o,t)}mr(e){return Ff.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),h=[],m=[];return u.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Fr(h,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Tg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class S_{constructor(){this.$r=new $E,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new $E,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ET{Lr(e){}shutdown(){}}class gt{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class QI{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class JI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const h=this.uo(e,t);Oe("RestConnection","Sending: ",h,r);const m={};return this.ao(m,o,u),this.co(e,h,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw lf("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${YI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,h)=>{const m=new aT;m.listenOnce(wy.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case mo.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case mo.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),h(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case mo.HTTP_ERROR:const M=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const H=function(G){const ee=G.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ee)>=0?ee:ae.UNKNOWN}(N.status);h(new Ae(H,N.message))}else h(new Ae(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Jb(),h=Ey(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new oT({})),this.ao(m.initMessageHeaders,t,r),(0,Et.uI)()||(0,Et.b$)()||(0,Et.d)()||(0,Et.w1)()||(0,Et.Mn)()||(0,Et.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let M=!1,N=!1;const H=new QI({Wr:ee=>{N?Oe("Connection","Not sending because WebChannel is closed:",ee):(M||(Oe("Connection","Opening WebChannel transport."),C.open(),M=!0),Oe("Connection","WebChannel sending:",ee),C.send(ee))},zr:()=>C.close()}),G=(ee,Re,nt)=>{ee.listen(Re,vt=>{try{nt(vt)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return G(C,of.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),G(C,of.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),H.no())}),G(C,of.EventType.ERROR,ee=>{N||(N=!0,lf("Connection","WebChannel transport errored:",ee),H.no(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),G(C,of.EventType.MESSAGE,ee=>{var Re;if(!N){const nt=ee.data[0];Dt(!!nt);const vt=nt,Lt=vt.error||(null===(Re=vt[0])||void 0===Re?void 0:Re.error);if(Lt){Oe("Connection","WebChannel received error:",Lt);const Zt=Lt.status;let Rt=function(pn){const qi=hn[pn];if(void 0!==qi)return qy(qi)}(Zt),Qt=Lt.message;void 0===Rt&&(Rt=ae.INTERNAL,Qt="Unknown error status: "+Zt+" with message "+Lt.message),N=!0,H.no(new Ae(Rt,Qt)),C.close()}else Oe("Connection","WebChannel received:",nt),H.so(nt)}}),G(h,k0.STAT_EVENT,ee=>{ee.stat===ug.PROXY?Oe("Connection","Detected buffering proxy"):ee.stat===ug.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.eo()},0),H}}function Lf(){return"undefined"!=typeof window?window:null}function Yg(){return"undefined"!=typeof document?document:null}function zu(n){return new Fd(n,!0)}class Xd{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Hn{constructor(e,t,r,o,u,h,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Xd(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,le.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,le.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,le.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wT extends Hn{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function oE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(Dt(void 0===C||"string"==typeof C),Dr.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),Dr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const C=void 0===w.code?ae.UNKNOWN:qy(w.code);return new Ae(C,w.message||"")}(h);t=new Eo(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ii(n,r.document.name),u=jn(r.document.updateTime),h=new ai({mapValue:{fields:r.document.fields}}),m=Cn.newFoundDocument(o,u,h);t=new Ag(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ii(n,r.document),u=r.readTime?jn(r.readTime):_t.min(),h=Cn.newNoDocument(o,u);t=new Ag([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Ii(n,r.document);t=new Ag([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new yT(r.count||0);t=new Sg(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?jn(u.readTime):_t.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Vd(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=hg(m)?{documents:uE(o,m)}:{query:lE(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=ic(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(h.readTime=Qo(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function _I(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Vd(this.M),t.removeTarget=e,this.Fo(t)}}class GE extends Hn{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function aE(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let u=jn(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=jn(o)),new nE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.Yo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Vd(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ud(this.M,r))};this.Fo(t)}}class XI extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class eD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(fr(t),this.iu=!1):Oe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class qE{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,le.Z)(function*(){var w;wo(h)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,le.Z)(function*(C){const M=ze(C);M.fu.add(4),yield hc(M),M.wu.set("Unknown"),M.fu.delete(4),yield eh(M)}),function(C){return w.apply(this,arguments)})(h))}))}),this.wu=new eD(r,o)}}function eh(n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,le.Z)(function*(n){if(wo(n))for(const e of n.du)yield e(!0)}),Qg.apply(this,arguments)}function hc(n){return x_.apply(this,arguments)}function x_(){return x_=(0,le.Z)(function*(n){for(const e of n.du)yield e(!1)}),x_.apply(this,arguments)}function Jg(n,e){const t=ze(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),R_(t)?M_(t):nh(t).xo()&&fc(t,e))}function Vf(n,e){const t=ze(n),r=nh(t);t.lu.delete(e),r.xo()&&zE(t,e),0===t.lu.size&&(r.xo()?r.Mo():wo(t)&&t.wu.set("Unknown"))}function fc(n,e){n.mu.Z(e.targetId),nh(n).jo(e)}function zE(n,e){n.mu.Z(e),nh(n).Wo(e)}function M_(n){n.mu=new li({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),nh(n).start(),n.wu.ru()}function R_(n){return wo(n)&&!nh(n).Co()&&n.lu.size>0}function wo(n){return 0===ze(n).fu.size}function N_(n){n.mu=void 0}function ZE(n){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,le.Z)(function*(n){n.lu.forEach((e,t)=>{fc(n,e)})}),Xg.apply(this,arguments)}function tD(n,e){return pc.apply(this,arguments)}function pc(){return pc=(0,le.Z)(function*(n,e){N_(n),R_(n)?(n.wu.au(e),M_(n)):n.wu.set("Unknown")}),pc.apply(this,arguments)}function Uf(n,e,t){return O_.apply(this,arguments)}function O_(){return O_=(0,le.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Eo&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield em(n,r)}else if(e instanceof Ag?n.mu.ut(e):e instanceof Sg?n.mu._t(e):n.mu.ht(e),!t.isEqual(_t.min()))try{const r=yield RE(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.mu.yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(w);C&&o.lu.set(w,C.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(Dr.EMPTY_BYTE_STRING,w.snapshotVersion)),zE(o,m);const C=new za(w.target,m,1,w.sequenceNumber);fc(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield em(n,r)}var r}),O_.apply(this,arguments)}function em(n,e,t){return P_.apply(this,arguments)}function P_(){return P_=(0,le.Z)(function*(n,e,t){if(!qa(e))throw e;n.fu.add(1),yield hc(n),n.wu.set("Offline"),t||(t=()=>RE(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield eh(n)}))}),P_.apply(this,arguments)}function k_(n,e){return e().catch(t=>em(n,t,e))}function gc(n){return tm.apply(this,arguments)}function tm(){return tm=(0,le.Z)(function*(n){const e=ze(n),t=Zu(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;nD(e);)try{const o=yield zI(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,WE(e,o)}catch(o){yield em(e,o)}KE(e)&&YE(e)}),tm.apply(this,arguments)}function nD(n){return wo(n)&&n.hu.length<10}function WE(n,e){n.hu.push(e);const t=Zu(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function KE(n){return wo(n)&&!Zu(n).Co()&&n.hu.length>0}function YE(n){Zu(n).start()}function bT(n){return QE.apply(this,arguments)}function QE(){return QE=(0,le.Z)(function*(n){Zu(n).Zo()}),QE.apply(this,arguments)}function IT(n){return JE.apply(this,arguments)}function JE(){return JE=(0,le.Z)(function*(n){const e=Zu(n);for(const t of n.hu)e.Jo(t.mutations)}),JE.apply(this,arguments)}function XE(n,e,t){return th.apply(this,arguments)}function th(){return th=(0,le.Z)(function*(n,e,t){const r=n.hu.shift(),o=Cf.from(r,e,t);yield k_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield gc(n)}),th.apply(this,arguments)}function rD(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,le.Z)(function*(n,e){var t;e&&Zu(n).Ho&&(yield(t=(0,le.Z)(function*(r,o){if(pI(u=o.code)&&u!==ae.ABORTED){const h=r.hu.shift();Zu(r).ko(),yield k_(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield gc(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),KE(n)&&YE(n)}),F_.apply(this,arguments)}function L_(n,e){return mc.apply(this,arguments)}function mc(){return mc=(0,le.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=wo(t);t.fu.add(3),yield hc(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield eh(t)}),mc.apply(this,arguments)}function V_(n,e){return U_.apply(this,arguments)}function U_(){return U_=(0,le.Z)(function*(n,e){const t=ze(n);e?(t.fu.delete(2),yield eh(t)):e||(t.fu.add(2),yield hc(t),t.wu.set("Unknown"))}),U_.apply(this,arguments)}function nh(n){return n.gu||(n.gu=function(e,t,r){const o=ze(e);return o.eu(),new wT(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:ZE.bind(null,n),Yr:tD.bind(null,n),Qo:Uf.bind(null,n)}),n.du.push(function(){var e=(0,le.Z)(function*(t){t?(n.gu.ko(),R_(n)?M_(n):n.wu.set("Unknown")):(yield n.gu.stop(),N_(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Zu(n){return n.yu||(n.yu=function(e,t,r){const o=ze(e);return o.eu(),new GE(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:bT.bind(null,n),Yr:rD.bind(null,n),Xo:IT.bind(null,n),Yo:XE.bind(null,n)}),n.du.push(function(){var e=(0,le.Z)(function*(t){t?(n.yu.ko(),yield gc(n)):(yield n.yu.stop(),n.hu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class B_{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new B_(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yc(n,e){if(fr("AsyncQueue",`${e}: ${n}`),qa(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class rh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=Zy(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new rh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new rh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ew{constructor(){this.pu=new Yn(Ue.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):tt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class bo{constructor(e,t,r,o,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new bo(e,t,rh.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class iD{constructor(){this.Tu=void 0,this.listeners=[]}}class tw{constructor(){this.queries=new Ha(e=>gg(e),_f),this.onlineState="Unknown",this.Eu=new Set}}function j_(n,e){return nm.apply(this,arguments)}function nm(){return nm=(0,le.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new iD),o)try{u.Tu=yield t.onListen(r)}catch(h){const m=yc(h,`Initialization of query '${mg(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&G_(t)}),nm.apply(this,arguments)}function H_(n,e){return rm.apply(this,arguments)}function rm(){return rm=(0,le.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),rm.apply(this,arguments)}function sD(n,e){const t=ze(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Ru(o)&&(r=!0);h.Tu=o}}r&&G_(t)}function $_(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function G_(n){n.Eu.forEach(e=>{e.next()})}class im{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class nw{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class rw{constructor(e){this.M=e}fi(e){return Ii(this.M,e)}di(e){return e.metadata.exists?Jy(this.M,e.document,!1):Cn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return jn(e)}}class oD{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iw(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new rw(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||nn()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function ZI(n,e,t,r){return I_.apply(this,arguments)}(e.localStore,new rw(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield WI(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function iw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class sm{constructor(e){this.key=e}}class sw{constructor(e){this.key=e}}class q_{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=nn(),this.mutatedKeys=nn(),this.Uu=W0(e),this.qu=new rh(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new ew,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w=ec(this.query)&&o.size===this.query.limit?o.last():null,C=pg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const H=o.get(M),G=yg(this.query,N)?N:null,ee=!!H&&this.mutatedKeys.has(H.key),Re=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let nt=!1;H&&G?H.data.isEqual(G.data)?ee!==Re&&(r.track({type:3,doc:G}),nt=!0):this.ju(H,G)||(r.track({type:2,doc:G}),nt=!0,(w&&this.Uu(G,w)>0||C&&this.Uu(G,C)<0)&&(m=!0)):!H&&G?(r.track({type:0,doc:G}),nt=!0):H&&!G&&(r.track({type:1,doc:H}),nt=!0,(w||C)&&(m=!0)),nt&&(G?(h=h.add(G),u=Re?u.add(M):u.delete(M)):(h=h.delete(M),u=u.delete(M)))}),ec(this.query)||pg(this.query))for(;h.size>this.query.limit;){const M=ec(this.query)?h.last():h.first();h=h.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{qu:h,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((C,M)=>function(N,H){const G=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return G(N)-G(H)}(C.type,M.type)||this.Uu(C.doc,M.doc)),this.Wu(r);const h=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==u.length||w?{snapshot:new bo(this.query,e.qu,o,u,e.mutatedKeys,0===m,w,!1),Hu:h}:{Hu:h}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new ew,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=nn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new sw(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new sm(r))}),t}Yu(e){this.$u=e.li,this.Lu=nn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return bo.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class aD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class uD{constructor(e){this.key=e,this.Zu=!1}}class lD{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.ta={},this.ea=new Ha(m=>gg(m),_f),this.na=new Map,this.sa=new Set,this.ia=new Yn(Ue.comparator),this.ra=new Map,this.oa=new zg,this.ua={},this.aa=new Map,this.ca=Ka.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function cD(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,le.Z)(function*(n,e){const t=av(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const h=yield Qd(t.localStore,Hi(e));t.isPrimaryClient&&Jg(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield Z_(t,e,r,"current"===m)}return o}),z_.apply(this,arguments)}function Z_(n,e,t,r){return W_.apply(this,arguments)}function W_(){return W_=(0,le.Z)(function*(n,e,t,r){n.la=(M,N,H)=>{return(G=(0,le.Z)(function*(ee,Re,nt,vt){let Lt=Re.view.Gu(nt);Lt.ni&&(Lt=yield qg(ee.localStore,Re.query,!1).then(({documents:Qt})=>Re.view.Gu(Qt,Lt)));const Zt=vt&&vt.targetChanges.get(Re.targetId),Rt=Re.view.applyChanges(Lt,ee.isPrimaryClient,Zt);return um(ee,Re.targetId,Rt.Hu),Rt.snapshot}),function(ee,Re,nt,vt){return G.apply(this,arguments)})(n,M,N,H);var G};const o=yield qg(n.localStore,e,!0),u=new q_(e,o.li),h=u.Gu(o.documents),m=wf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);um(n,t,w.Hu);const C=new aD(e,t,u);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),W_.apply(this,arguments)}function dD(n,e){return om.apply(this,arguments)}function om(){return om=(0,le.Z)(function*(n,e){const t=ze(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!_f(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Vf(t.remoteStore,r.targetId),_c(t,r.targetId)}).catch(Kr))):(_c(t,r.targetId),yield Jd(t.localStore,r.targetId,!0))}),om.apply(this,arguments)}function K_(){return K_=(0,le.Z)(function*(n,e,t){const r=uv(n);try{const o=yield function(u,h){const m=ze(u),w=Bn.now(),C=h.reduce((N,H)=>N.add(H.key),nn());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ci.Ks(N,C).next(H=>{M=H;const G=[];for(const ee of h){const Re=mT(ee,M.get(ee.key));null!=Re&&G.push(new Rd(ee.key,Re,Ry(Re.value.mapValue),gr.exists(!0)))}return m.Bs.addMutationBatch(N,w,G,h)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let w=u.ua[u.currentUser.toKey()];w||(w=new Yn(St)),w=w.insert(h,m),u.ua[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Wu(r,o.changes),yield gc(r.remoteStore)}catch(o){const u=yc(o,"Failed to persist write");t.reject(u)}}),K_.apply(this,arguments)}function aw(n,e){return am.apply(this,arguments)}function am(){return am=(0,le.Z)(function*(n,e){const t=ze(n);try{const r=yield qI(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.ra.get(u);h&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Zu=!0:o.modifiedDocuments.size>0?Dt(h.Zu):o.removedDocuments.size>0&&(Dt(h.Zu),h.Zu=!1))}),yield Wu(t,r,e)}catch(r){yield Kr(r)}}),am.apply(this,arguments)}function uw(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,h)=>{const m=h.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=ze(u);m.onlineState=h;let w=!1;m.queries.forEach((C,M)=>{for(const N of M.listeners)N.Au(h)&&(w=!0)}),w&&G_(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hD(n,e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,le.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let h=new Yn(Ue.comparator);h=h.insert(u,Cn.newNoDocument(u,_t.min()));const m=nn().add(u),w=new $a(_t.min(),new Map,new _n(St),h,m);yield aw(r,w),r.ia=r.ia.remove(u),r.ra.delete(e),lm(r)}else yield Jd(r.localStore,e,!1).then(()=>_c(r,e,t)).catch(Kr)}),Y_.apply(this,arguments)}function Q_(n,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,le.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield GI(t.localStore,e);X_(t,r,null),Hf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wu(t,o)}catch(o){yield Kr(o)}}),Bf.apply(this,arguments)}function lw(n,e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,le.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,h){const m=ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,h).next(M=>(Dt(null!==M),C=M.keys(),m.Bs.removeMutationBatch(w,M))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,C))})}(r.localStore,e);X_(r,e,t),Hf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wu(r,o)}catch(o){yield Kr(o)}}),jf.apply(this,arguments)}function J_(){return J_=(0,le.Z)(function*(n,e){const t=ze(n);wo(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=ze(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=yc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),J_.apply(this,arguments)}function Hf(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function X_(n,e,t){const r=ze(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function _c(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||cw(n,r)})}function cw(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Vf(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),lm(n))}function um(n,e,t){for(const r of t)r instanceof sm?(n.oa.addReference(r.key,e),pD(n,r)):r instanceof sw?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||cw(n,r.key)):tt()}function pD(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.sa.add(r),lm(n))}function lm(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Ue(Xt.fromString(e)),r=n.ca.next();n.ra.set(r,new uD(t)),n.ia=n.ia.insert(t,r),Jg(n.remoteStore,new za(Hi(ji(t.path)),r,2,Ps.A))}}function Wu(n,e,t){return ev.apply(this,arguments)}function ev(){return ev=(0,le.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],h=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{h.push(r.la(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=Gg.Ys(w.targetId,C);u.push(M)}}))}),yield Promise.all(h),r.ta.Qo(o),yield(m=(0,le.Z)(function*(w,C){const M=ze(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>de.forEach(C,H=>de.forEach(H.Hs,G=>M.persistence.referenceDelegate.addReference(N,H.targetId,G)).next(()=>de.forEach(H.Js,G=>M.persistence.referenceDelegate.removeReference(N,H.targetId,G)))))}catch(N){if(!qa(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const H=N.targetId;if(!N.fromCache){const G=M.ii.get(H),Re=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);M.ii=M.ii.insert(H,Re)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),ev.apply(this,arguments)}function cm(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,le.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield E_(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(h=>{h.forEach(m=>{m.reject(new Ae(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wu(t,r.hi)}var o}),tv.apply(this,arguments)}function ih(n,e){const t=ze(n),r=t.ra.get(e);if(r&&r.Zu)return nn().add(r.key);{let o=nn();const u=t.na.get(e);if(!u)return o;for(const h of u){const m=t.ea.get(h);o=o.unionWith(m.view.Ku)}return o}}function $f(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,le.Z)(function*(n,e){const t=ze(n),r=yield qg(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&um(t,e.targetId,o.Hu),o}),nv.apply(this,arguments)}function DT(n,e){return dm.apply(this,arguments)}function dm(){return dm=(0,le.Z)(function*(n,e){const t=ze(n);return PE(t.localStore,e).then(r=>Wu(t,r))}),dm.apply(this,arguments)}function gD(n,e,t,r){return rv.apply(this,arguments)}function rv(){return rv=(0,le.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(h,m){const w=ze(h),C=ze(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.fn(M,m).next(N=>N?w.ci.Ks(M,N):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield gc(o.remoteStore):"acknowledged"===t||"rejected"===t?(X_(o,e,r||null),Hf(o,e),m=e,ze(ze(o.localStore).Bs)._n(m)):tt(),yield Wu(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),rv.apply(this,arguments)}function iv(){return iv=(0,le.Z)(function*(n,e){const t=ze(n);if(av(t),uv(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield sv(t,r.toArray());t.ha=!0,yield V_(t.remoteStore,!0);for(const u of o)Jg(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(_c(t,h),Jd(t.localStore,h,!0))),Vf(t.remoteStore,h)}),yield o,yield sv(t,r),function(u){const h=ze(u);h.ra.forEach((m,w)=>{Vf(h.remoteStore,w)}),h.oa.bi(),h.ra=new Map,h.ia=new Yn(Ue.comparator)}(t),t.ha=!1,yield V_(t.remoteStore,!1)}}),iv.apply(this,arguments)}function sv(n,e,t){return hm.apply(this,arguments)}function hm(){return hm=(0,le.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const h of e){let m;const w=r.na.get(h);if(w&&0!==w.length){m=yield Qd(r.localStore,Hi(w[0]));for(const C of w){const M=r.ea.get(C),N=yield $f(r,M);N.snapshot&&u.push(N.snapshot)}}else{const C=yield OE(r.localStore,h);m=yield Qd(r.localStore,C),yield Z_(r,fm(C),h,!1)}o.push(m)}return r.ta.Qo(u),o}),hm.apply(this,arguments)}function fm(n){return Vy(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pm(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function Gf(n,e,t,r){return ov.apply(this,arguments)}function ov(){return ov=(0,le.Z)(function*(n,e,t,r){const o=ze(n);if(o.ha)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield PE(o.localStore,By(u[0])),m=$a.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Wu(o,h,m);break}case"rejected":yield Jd(o.localStore,e,!0),_c(o,e,r);break;default:tt()}}),ov.apply(this,arguments)}function dw(n,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,le.Z)(function*(n,e,t){const r=av(n);if(r.ha){for(const o of e){if(r.na.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield OE(r.localStore,o),h=yield Qd(r.localStore,u);yield Z_(r,fm(u),h.targetId,!1),Jg(r.remoteStore,h)}for(const o of t)r.na.has(o)&&(yield Jd(r.localStore,o,!1).then(()=>{Vf(r.remoteStore,o),_c(r,o)}).catch(Kr))}}),gm.apply(this,arguments)}function av(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ih.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hD.bind(null,e),e.ta.Qo=sD.bind(null,e.eventManager),e.ta.fa=$_.bind(null,e.eventManager),e}function uv(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lw.bind(null,e),e}class hw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.M=zu(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return v_(this.persistence,new __,e.initialUser,this.M)}wa(e){return new jE(Zg.zi,this.M)}_a(e){return new S_}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yD extends hw{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield uv(r.ya.syncEngine),yield gc(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return v_(this.persistence,new __,e.initialUser,this.M)}ma(e){return new UI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=$g(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new Pf(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Lf(),Yg(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new S_}}class _D extends yD{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof Kg&&(r.sharedClientState.syncEngine={Mr:gD.bind(null,o),Or:Gf.bind(null,o),Fr:dw.bind(null,o),Fs:pm.bind(null,o),kr:DT.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,le.Z)(function*(h){yield function mD(n,e){return iv.apply(this,arguments)}(r.ya.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}_a(e){const t=Lf();if(!Kg.vt(t))throw new Ae(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$g(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cv{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>uw(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=cm.bind(null,r.syncEngine),yield V_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tw}createDatastore(e){const t=zu(e.databaseInfo.databaseId),r=new JI(e.databaseInfo);return new XI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>uw(this.syncEngine,m,0),h=gt.vt()?new gt:new ET,new qE(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,w,C){const M=new lD(r,o,u,h,m,w);return C&&(M.ha=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const r=ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield hc(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vc(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sh{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,le.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new nw(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,le.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,le.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class CT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,le.Z)(function*(u,h){const m=ze(u),w=Vd(m.M)+"/documents",C={documents:h.map(G=>Jo(m.M,G))},M=yield m.ho("BatchGetDocuments",w,C),N=new Map;M.forEach(G=>{const ee=function sE(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Ii(t,r.found.name),u=jn(r.found.updateTime),h=new ai({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Ii(t,r.missing),u=jn(r.readTime);return Cn.newNoDocument(o,u)}(n,e):tt()}(m.M,G);N.set(ee.key.toString(),ee)});const H=[];return h.forEach(G=>{const ee=N.get(G.toString());Dt(!!ee),H.push(ee)}),H}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ue.fromPath(o);e.mutations.push(new Ig(u,e.precondition(u)))}),yield(r=(0,le.Z)(function*(o,u){const h=ze(o),m=Vd(h.M)+"/documents",w={writes:u.map(C=>Ud(h.M,C))};yield h.oo("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fw{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new Xd(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,le.Z)(function*(){const t=new CT(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Ba(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!pI(t)}return!1}}class vD{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=hr.UNAUTHENTICATED,this.clientId=Va.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,le.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=yc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function ED(n,e){return mm.apply(this,arguments)}function mm(){return mm=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,le.Z)(function*(u){r.isEqual(u)||(yield E_(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mm.apply(this,arguments)}function wD(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield zf(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>L_(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>L_(e.remoteStore,u)),n.onlineComponents=e}),ym.apply(this,arguments)}function zf(n){return _m.apply(this,arguments)}function _m(){return _m=(0,le.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield ED(n,new hw)),n.offlineComponents}),_m.apply(this,arguments)}function Zf(n){return dv.apply(this,arguments)}function dv(){return dv=(0,le.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield wD(n,new cv)),n.onlineComponents}),dv.apply(this,arguments)}function pw(n){return zf(n).then(e=>e.persistence)}function hv(n){return zf(n).then(e=>e.localStore)}function gw(n){return Zf(n).then(e=>e.remoteStore)}function fv(n){return Zf(n).then(e=>e.syncEngine)}function oh(n){return pv.apply(this,arguments)}function pv(){return pv=(0,le.Z)(function*(n){const e=yield Zf(n),t=e.eventManager;return t.onListen=cD.bind(null,e.syncEngine),t.onUnlisten=dD.bind(null,e.syncEngine),t}),pv.apply(this,arguments)}function gv(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(o,u,h,m,w){const C=new qf({next:N=>{u.enqueueAndForget(()=>H_(o,M));const H=N.docs.has(h);!H&&N.fromCache?w.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new im(ji(h.path),C,{includeMetadataChanges:!0,Cu:!0});return j_(o,M)}(yield oh(n),n.asyncQueue,e,t,r)})),r.promise}function mv(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(o,u,h,m,w){const C=new qf({next:N=>{u.enqueueAndForget(()=>H_(o,M)),N.fromCache&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new im(h,C,{includeMetadataChanges:!0,Cu:!0});return j_(o,M)}(yield oh(n),n.asyncQueue,e,t,r)})),r.promise}const vw=new Map;function yv(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ew(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ww(n){if(!Ue.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ah(n){if(Ue.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Io(n,e){if(e<=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class bw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ew("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ec{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bw({}),this._settingsFrozen=!1,e instanceof Wo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new lT;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new fT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vw.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),vw.delete(e),t.terminate())}(this),Promise.resolve()}}class Tn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class na extends ci{constructor(e,t,r){super(e,t,ji(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Ue(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function Yf(n,e,...t){if(n=(0,Et.m9)(n),yv("collection","path",e),n instanceof Ec){const r=Xt.fromString(e,...t);return ah(r),new na(n,null,r)}{if(!(n instanceof Tn||n instanceof na))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return ah(r),new na(n.firestore,null,r)}}function wm(n,e,...t){if(n=(0,Et.m9)(n),1===arguments.length&&(e=Va.R()),yv("doc","path",e),n instanceof Ec){const r=Xt.fromString(e,...t);return ww(r),new Tn(n,null,new Ue(r))}{if(!(n instanceof Tn||n instanceof na))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return ww(r),new Tn(n.firestore,n instanceof na?n.converter:null,new Ue(r))}}function Iw(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),(n instanceof Tn||n instanceof na)&&(e instanceof Tn||e instanceof na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _v(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),n instanceof ci&&e instanceof ci&&n.firestore===e.firestore&&_f(n._query,e._query)&&n.converter===e.converter}class Dw{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Xd(this,"async_queue_retry"),this.qa=()=>{const t=Yg();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Yg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Yg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Or;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,le.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!qa(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,fr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=B_.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&tt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Qf(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Cw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Nn extends Ec{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Dw,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vv(this),this._firestoreClient.terminate()}}function Qn(n){return n._firestoreClient||vv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vv(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new F0(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new vD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Aw(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield ED(n,t),yield wD(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function bv(n){if(n._initialized||n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ra{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(Dr.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Do(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ku{constructor(e){this._methodName=e}}class bm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const Rw=/^__.*__$/;class RD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Rd(e,this.data,this.fieldMask,t,this.fieldTransforms):new vf(e,this.data,t,this.fieldTransforms)}}class di{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wc(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Im{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return ep(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(wc(this.Xa)&&Rw.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class ND{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||zu(e)}ac(e,t,r,o=!1){return new Im({Xa:e,methodName:t,uc:r,path:Pr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function uh(n){const e=n._freezeSettings(),t=zu(n._databaseId);return new ND(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yu(n,e,t,r,o,u={}){const h=n.ac(u.merge||u.mergeFields?2:0,e,t,o);Am("Data must be an object, but it was:",h,r);const m=Tm(r,h);let w,C;if(u.merge)w=new Wl(h.fieldMask),C=h.fieldTransforms;else if(u.mergeFields){const M=[];for(const N of u.mergeFields){const H=Cv(e,N,t);if(!h.contains(H))throw new Ae(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);Pw(M,H)||M.push(H)}w=new Wl(M),C=h.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=h.fieldTransforms;return new RD(new ai(m),w,C)}class Jf extends Ku{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jf}}function Dm(n,e,t){return new Im({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Iv extends Ku{_toFieldTransform(e){return new Md(e.path,new vo)}isEqual(e){return e instanceof Iv}}class Nw extends Ku{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=Dm(this,e,!0),r=this.cc.map(u=>ia(u,t)),o=new nc(r);return new Md(e.path,o)}isEqual(e){return this===e}}class OD extends Ku{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=Dm(this,e,!0),r=this.cc.map(u=>ia(u,t)),o=new rc(r);return new Md(e.path,o)}isEqual(e){return this===e}}class PD extends Ku{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new bi(e.M,Hy(e.M,this.hc));return new Md(e.path,t)}isEqual(e){return this===e}}function Xf(n,e,t,r){const o=n.ac(1,e,t);Am("Data must be an object, but it was:",o,r);const u=[],h=ai.empty();Zl(r,(w,C)=>{const M=bc(e,w,t);C=(0,Et.m9)(C);const N=o.sc(M);if(C instanceof Jf)u.push(M);else{const H=ia(C,N);null!=H&&(u.push(M),h.set(M,H))}});const m=new Wl(u);return new di(h,m,o.fieldTransforms)}function Cm(n,e,t,r,o,u){const h=n.ac(1,e,t),m=[Cv(e,r,t)],w=[o];if(u.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(Cv(e,u[H])),w.push(u[H+1]);const C=[],M=ai.empty();for(let H=m.length-1;H>=0;--H)if(!Pw(C,m[H])){const G=m[H];let ee=w[H];ee=(0,Et.m9)(ee);const Re=h.sc(G);if(ee instanceof Jf)C.push(G);else{const nt=ia(ee,Re);null!=nt&&(C.push(G),M.set(G,nt))}}const N=new Wl(C);return new di(M,N,h.fieldTransforms)}function Dv(n,e,t,r=!1){return ia(t,n.ac(r?4:3,e))}function ia(n,e){if(kD(n=(0,Et.m9)(n)))return Am("Unsupported field value:",e,n),Tm(n,e);if(n instanceof Ku)return function(t,r){if(!wc(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=ia(h,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Et.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hy(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Bn.fromDate(t);return{timestampValue:Qo(r.M,o)}}if(t instanceof Bn){const o=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qo(r.M,o)}}if(t instanceof bm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Do)return{bytesValue:ic(r.M,t._byteString)};if(t instanceof Tn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ju(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${vm(t)}`)}(n,e)}function Tm(n,e){const t={};return Ua(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(n,(r,o)=>{const u=ia(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function kD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof bm||n instanceof Do||n instanceof Tn||n instanceof Ku)}function Am(n,e,t){if(!kD(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vm(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function Cv(n,e,t){if((e=(0,Et.m9)(e))instanceof ra)return e._internalPath;if("string"==typeof e)return bc(n,e);throw ep("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ow=new RegExp("[~\\*/\\[\\]]");function bc(n,e,t){if(e.search(Ow)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ra(...e.split("."))._internalPath}catch(r){throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ep(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Ae(ae.INVALID_ARGUMENT,m+n+w)}function Pw(n,e){return n.some(t=>t.isEqual(e))}class Ic{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Av("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tv extends Ic{data(){return super.data()}}function Av(n,e){return"string"==typeof e?bc(n,e):e instanceof ra?e._internalPath:e._delegate._internalPath}class Dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ya extends Ic{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Av("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lh extends Ya{data(e={}){return super.data(e)}}class Qa{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Dc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lh(this._firestore,this._userDataWriter,r.key,r,new Dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new lh(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Dc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new lh(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Dc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),C=u.indexOf(h.doc.key)),{type:FD(h.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function Sv(n,e){return n instanceof Ya&&e instanceof Ya?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qa&&e instanceof Qa&&n._firestore===e._firestore&&_v(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function xv(n){if(pg(n)&&0===n.explicitOrderBy.length)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}function Qu(n,...e){for(const t of e)n=t._apply(n);return n}class kw extends tp{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=uh(e.firestore),r=function(o,u,h,m,w,C,M){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){HD(M,C);const G=[];for(const ee of M)G.push(jD(m,o,ee));N={arrayValue:{values:G}}}else N=jD(m,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||HD(M,C),N=Dv(h,"where",M,"in"===C||"not-in"===C);const H=pr.create(w,C,N);return function(G,ee){if(ee.S()){const nt=Z0(G);if(null!==nt&&!nt.isEqual(ee.field))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nt.toString()}' and '${ee.field.toString()}'`);const vt=Uy(G);null!==vt&&$D(0,ee.field,vt)}const Re=function(nt,vt){for(const Lt of nt.filters)if(vt.indexOf(Lt.op)>=0)return Lt.op;return null}(G,function(nt){switch(nt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Re)throw new Ae(ae.INVALID_ARGUMENT,Re===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Re.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new ci(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new Yo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Fw extends tp{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Sd(o,u);return function(m,w){if(null===Uy(m)){const C=Z0(m);null!==C&&$D(0,C,w.field)}}(r,h),h}(e._query,this.lc,this._c);return new ci(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Yo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Mv extends tp{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new ci(e.firestore,e.converter,xd(e._query,this.wc,this.mc))}}class Uw extends tp{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=BD(e,this.type,this.gc,this.yc);return new ci(e.firestore,e.converter,(o=t,new Yo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class UD extends tp{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=BD(e,this.type,this.gc,this.yc);return new ci(e.firestore,e.converter,(o=t,new Yo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function BD(n,e,t,r){if(t[0]=(0,Et.m9)(t[0]),t[0]instanceof Ic)return function(o,u,h,m,w){if(!m)throw new Ae(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const M of tc(o))if(M.field.isKeyField())C.push(Cr(u,m.key));else{const N=m.data.field(M.field);if(Kl(N))throw new Ae(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=M.field.canonicalString();throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(N)}return new Xl(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=uh(n.firestore);return function(u,h,m,w,C,M){const N=u.explicitOrderBy;if(C.length>N.length)throw new Ae(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let G=0;G<C.length;G++){const ee=C[G];if(N[G].field.isKeyField()){if("string"!=typeof ee)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!yf(u)&&-1!==ee.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const Re=u.path.child(Xt.fromString(ee));if(!Ue.isDocumentKey(Re))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const nt=new Ue(Re);H.push(Cr(h,nt))}else{const Re=Dv(m,w,ee);H.push(Re)}}return new Xl(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function jD(n,e,t){if("string"==typeof(t=(0,Et.m9)(t))){if(""===t)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yf(e)&&-1!==t.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!Ue.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cr(n,new Ue(r))}if(t instanceof Tn)return Cr(n,t._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(t)}.`)}function HD(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $D(n,e,t){if(!t.isEqual(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class jw{convertValue(e,t="none"){switch(Id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Zl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new bm(Rn(e.latitude),Rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yl(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(df(e));default:return null}}convertTimestamp(e){const t=os(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);Dt(Mg(r));const o=new Wo(r.get(1),r.get(3)),u=new Ue(r.popFirst(5));return o.isEqual(t)||fr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Cc(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MT extends jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}class Rv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uh(e)}set(e,t,r){this._verifyNotCommitted();const o=sa(e,this._firestore),u=Cc(o.converter,t,r),h=Yu(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,gr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=sa(e,this._firestore);let h;return h="string"==typeof(t=(0,Et.m9)(t))||t instanceof ra?Cm(this._dataReader,"WriteBatch.update",u._key,t,r,o):Xf(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sa(e,this._firestore);return this._mutations=this._mutations.concat(new Nd(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sa(n,e){if((n=(0,Et.m9)(n)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ju extends jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function qD(n,e,t){n=zt(n,Tn);const r=zt(n.firestore,Nn),o=Cc(n.converter,e,t);return np(r,[Yu(uh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,gr.none())])}function qw(n,e,t,...r){n=zt(n,Tn);const o=zt(n.firestore,Nn),u=uh(o);let h;return h="string"==typeof(e=(0,Et.m9)(e))||e instanceof ra?Cm(u,"updateDoc",n._key,e,t,r):Xf(u,"updateDoc",n._key,e),np(o,[h.toMutation(n._key,gr.exists(!0))])}function zw(n,...e){var t,r,o;n=(0,Et.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Qf(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(Qf(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,M;if(n instanceof Tn)C=zt(n.firestore,Nn),M=ji(n._key.path),w={next:N=>{e[h]&&e[h](Zw(C,n,N))},error:e[h+1],complete:e[h+2]};else{const N=zt(n,ci);C=zt(N.firestore,Nn),M=N._query;const H=new Ju(C);w={next:G=>{e[h]&&e[h](new Qa(C,H,N,G))},error:e[h+1],complete:e[h+2]},xv(n._query)}return function(N,H,G,ee){const Re=new qf(ee),nt=new im(H,Re,G);return N.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return j_(yield oh(N),nt)})),()=>{Re.Ia(),N.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return H_(yield oh(N),nt)}))}}(Qn(C),M,m,w)}function np(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function ow(n,e,t){return K_.apply(this,arguments)}(yield fv(t),r,o)})),o.promise}(Qn(n),e)}function Zw(n,e,t){const r=t.docs.get(e._key),o=new Ju(n);return new Ya(n,o,e._key,r,new Dc(t.hasPendingWrites,t.fromCache),e.converter)}class ZD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=uh(e)}get(e){const t=sa(e,this._firestore),r=new MT(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new Ic(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Ic(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=sa(e,this._firestore),u=Cc(o.converter,t,r),h=Yu(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=sa(e,this._firestore);let h;return h="string"==typeof(t=(0,Et.m9)(t))||t instanceof ra?Cm(this._dataReader,"Transaction.update",u._key,t,r,o):Xf(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=sa(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sa(e,this._firestore),r=new Ju(this._firestore);return super.get(e).then(o=>new Ya(this._firestore,r,t._key,o._document,new Dc(!1,!1),t.converter))}}function rp(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kv(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function Fv(){if(!function tI(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Lu=Pi.SDK_VERSION,(0,Pi._registerComponent)(new Tu.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Nn(o,new dT(t.getProvider("auth-internal")),new pT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Pi.registerVersion)(af,"3.4.8",n),(0,Pi.registerVersion)(af,"3.4.8","esm2017")}();class ip{constructor(e){this._delegate=e}static fromBase64String(e){return Fv(),new ip(Do.fromBase64String(e))}static fromUint8Array(e){return kv(),new ip(Do.fromUint8Array(e))}toBase64(){return Fv(),this._delegate.toBase64()}toUint8Array(){return kv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xm(n){return function eC(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tC{enableIndexedDbPersistence(e,t){return function Ev(n,e){bv(n=zt(n,Nn));const t=Qn(n),r=n._freezeSettings(),o=new cv;return Aw(t,o,new yD(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wv(n){bv(n=zt(n,Nn));const e=Qn(n),t=n._freezeSettings(),r=new cv;return Aw(e,r,new _D(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function AD(n){if(n._initialized&&!n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(r){if(!Xo.vt())return Promise.resolve();const o=r+"main";yield Xo.delete(o)}),function(r){return t.apply(this,arguments)})($g(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ww{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Kf(n,e,t,r={}){var o;const u=(n=zt(n,Ec))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=hr.MOCK_USER;else{h=(0,Et.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new hr(w)}n._authCredentials=new cT(new lg(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function xD(n){return function bD(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield pw(n),t=yield gw(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.fu.delete(0),eh(o)}(t)}))}(Qn(n=zt(n,Nn)))}(this._delegate)}disableNetwork(){return function Sw(n){return function Wf(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield pw(n),t=yield gw(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(o){const u=ze(o);u.fu.add(0),yield hc(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Qn(n=zt(n,Nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ew("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function SD(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function fD(n,e){return J_.apply(this,arguments)}(yield fv(e),t)})),t.promise}(Qn(n=zt(n,Nn)))}(this._delegate)}onSnapshotsInSync(e){return function NT(n,e){return function _w(n,e){const t=new qf(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield oh(n),o=t,ze(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield oh(n),o=t,void ze(r).Eu.delete(o);var r,o}))}}(Qn(n=zt(n,Nn)),Qf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sc(this,Yf(this._delegate,e))}catch(t){throw Di(t,"collection()","Firestore.collection()")}}doc(e){try{return new Co(this,wm(this._delegate,e))}catch(t){throw Di(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ci(this,function Em(n,e){if(n=zt(n,Ec),yv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ci(n,null,(t=e,new Yo(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Di(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WD(n,e){return function ID(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const r=yield(o=n,Zf(o).then(u=>u.datastore));var o;new fw(n.asyncQueue,r,e,t).run()})),t.promise}(Qn(n=zt(n,Nn)),t=>e(new ZD(n,t)))}(this._delegate,t=>e(new Lv(this,t)))}batch(){return Qn(this._delegate),new Vv(new Rv(this._delegate,e=>np(this._delegate,e)))}loadBundle(e){return function Mw(n,e){const t=Qn(n=zt(n,Nn)),r=new Cw;return function DD(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return vc(w,C);if(w instanceof ArrayBuffer)return vc(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new sh(w,h);var w}(t,zu(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function lv(n,e,t){const r=ze(n);var o;(o=(0,le.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(H,G){const ee=ze(H),Re=jn(G.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",nt=>ee._s.getBundleMetadata(nt,G.id)).then(nt=>!!nt&&nt.createTime.compareTo(Re)>=0)}(u.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(iw(w));const C=new oD(w,u.localStore,h.M);let M=yield h.da();for(;M;){const H=yield C.ku(M);H&&m._updateProgress(H),M=yield h.da()}const N=yield C.complete();return yield Wu(u,N.Fu,void 0),yield function(H,G){const ee=ze(H);return ee.persistence.runTransaction("Save bundle","readwrite",Re=>ee._s.saveBundleMetadata(Re,G))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(w){return lf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield fv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function MD(n,e){return function CD(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield hv(n),e)}))}(Qn(n=zt(n,Nn)),e).then(t=>t?new ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ci(this,t):null)}}class ch extends jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ip(new Do(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Co.forKey(t,this.firestore,null)}}class Lv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ch(e)}get(e){const t=xc(e);return this._delegate.get(t).then(r=>new dh(this._firestore,new Ya(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=xc(e);return r?(rp("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=xc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=xc(e);return this._delegate.delete(t),this}}class Vv{constructor(e){this._delegate=e}set(e,t,r){const o=xc(e);return r?(rp("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=xc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=xc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ac{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sp(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ac.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ac(e,new ch(e),t),o.set(t,u)),u}}Ac.INSTANCES=new WeakMap;class Co{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ch(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Co(t,new Tn(t._delegate,r,new Ue(e)))}static forKey(e,t,r){return new Co(t,new Tn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sc(this.firestore,Yf(this._delegate,e))}catch(t){throw Di(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.m9)(e))instanceof Tn&&Iw(this._delegate,e)}set(e,t){t=rp("DocumentReference.set",t);try{return t?qD(this._delegate,e,t):qD(this._delegate,e)}catch(r){throw Di(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?qw(this._delegate,e):qw(this._delegate,e,t,...r)}catch(o){throw Di(o,"updateDoc()","DocumentReference.update()")}}delete(){return function zD(n){return np(zt(n.firestore,Nn),[new Nd(n._key,gr.none())])}(this._delegate)}onSnapshot(...e){const t=Kw(e),r=Yw(e,o=>new dh(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return zw(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function RT(n){n=zt(n,Tn);const e=zt(n.firestore,Nn),t=Qn(e),r=new Ju(e);return function mw(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(o,u,h){try{const m=yield function(w,C){const M=ze(w);return M.persistence.runTransaction("read document","readonly",N=>M.ci.Ls(N,C))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Ae(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=yc(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield hv(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ya(e,r,n._key,o,new Dc(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Nv(n){n=zt(n,Tn);const e=zt(n.firestore,Nn);return gv(Qn(e),n._key,{source:"server"}).then(t=>Zw(e,n,t))}(this._delegate):function Hw(n){n=zt(n,Tn);const e=zt(n.firestore,Nn);return gv(Qn(e),n._key).then(t=>Zw(e,n,t))}(this._delegate),t.then(r=>new dh(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Co(this.firestore,this._delegate.withConverter(e?Ac.getInstance(this.firestore,e):null))}}function Di(n,e,t){return n.message=n.message.replace(e,t),n}function Kw(n){for(const e of n)if("object"==typeof e&&!xm(e))return e;return{}}function Yw(n,e){var t,r;let o;return o=xm(n[0])?n[0]:xm(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class dh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Co(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Sv(this._delegate,e._delegate)}}class sp extends dh{data(e){const t=this._delegate.data(e);return function Xb(n,e){n||tt()}(void 0!==t),t}}class Ci{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ch(e)}where(e,t,r){try{return new Ci(this.firestore,Qu(this._delegate,function LD(n,e,t){const r=e,o=Av("where",n);return new kw(o,r,t)}(e,t,r)))}catch(o){throw Di(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ci(this.firestore,Qu(this._delegate,function Lw(n,e="asc"){const t=e,r=Av("orderBy",n);return new Fw(r,t)}(e,t)))}catch(r){throw Di(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ci(this.firestore,Qu(this._delegate,function Vw(n){return Io("limit",n),new Mv("limit",n,"F")}(e)))}catch(t){throw Di(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ci(this.firestore,Qu(this._delegate,function VD(n){return Io("limitToLast",n),new Mv("limitToLast",n,"L")}(e)))}catch(t){throw Di(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ci(this.firestore,Qu(this._delegate,function AT(...n){return new Uw("startAt",n,!0)}(...e)))}catch(t){throw Di(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ci(this.firestore,Qu(this._delegate,function Bw(...n){return new Uw("startAfter",n,!1)}(...e)))}catch(t){throw Di(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ci(this.firestore,Qu(this._delegate,function ST(...n){return new UD("endBefore",n,!1)}(...e)))}catch(t){throw Di(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ci(this.firestore,Qu(this._delegate,function xT(...n){return new UD("endAt",n,!0)}(...e)))}catch(t){throw Di(t,"endAt()","Query.endAt()")}}isEqual(e){return _v(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GD(n){n=zt(n,ci);const e=zt(n.firestore,Nn),t=Qn(e),r=new Ju(e);return function yw(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(o,u,h){try{const m=yield qg(o,u,!0),w=new q_(u,m.li),C=w.Gu(m.documents),M=w.applyChanges(C,!1);h.resolve(M.snapshot)}catch(m){const w=yc(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield hv(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Qa(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function Gw(n){n=zt(n,ci);const e=zt(n.firestore,Nn),t=Qn(e),r=new Ju(e);return mv(t,n._query,{source:"server"}).then(o=>new Qa(e,r,n,o))}(this._delegate):function $w(n){n=zt(n,ci);const e=zt(n.firestore,Nn),t=Qn(e),r=new Ju(e);return xv(n._query),mv(t,n._query).then(o=>new Qa(e,r,n,o))}(this._delegate),t.then(r=>new op(this.firestore,new Qa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Kw(e),r=Yw(e,o=>new op(this.firestore,new Qa(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return zw(this._delegate,t,r)}withConverter(e){return new Ci(this.firestore,this._delegate.withConverter(e?Ac.getInstance(this.firestore,e):null))}}class kT{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class op{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ci(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kT(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sp(this._firestore,r))})}isEqual(e){return Sv(this._delegate,e._delegate)}}class Sc extends Ci{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Co(this.firestore,e):null}doc(e){try{return new Co(this.firestore,void 0===e?wm(this._delegate):wm(this._delegate,e))}catch(t){throw Di(t,"doc()","CollectionReference.doc()")}}add(e){return function Ov(n,e){const t=zt(n.firestore,Nn),r=wm(n),o=Cc(n.converter,e);return np(t,[Yu(uh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Co(this.firestore,t))}isEqual(e){return Iw(this._delegate,e._delegate)}withConverter(e){return new Sc(this.firestore,this._delegate.withConverter(e?Ac.getInstance(this.firestore,e):null))}}function xc(n){return zt(n,Tn)}class Uv{constructor(...e){this._delegate=new ra(...e)}static documentId(){return new Uv(Pr.keyField().canonicalString())}isEqual(e){return(e=(0,Et.m9)(e))instanceof ra&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function OT(){return new Iv("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xu(e)}static delete(){const e=function KD(){return new Jf("deleteField")}();return e._methodName="FieldValue.delete",new Xu(e)}static arrayUnion(...e){const t=function YD(...n){return new Nw("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xu(t)}static arrayRemove(...e){const t=function Pv(...n){return new OD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xu(t)}static increment(e){const t=function QD(n){return new PD("increment",n)}(e);return t._methodName="FieldValue.increment",new Xu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Bv={Firestore:Ww,GeoPoint:bm,Timestamp:Bn,Blob:ip,Transaction:Lv,WriteBatch:Vv,DocumentReference:Co,DocumentSnapshot:dh,Query:Ci,QueryDocumentSnapshot:sp,QuerySnapshot:op,CollectionReference:Sc,FieldPath:Uv,FieldValue:Xu,setLogLevel:function Tc(n){!function uT(n){Zo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Qw(n){(function jv(n,e){n.INTERNAL.registerComponent(new Tu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Bv)))})(n,(e,t)=>new Ww(e,t,new tC)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(id.Z);var el=k(7579),Jw=k(6451),ap=k(5363),Mm=k(8421);function Ti(n,e){return(0,Rr.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,Mt.x)(r,w=>{null==o||o.unsubscribe();let C=0;const M=u++;(0,Mm.Xf)(n(w,M)).subscribe(o=(0,Mt.x)(r,N=>r.next(e?e(w,N,M,C++):N),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var FT=k(6063);class LT extends el.x{constructor(e=1/0,t=1/0,r=FT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var Xw=k(3099);function eb(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Xw.B)({connector:()=>new LT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Rm=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var tb=k(5698);function rC(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,Mt.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function iC(n=VT){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,Mt.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function VT(){return new Rm}function hh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ri((o,u)=>n(o,u,r)):oo.y,(0,tb.q)(1),t?rC(e):iC(()=>new Rm))}function nb(n,e){return(0,Js.m)(e)?Ti(()=>n,e):Ti(()=>n)}var fh=k(9468);k(5867);const ab=new Map,oC={activated:!1,tokenObservers:[]},ub={initialized:!1,enabled:!1};function Sr(n){return ab.get(n)||oC}function Vs(n,e){ab.set(n,e)}function Om(){return ub}class aC{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,le.Z)(function*(){t.stop();try{t.pending=new Et.BH,yield function uC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Et.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $i=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function cb(n){if(!Sr(n).activated)throw $i.create("use-before-activation",{appName:n.name})}function hb(n,e){return fb.apply(this,arguments)}function fb(){return fb=(0,le.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(N){throw $i.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw $i.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(N){throw $i.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),M=Date.now();return{token:m.token,expireTimeMillis:M+C,issuedAtTimeMillis:M}}),fb.apply(this,arguments)}function zT(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const i="firebase-app-check-store";let a=null;function l(){return a||(a=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e($i.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(i,{keyPath:"compositeKey"})}}catch(t){e($i.create("storage-open",{originalErrorMessage:t.message}))}}),a)}function A(){return A=(0,le.Z)(function*(n,e){const r=(yield l()).transaction(i,"readwrite"),u=r.objectStore(i).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var C;m($i.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),A.apply(this,arguments)}const z=new ki.Yd("@firebase/app-check");function Be(n,e){return(0,Et.hl)()?function g(n,e){return function b(n,e){return A.apply(this,arguments)}(function V(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{z.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ct(){return Om().enabled}function Gt(){return un.apply(this,arguments)}function un(){return un=(0,le.Z)(function*(){const n=Om();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),un.apply(this,arguments)}const Mc={error:"UNKNOWN_ERROR"};function Yv(n){return Et.US.encodeString(JSON.stringify(n),!1)}function gh(n){return lp.apply(this,arguments)}function lp(){return lp=(0,le.Z)(function*(n,e=!1){const t=n.app;cb(t);const r=Sr(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&mh(w)&&(o=w)}if(!e&&o&&mh(o))return{token:o.token};let m,h=!1;if(ct()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hb(zT(t,yield Gt()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const w=yield r.exchangeTokenPromise;return yield Be(t,w),Vs(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?z.warn(w.message):z.error(w),u=w}return o?(m={token:o.token},Vs(t,Object.assign(Object.assign({},r),{token:o})),yield Be(t,o)):m=$x(u),h&&Fm(t,m),m}),lp.apply(this,arguments)}function dp(n,e){const t=Sr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Vs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function km(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function Qv(n){const{app:e}=n;return new aC((0,le.Z)(function*(){let r;if(r=Sr(e).token?yield gh(n,!0):yield gh(n),r.error)throw r.error}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Vs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Fm(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function mh(n){return n.expireTimeMillis-Date.now()>0}function $x(n){return{token:Yv(Mc),error:n}}class Gx{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)dp(this.app,t.next);return Promise.resolve()}}const nA="app-check-internal";!function iM(){(0,Pi._registerComponent)(new Tu.wA("app-check",n=>function qx(n,e){return new Gx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nA).initialize()})),(0,Pi._registerComponent)(new Tu.wA(nA,n=>function zx(n){return{getToken:e=>gh(n,e),addTokenListener:e=>function cp(n,e,t,r){const{app:o}=n,u=Sr(o),h={next:t,error:r,type:e};if(Vs(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&mh(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),km(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>km(n))}(n,"INTERNAL",e),removeTokenListener:e=>dp(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pi.registerVersion)("@firebase/app-check","0.5.7")}();class fC{constructor(){return(0,Zn.vb)("app-check")}}"undefined"!=typeof window&&window;var lM=k(127);const iA=new d.OlP("angularfire2.auth.use-emulator"),sA=new d.OlP("angularfire2.auth.settings"),oA=new d.OlP("angularfire2.auth.tenant-id"),aA=new d.OlP("angularfire2.auth.langugage-code"),uA=new d.OlP("angularfire2.auth.use-device-language"),lA=new d.OlP("angularfire.auth.persistence"),cA=(n,e,t,r,o,u,h,m)=>(0,fn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),h)for(const[C,M]of Object.entries(h))w.settings[C]=M;return m&&w.setPersistence(m),w},[t,r,o,u,h,m]);let dA=(()=>{class n{constructor(t,r,o,u,h,m,w,C,M,N,H,G){const ee=new el.x,Re=ht(void 0).pipe((0,ap.Q)(h.outsideAngular),Ti(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,dt.U)(()=>(0,fn.on)(t,u,r)),(0,dt.U)(nt=>cA(nt,u,m,C,M,N,w,H)),eb({bufferSize:1,refCount:!1}));if(ur(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{Re.pipe(hh()).subscribe();const vt=Re.pipe(Ti(Rt=>Rt.getRedirectResult().then(Qt=>Qt,()=>null)),Zn.iC,eb({bufferSize:1,refCount:!1})),Lt=Re.pipe(Ti(Rt=>new qn.y(Qt=>({unsubscribe:u.runOutsideAngular(()=>Rt.onAuthStateChanged(pn=>Qt.next(pn),pn=>Qt.error(pn),()=>Qt.complete()))})))),Zt=Re.pipe(Ti(Rt=>new qn.y(Qt=>({unsubscribe:u.runOutsideAngular(()=>Rt.onIdTokenChanged(pn=>Qt.next(pn),pn=>Qt.error(pn),()=>Qt.complete()))}))));this.authState=vt.pipe(nb(Lt),(0,fh.R)(h.outsideAngular),(0,ap.Q)(h.insideAngular)),this.user=vt.pipe(nb(Zt),(0,fh.R)(h.outsideAngular),(0,ap.Q)(h.insideAngular)),this.idToken=this.user.pipe(Ti(Rt=>Rt?(0,Ft.D)(Rt.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(Ti(Rt=>Rt?(0,Ft.D)(Rt.getIdTokenResult()):ht(null))),this.credential=(0,Jw.T)(vt,ee,this.authState.pipe(Ri(Rt=>!Rt))).pipe((0,dt.U)(Rt=>(null==Rt?void 0:Rt.user)?Rt:null),(0,fh.R)(h.outsideAngular),(0,ap.Q)(h.insideAngular))}return(0,fn.pX)(this,Re,u,{spy:{apply:(nt,vt,Lt)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&Lt.then(Zt=>ee.next(Zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fn.Dh),d.LFG(fn.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Zn.HU),d.LFG(iA,8),d.LFG(sA,8),d.LFG(oA,8),d.LFG(aA,8),d.LFG(uA,8),d.LFG(lA,8),d.LFG(fC,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hA(n,e){return function dM(n,e=ri.z){return new qn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function gC(n,e){return hA(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function gb(n,e){return gC(n,e).pipe(xs(void 0),Da(),(0,dt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(M=>M.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function fA(n,e,t){return gb(n,t).pipe(Vo((r,o)=>function fM(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function pM(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Hr(n,e=oo.y){return n=null!=n?n:rd,(0,Rr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Mt.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,dt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function mC(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function pA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(xs(void 0),Da(),Ri(([r,o])=>o.length>0||!r),(0,dt.U)(([r,o])=>o),Zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pA(e);return fA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return gC(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Zn.iC)}get(e){return(0,Ft.D)(this.query.get(e)).pipe(Zn.iC)}add(e){return this.ref.add(e)}doc(e){return new mA(this.ref.doc(e),this.afs)}}class mA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=vA(r,t);return new gA(o,u,this.afs)}snapshotChanges(){return function hM(n,e){return hA(n,e).pipe(xs(void 0),Da(),(0,dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ft.D)(this.ref.get(e)).pipe(Zn.iC)}}class gM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gb(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ri(t=>t.length>0),Zn.iC):gb(this.query,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pA(e);return fA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return gC(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Zn.iC)}get(e){return(0,Ft.D)(this.query.get(e)).pipe(Zn.iC)}}const yA=new d.OlP("angularfire2.enableFirestorePersistence"),_A=new d.OlP("angularfire2.firestore.persistenceSettings"),mM=new d.OlP("angularfire2.firestore.settings"),yM=new d.OlP("angularfire2.firestore.use-emulator");function vA(n,e=(t=>t)){return{query:e(n),ref:n}}let EA=(()=>{class n{constructor(t,r,o,u,h,m,w,C,M,N,H,G,ee,Re,nt,vt,Lt){this.schedulers=w;const Zt=(0,fn.on)(t,m,r),Rt=M;N&&cA(Zt,m,H,ee,Re,nt,G,vt),[this.firestore,this.persistenceEnabled$]=(0,fn.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const Qt=m.runOutsideAngular(()=>Zt.firestore());if(u&&Qt.settings(u),Rt&&Qt.useEmulator(...Rt),o&&!ur(h)){const pn=()=>{try{return(0,Ft.D)(Qt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(qi){return"undefined"!=typeof console&&console.warn(qi),ht(!1)}};return[Qt,m.runOutsideAngular(pn)]}return[Qt,ht(!1)]},[u,Rt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=vA(o,r),m=this.schedulers.ngZone.run(()=>u);return new gA(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new gM(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new mA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fn.Dh),d.LFG(fn.xv,8),d.LFG(yA,8),d.LFG(mM,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Zn.HU),d.LFG(_A,8),d.LFG(yM,8),d.LFG(dA,8),d.LFG(iA,8),d.LFG(sA,8),d.LFG(oA,8),d.LFG(aA,8),d.LFG(uA,8),d.LFG(lA,8),d.LFG(fC,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_M=(()=>{class n{constructor(){lM.Z.registerVersion("angularfire",Zn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yA,useValue:!0},{provide:_A,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[EA]}),n})();const{isArray:vM}=Array,{getPrototypeOf:EM,prototype:wM,keys:bM}=Object;function wA(n){if(1===n.length){const e=n[0];if(vM(e))return{args:e,keys:null};if(function IM(n){return n&&"object"==typeof n&&EM(n)===wM}(e)){const t=bM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:DM}=Array;function bA(n){return(0,dt.U)(e=>function CM(n,e){return DM(e)?n(...e):n(e)}(n,e))}function IA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let DA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),hp=(()=>{class n extends DA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const tl=new d.OlP("NgValueAccessor"),SM={provide:tl,useExisting:(0,d.Gpc)(()=>Jv),multi:!0},MM=new d.OlP("CompositionEventMode");let Jv=(()=>{class n extends DA{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xM(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(MM,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([SM]),d.qOj]}),n})();const Gi=new d.OlP("NgValidators"),_h=new d.OlP("NgAsyncValidators");function xA(n){return function yh(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function mb(n){return null}function kA(n){return null!=n}function FA(n){const e=(0,d.QGY)(n)?(0,Ft.D)(n):n;return(0,d.CqO)(e),e}function LA(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function VA(n,e){return e.map(t=>t(n))}function UA(n){return n.map(e=>function NM(n){return!n.validate}(e)?e:t=>e.validate(t))}function yC(n){return null!=n?function BA(n){if(!n)return null;const e=n.filter(kA);return 0==e.length?null:function(t){return LA(VA(t,e))}}(UA(n)):null}function _C(n){return null!=n?function jA(n){if(!n)return null;const e=n.filter(kA);return 0==e.length?null:function(t){return function TM(...n){const e=(0,Eu.jO)(n),{args:t,keys:r}=wA(n),o=new qn.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,C=h;for(let M=0;M<h;M++){let N=!1;(0,Mm.Xf)(t[M]).subscribe((0,Mt.x)(u,H=>{N||(N=!0,C--),m[M]=H},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?IA(r,m):m),u.complete())}))}});return e?o.pipe(bA(e)):o}(VA(t,e).map(FA)).pipe((0,dt.U)(LA))}}(UA(n)):null}function HA(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $A(n){return n._rawValidators}function GA(n){return n._rawAsyncValidators}function vC(n){return n?Array.isArray(n)?n:[n]:[]}function yb(n,e){return Array.isArray(n)?n.includes(e):n===e}function qA(n,e){const t=vC(e);return vC(n).forEach(o=>{yb(t,o)||t.push(o)}),t}function zA(n,e){return vC(e).filter(t=>!yb(n,t))}class ZA{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_C(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vh extends ZA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ls extends ZA{get formDirective(){return null}get path(){return null}}class WA{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let EC=(()=>{class n extends WA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vh,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),_b=(()=>{class n extends WA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ls,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Xv(n,e){IC(n,e),e.valueAccessor.writeValue(n.value),function BM(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&YA(n,e)})}(n,e),function HM(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function jM(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&YA(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function UM(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wb(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ib(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function bb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function IC(n,e){const t=$A(n);null!==e.validator?n.setValidators(HA(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=GA(n);null!==e.asyncValidator?n.setAsyncValidators(HA(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();bb(e._rawValidators,o),bb(e._rawAsyncValidators,o)}function Ib(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=$A(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=GA(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return bb(e._rawValidators,r),bb(e._rawAsyncValidators,r),t}function YA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function QA(n,e){IC(n,e)}function XA(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function TC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const e0="VALID",Db="INVALID",Lm="PENDING",t0="DISABLED";function SC(n){return(Cb(n)?n.validators:n)||null}function eS(n){return Array.isArray(n)?yC(n):n||null}function xC(n,e){return(Cb(e)?e.asyncValidators:n)||null}function tS(n){return Array.isArray(n)?_C(n):n||null}function Cb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const MC=n=>n instanceof NC,Tb=n=>n instanceof Ab,nS=n=>n instanceof oS;function rS(n){return MC(n)?n.value:n.getRawValue()}function iS(n,e){const t=Tb(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function sS(n,e){Tb(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class RC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=eS(this._rawValidators),this._composedAsyncValidatorFn=tS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===e0}get invalid(){return this.status===Db}get pending(){return this.status==Lm}get disabled(){return this.status===t0}get enabled(){return this.status!==t0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=eS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tS(e)}addValidators(e){this.setValidators(qA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zA(e,this._rawAsyncValidators))}hasValidator(e){return yb(this._rawValidators,e)}hasAsyncValidator(e){return yb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=t0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=e0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===e0||this.status===Lm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?t0:e0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lm,this._hasOwnPendingAsyncValidator=!0;const t=FA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function zM(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Tb(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:nS(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?t0:this.errors?Db:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lm)?Lm:this._anyControlsHaveStatus(Db)?Db:e0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class NC extends RC{constructor(e=null,t,r){super(SC(t),xC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cb(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ab extends RC{constructor(e,t,r){super(SC(t),xC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sS(this,e),Object.keys(e).forEach(r=>{iS(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=rS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class oS extends RC{constructor(e,t,r){super(SC(t),xC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){sS(this,e),e.forEach((r,o)=>{iS(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>rS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const ZM={provide:ls,useExisting:(0,d.Gpc)(()=>Sb)},n0=(()=>Promise.resolve(null))();let Sb=(()=>{class n extends ls{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Ab({},yC(t),_C(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){n0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Xv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){n0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){n0.then(()=>{const r=this._findContainer(t.path),o=new Ab({});QA(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){n0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){n0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,XA(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Gi,10),d.Y36(_h,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([ZM]),d.qOj]}),n})(),xb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const YM={provide:tl,useExisting:(0,d.Gpc)(()=>Mb),multi:!0};let Mb=(()=>{class n extends hp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([YM]),d.qOj]}),n})(),dS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const OC=new d.OlP("NgModelWithFormControlWarning"),tR={provide:ls,useExisting:(0,d.Gpc)(()=>r0)};let r0=(()=>{class n extends ls{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ib(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Xv(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){wb(t.control||null,t,!1),TC(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,XA(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(wb(r||null,t),MC(o)&&(Xv(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);QA(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $M(n,e){return Ib(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IC(this.form,this),this._oldForm&&Ib(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Gi,10),d.Y36(_h,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([tR]),d.qOj,d.TTD]}),n})();const iR={provide:vh,useExisting:(0,d.Gpc)(()=>Rb)};let Rb=(()=>{class n extends vh{constructor(t,r,o,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function CC(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Jv?t=u:function qM(n){return Object.getPrototypeOf(n.constructor)===hp}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function DC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Eb(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(ls,13),d.Y36(Gi,10),d.Y36(_h,10),d.Y36(tl,10),d.Y36(OC,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([iR]),d.qOj,d.TTD]}),n})();const sR={provide:tl,useExisting:(0,d.Gpc)(()=>s0),multi:!0};function mS(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let s0=(()=>{class n extends hp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=mS(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function oR(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([sR]),d.qOj]}),n})(),FC=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(mS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(s0,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const aR={provide:tl,useExisting:(0,d.Gpc)(()=>LC),multi:!0};function yS(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let LC=(()=>{class n extends hp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,h)=>{u._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const h=u;for(let m=0;m<h.length;m++){const C=this._getOptionValue(h[m].value);o.push(C)}}else{const h=r.options;for(let m=0;m<h.length;m++){const w=h[m];if(w.selected){const C=this._getOptionValue(w.value);o.push(C)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function uR(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([aR]),d.qOj]}),n})(),VC=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(yS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yS(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(LC,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),fp=(()=>{class n{constructor(){this._validator=mb}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):mb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const hR={provide:Gi,useExisting:(0,d.Gpc)(()=>o0),multi:!0};let o0=(()=>{class n extends fp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function lR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>xA}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([hR]),d.qOj]}),n})(),AS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[dS]]}),n})(),_R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[AS]}),n})(),SS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:OC,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[AS]}),n})(),xS=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,h=null;return null!=r&&(function vR(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new Ab(o,{asyncValidators:h,updateOn:m,validators:u})}control(t,r,o){return new NC(t,r,o)}array(t,r,o){const u=t.map(h=>this._createControl(h));return new oS(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return MC(t)||Tb(t)||nS(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:SS}),n})(),Nb=(()=>{class n{constructor(t){this.db=t}alta(t,r){var o=this;return(0,le.Z)(function*(){try{return yield o.db.collection(r).add(t)}catch(u){return console.log("Error al realizar alta a Firebase: ",u),u}})()}baja(t,r){var o=this;return(0,le.Z)(function*(){try{return yield o.db.collection(r).doc(t).delete()}catch(u){return console.log("Error al realizar baja a Firebase: ",u),u}})()}getCollection(t){var r=this;return(0,le.Z)(function*(){try{return yield r.db.collection(t).snapshotChanges()}catch(o){return console.log("Error al obtener los objetos de Firebase: ",o),o}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(EA))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ER(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ul",5)(1,"li",6),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().getActorSeleccionado(u)}),d.TgZ(2,"div")(3,"h6",7),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.qZA()(),d.TgZ(7,"small",2),d._uU(8),d.qZA()()()()}if(2&n){const t=e.$implicit;d.xp6(4),d.hij("",t.nombre," "),d.xp6(2),d.Oqu(t.apellido),d.xp6(2),d.Oqu(t.edad)}}let wR=(()=>{class n{constructor(t){this.srv=t,this.actores=[],this.actorSeleccionado=new d.vpe}ngOnInit(){this.srv.getCollection("Actor").then(t=>t.subscribe(r=>{r.forEach(o=>{this.actores.push(o.payload.doc.data())})}))}getActorSeleccionado(t){this.actorSeleccionado.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Nb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-listado"]],outputs:{actorSeleccionado:"actorSeleccionado"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"col","listaPaises"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","paisContainer",3,"click"],[1,"my-0"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),d._uU(3,"Actores"),d.qZA()(),d.TgZ(4,"div",3),d.YNc(5,ER,9,3,"ul",4),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.actores))},directives:[Pn],styles:[""]}),n})(),bR=(()=>{class n{constructor(t,r){this.fb=t,this.srv=r,this.peliculaGroup=this.fb.group({nombre:"",tipo:"",cantidadPublico:"",fechaEstreno:"",fotoPelicula:"",actor:""})}ngOnInit(){}obtenerActorSeleccionado(t){this.actor=t,this.peliculaGroup.controls.actor.setValue(t.nombre+" "+t.apellido)}altaPelicula(){var t=this;return(0,le.Z)(function*(){let r=t.peliculaGroup.value;(yield t.srv.alta(r,"peliculas"))&&t.peliculaGroup.reset()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xS),d.Y36(Nb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-alta"]],decls:81,vars:1,consts:[[1,"container","mt-6"],[1,"py-5","text-center"],["src","../../../assets/1f37f.png","alt","","width","100","height","100",1,"d-block","mx-auto","mb-4"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"actorSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"col-md-12","mb-3"],["for","nombre"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre","required","",1,"form-control"],[1,"invalid-feedback"],["for","apellido"],["id","tipo","formControlName","tipo","required","",1,"custom-select","d-block","w-100"],["value",""],["value","terror"],["value","cienciaFiccion"],["value","romantica"],["value","drama"],["value","otro"],[1,"col-md-6","mb-3"],["for","cantidadPublico"],["type","number","id","cantidadPublico","formControlName","cantidadPublico","required","",1,"form-control"],["for","fechaEstreno"],[1,"input-group"],["type","date","id","fechaEstreno","formControlName","fechaEstreno","required","",1,"form-control"],[1,"invalid-feedback",2,"width","100%"],["for","actor"],["type","text","id","actor","placeholder","Ingrese un actor","formControlName","actor","required","","readonly","",1,"form-control"],["for","fotoPelicula"],["type","text","id","fotoPelicula","placeholder","Ingrese un link con la foto de la pel\xedcula (momentaneo)","formControlName","fotoPelicula","required","",1,"form-control"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h2"),d._uU(4,"Alta Pel\xedculas"),d.qZA()(),d.TgZ(5,"div",3)(6,"div",4)(7,"app-actor-listado",5),d.NdJ("actorSeleccionado",function(u){return r.obtenerActorSeleccionado(u)}),d.qZA()(),d.TgZ(8,"div",6)(9,"h4",7),d._uU(10,"Nueva pel\xedcula"),d.qZA(),d.TgZ(11,"form",8),d.NdJ("submit",function(){return r.altaPelicula()}),d.TgZ(12,"div",3)(13,"div",9)(14,"label",10),d._uU(15,"Nombre"),d.qZA(),d._UZ(16,"input",11),d.TgZ(17,"div",12),d._uU(18," Valid first name is required. "),d.qZA()(),d.TgZ(19,"div",9)(20,"label",13),d._uU(21,"Tipo"),d.qZA(),d.TgZ(22,"select",14)(23,"option",15),d._uU(24,"Elegir..."),d.qZA(),d.TgZ(25,"option",16),d._uU(26,"Terror"),d.qZA(),d.TgZ(27,"option",17),d._uU(28,"Ciencia ficci\xf3n"),d.qZA(),d.TgZ(29,"option",18),d._uU(30,"Rom\xe1ntica"),d.qZA(),d.TgZ(31,"option",19),d._uU(32,"Drama"),d.qZA(),d.TgZ(33,"option",19),d._uU(34,"Infantil"),d.qZA(),d.TgZ(35,"option",20),d._uU(36,"Otro"),d.qZA()(),d.TgZ(37,"div",12),d._uU(38," Por favor seleccionar uno. "),d.qZA()()(),d.TgZ(39,"div",3)(40,"div",21)(41,"label",22),d._uU(42,"Cantidad de p\xfablico"),d.qZA(),d._UZ(43,"input",23),d.TgZ(44,"div",12),d._uU(45," Por favor seleccionar uno. "),d.qZA()(),d.TgZ(46,"div",21)(47,"label",24),d._uU(48,"Fecha de Estreno"),d.qZA(),d.TgZ(49,"div",25),d._UZ(50,"input",26),d.TgZ(51,"div",27),d._uU(52," Your username is required. "),d.qZA()()()(),d.TgZ(53,"div",7)(54,"label",28),d._uU(55,"Actor"),d.qZA(),d._UZ(56,"input",29),d.TgZ(57,"div",12),d._uU(58," Por favor ingrese un pa\xeds. "),d.qZA()(),d.TgZ(59,"div",7)(60,"label",30),d._uU(61,"Flyer"),d.qZA(),d._UZ(62,"input",31),d.TgZ(63,"div",12),d._uU(64," Por favor ingrese un pa\xeds. "),d.qZA()(),d._UZ(65,"hr",32),d.TgZ(66,"button",33),d._uU(67,"ALTA"),d.qZA()()()(),d.TgZ(68,"footer",34)(69,"p",35),d._uU(70,"\xa9 2017-2020 Company Name"),d.qZA(),d.TgZ(71,"ul",36)(72,"li",37)(73,"a",38),d._uU(74,"Privacy"),d.qZA()(),d.TgZ(75,"li",37)(76,"a",38),d._uU(77,"Terms"),d.qZA()(),d.TgZ(78,"li",37)(79,"a",38),d._uU(80,"Support"),d.qZA()()()()()),2&t&&(d.xp6(11),d.Q6J("formGroup",r.peliculaGroup))},directives:[wR,xb,_b,r0,Jv,EC,Rb,o0,s0,FC,VC,Mb],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin-top:1rem}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}"]}),n})();class Ja extends el.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var IR=k(9672);function MS(n,e,t){n?(0,IR.f)(t,n,e):e()}function Ob(n,e){const t=(0,Js.m)(n)?n:()=>n,r=o=>o.error(t());return new qn.y(e?o=>e.schedule(r,0,o):r)}function RS(n){return new qn.y(e=>{(0,Mm.Xf)(n()).subscribe(e)})}var Vm=k(515),NS=k(727);function OS(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Mt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class TR extends qn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new NS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Mt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=NS.w0.EMPTY)}return e}refCount(){return OS()(this)}}function Eh(n){return(0,Rr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Mt.x)(t,void 0,void 0,h=>{u=(0,Mm.Xf)(n(h,Eh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function UC(n){return n<=0?()=>Vm.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,Mt.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var To=k(8505);class Rc{constructor(e,t){this.id=e,this.url=t}}class BC extends Rc{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class a0 extends Rc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class PS extends Rc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xR extends Rc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class MR extends Rc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RR extends Rc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NR extends Rc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class OR extends Rc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PR extends Rc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kR{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FR{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LR{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VR{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class UR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Um(n){return new UR(n)}const VS="ngNavigationCancelingError";function jC(n){const e=Error("NavigationCancelingError: "+n);return e[VS]=!0,e}function jR(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function nl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!US(n[o],e[o]))return!1;return!0}function US(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function BS(n){return Array.prototype.concat.apply([],n)}function jS(n){return n.length>0?n[n.length-1]:null}function Ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rl(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Ft.D)(Promise.resolve(n)):ht(n)}const GR={exact:function GS(n,e,t){if(!gp(n.segments,e.segments)||!Pb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!GS(n.children[r],e.children[r],t))return!1;return!0},subset:qS},HS={exact:function qR(n,e){return nl(n,e)},subset:function zR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>US(n[t],e[t]))},ignored:()=>!0};function $S(n,e,t){return GR[t.paths](n.root,e.root,t.matrixParams)&&HS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function qS(n,e,t){return zS(n,e,e.segments,t)}function zS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!gp(o,t)||e.hasChildren()||!Pb(o,t,r))}if(n.segments.length===t.length){if(!gp(n.segments,t)||!Pb(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!qS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(gp(n.segments,o)&&Pb(n.segments,o,r)&&n.children[Yt])&&zS(n.children[Yt],e,u,r)}}function Pb(n,e,t){return e.every((r,o)=>HS[t](n[o].parameters,r.parameters))}class pp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Um(this.queryParams)),this._queryParamMap}toString(){return KR.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ai(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kb(this)}}class u0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Um(this.parameters)),this._parameterMap}toString(){return QS(this)}}function gp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ZS{}class WS{parse(e){const t=new iN(e);return new pp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${l0(e.root,!0)}`,r=function JR(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fb(t)}=${Fb(o)}`).join("&"):`${Fb(t)}=${Fb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function YR(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const KR=new WS;function kb(n){return n.segments.map(e=>QS(e)).join("/")}function l0(n,e){if(!n.hasChildren())return kb(n);if(e){const t=n.children[Yt]?l0(n.children[Yt],!1):"",r=[];return Ai(n.children,(o,u)=>{u!==Yt&&r.push(`${u}:${l0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function WR(n,e){let t=[];return Ai(n.children,(r,o)=>{o===Yt&&(t=t.concat(e(r,o)))}),Ai(n.children,(r,o)=>{o!==Yt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Yt?[l0(n.children[Yt],!1)]:[`${o}:${l0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${kb(n)}/${t[0]}`:`${kb(n)}/(${t.join("//")})`}}function KS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fb(n){return KS(n).replace(/%3B/gi,";")}function HC(n){return KS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lb(n){return decodeURIComponent(n)}function YS(n){return Lb(n.replace(/\+/g,"%20"))}function QS(n){return`${HC(n.path)}${function QR(n){return Object.keys(n).map(e=>`;${HC(e)}=${HC(n[e])}`).join("")}(n.parameters)}`}const XR=/^[^\/()?;=#]+/;function Vb(n){const e=n.match(XR);return e?e[0]:""}const eN=/^[^=?&#]+/,nN=/^[^&#]+/;class iN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new en(e,t)),r}parseSegment(){const e=Vb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new u0(Lb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Vb(this.remaining);o&&(r=o,this.capture(r))}e[Lb(t)]=Lb(r)}parseQueryParam(e){const t=function tN(n){const e=n.match(eN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function rN(n){const e=n.match(nN);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=YS(t),u=YS(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vb(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Yt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Yt]:new en([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class JS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$C(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$C(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=GC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return GC(e,this._root).map(t=>t.value)}}function $C(n,e){if(n===e.value)return e;for(const t of e.children){const r=$C(n,t);if(r)return r}return null}function GC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=GC(n,t);if(r.length)return r.unshift(e),r}return[]}class Nc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class XS extends JS{constructor(e,t){super(e),this.snapshot=t,qC(this,e)}toString(){return this.snapshot.toString()}}function ex(n,e){const t=function sN(n,e){const h=new Ub([],{},{},"",{},Yt,e,null,n.root,-1,{});return new nx("",new Nc(h,[]))}(n,e),r=new Ja([new u0("",{})]),o=new Ja({}),u=new Ja({}),h=new Ja({}),m=new Ja(""),w=new jm(r,o,h,m,u,Yt,e,t.root);return w.snapshot=t.root,new XS(new Nc(w,[]),t)}class jm{constructor(e,t,r,o,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>Um(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>Um(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function oN(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ub{constructor(e,t,r,o,u,h,m,w,C,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Um(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Um(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nx extends JS{constructor(e,t){super(t),this.url=e,qC(this,t)}toString(){return rx(this._root)}}function qC(n,e){e.value._routerState=n,e.children.forEach(t=>qC(n,t))}function rx(n){const e=n.children.length>0?` { ${n.children.map(rx).join(", ")} } `:"";return`${n.value}${e}`}function zC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),nl(e.params,t.params)||n.params.next(t.params),function HR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),nl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ZC(n,e){const t=nl(n.params,e.params)&&function ZR(n,e){return gp(n,e)&&n.every((t,r)=>nl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ZC(n.parent,e.parent))}function c0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function uN(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return c0(n,r,o);return c0(n,r)})}(n,e,t);return new Nc(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>c0(n,m)),h}}const r=function lN(n){return new jm(new Ja(n.url),new Ja(n.params),new Ja(n.queryParams),new Ja(n.fragment),new Ja(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>c0(n,u));return new Nc(r,o)}}function Bb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function d0(n){return"object"==typeof n&&null!=n&&n.outlets}function WC(n,e,t,r,o){let u={};if(r&&Ai(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new pp(t,u,o);const h=ix(n,e,t);return new pp(h,u,o)}function ix(n,e,t){const r={};return Ai(n.children,(o,u)=>{r[u]=o===e?t:ix(o,e,t)}),new en(n.segments,r)}class sx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bb(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(d0);if(o&&o!==jS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class KC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ox(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return jb(n,e,t);const r=function gN(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(d0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!ux(w,C,h))return u;r+=2}else{if(!ux(w,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new en(n.segments.slice(0,r.pathIndex),{});return u.children[Yt]=new en(n.segments.slice(r.pathIndex),n.children),jb(u,0,o)}return r.match&&0===o.length?new en(n.segments,{}):r.match&&!n.hasChildren()?YC(n,e,t):r.match?jb(n,0,o):YC(n,e,t)}function jb(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function pN(n){return d0(n[0])?n[0].outlets:{[Yt]:n}}(t),o={};return Ai(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=ox(n.children[h],e,u))}),Ai(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new en(n.segments,o)}}function YC(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(d0(u)){const w=mN(u.outlets);return new en(r,w)}if(0===o&&Bb(t[0])){r.push(new u0(n.segments[e].path,ax(t[0]))),o++;continue}const h=d0(u)?u.outlets[Yt]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&Bb(m)?(r.push(new u0(h,ax(m))),o+=2):(r.push(new u0(h,{})),o++)}return new en(r,{})}function mN(n){const e={};return Ai(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=YC(new en([],{}),0,t))}),e}function ax(n){const e={};return Ai(n,(t,r)=>e[r]=`${t}`),e}function ux(n,e,t){return n==t.path&&nl(e,t.parameters)}class _N{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Bm(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Ai(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Bm(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Bm(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Bm(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new VR(u.value.snapshot))}),e.children.length&&this.forwardEvent(new FR(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(zC(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),zC(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function vN(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class QC{constructor(e,t){this.routes=e,this.module=t}}function wh(n){return"function"==typeof n}function mp(n){return n instanceof pp}const h0=Symbol("INITIAL_VALUE");function f0(){return Ti(n=>function DR(...n){const e=(0,Eu.yG)(n),t=(0,Eu.jO)(n),{args:r,keys:o}=wA(n);if(0===r.length)return(0,Ft.D)([],e);const u=new qn.y(function CR(n,e,t=oo.y){return r=>{MS(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)MS(e,()=>{const C=(0,Ft.D)(n[w],e);let M=!1;C.subscribe((0,Mt.x)(r,N=>{u[w]=N,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>IA(o,h):oo.y));return t?u.pipe(bA(t)):u}(n.map(e=>e.pipe((0,tb.q)(1),xs(h0)))).pipe(Vo((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==h0?o:(u===h0&&(r=!0),r||!1!==u&&h!==t.length-1&&!mp(u)?o:u),e)},h0),Ri(e=>e!==h0),(0,dt.U)(e=>mp(e)?e:!0===e),(0,tb.q)(1)))}class CN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new p0,this.attachRef=null}}class p0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new CN,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let JC=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||Yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new TN(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(p0),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class TN{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jm?this.route:e===p0?this.childContexts:this.parent.get(e,t)}}let lx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[JC],encapsulation:2}),n})();function cx(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];AN(r,SN(e,r))}}function AN(n,e){n.children&&cx(n.children,e)}function SN(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function XC(n){const e=n.children&&n.children.map(XC),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=lx),t}function aa(n){return n.outlet||Yt}function dx(n,e){const t=n.filter(r=>aa(r)===e);return t.push(...n.filter(r=>aa(r)!==e)),t}const hx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hb(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},hx):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||jR)(t,n,e);if(!u)return Object.assign({},hx);const h={};Ai(u.posParams,(w,C)=>{h[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function $b(n,e,t,r,o="corrected"){if(t.length>0&&function RN(n,e,t){return t.some(r=>Gb(n,e,r)&&aa(r)!==Yt)}(n,t,r)){const h=new en(e,function MN(n,e,t,r){const o={};o[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&aa(u)!==Yt){const h=new en([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[aa(u)]=h}return o}(n,e,r,new en(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function NN(n,e,t){return t.some(r=>Gb(n,e,r))}(n,t,r)){const h=new en(n.segments,function xN(n,e,t,r,o,u){const h={};for(const m of r)if(Gb(n,t,m)&&!o[aa(m)]){const w=new en([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[aa(m)]=w}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new en(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Gb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function fx(n,e,t,r){return!!(aa(n)===r||r!==Yt&&Gb(e,t,n))&&("**"===n.path||Hb(e,n,t).matched)}function px(n,e,t){return 0===e.length&&!n.children[t]}class qb{constructor(e){this.segmentGroup=e||null}}class gx{constructor(e){this.urlTree=e}}function g0(n){return Ob(new qb(n))}function mx(n){return Ob(new gx(n))}function ON(n){return Ob(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class FN{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=$b(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Yt).pipe((0,dt.U)(u=>this.createUrlTree(eT(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Eh(u=>{if(u instanceof gx)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof qb?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Yt).pipe((0,dt.U)(o=>this.createUrlTree(eT(o),e.queryParams,e.fragment))).pipe(Eh(o=>{throw o instanceof qb?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new en([],{[Yt]:e}):e;return new pp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(u=>new en([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Ft.D)(o).pipe(yi(u=>{const h=r.children[u],m=dx(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,dt.U)(w=>({segment:w,outlet:u})))}),Vo((u,h)=>(u[h.outlet]=h.segment,u),{}),function AR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ri((o,u)=>n(o,u,r)):oo.y,UC(1),t?rC(e):iC(()=>new Rm))}())}expandSegment(e,t,r,o,u,h){return(0,Ft.D)(r).pipe(yi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(Eh(C=>{if(C instanceof qb)return ht(null);throw C}))),hh(m=>!!m),Eh((m,w)=>{if(m instanceof Rm||"EmptyError"===m.name)return px(t,o,u)?ht(new en([],{})):g0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return fx(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):g0(t):g0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?mx(u):this.lineralizeSegments(r,u).pipe((0,zn.z)(h=>{const m=new en(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:M}=Hb(t,o,u);if(!m)return g0(t);const N=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?mx(N):this.lineralizeSegments(o,N).pipe((0,zn.z)(H=>this.expandSegment(e,t,r,H.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ht(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,dt.U)(N=>(r._loadedConfig=N,new en(o,{})))):ht(new en(o,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=Hb(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,zn.z)(M=>{const N=M.module,H=M.routes,{segmentGroup:G,slicedSegments:ee}=$b(t,m,w,H),Re=new en(G.segments,G.children);if(0===ee.length&&Re.hasChildren())return this.expandChildren(N,H,Re).pipe((0,dt.U)(Zt=>new en(m,Zt)));if(0===H.length&&0===ee.length)return ht(new en(m,{}));const nt=aa(r)===u;return this.expandSegment(N,Re,H,ee,nt?Yt:u,!0).pipe((0,dt.U)(Lt=>new en(m.concat(Lt.segments),Lt.children)))})):g0(t)}getChildConfig(e,t,r){return t.children?ht(new QC(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ht(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,zn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,dt.U)(u=>(t._loadedConfig=u,u))):function PN(n){return Ob(jC(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ht(new QC([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return ht(!0);const u=o.map(h=>{const m=e.get(h);let w;if(function wN(n){return n&&wh(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!wh(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return rl(w)});return ht(u).pipe(f0(),(0,To.b)(h=>{if(!mp(h))return;const m=jC(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,dt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ht(r);if(o.numberOfChildren>1||!o.children[Yt])return ON(e.redirectTo);o=o.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new pp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ai(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Ai(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new en(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function eT(n){const e={};for(const r of Object.keys(n.children)){const u=eT(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function LN(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class yx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zb{constructor(e,t){this.component=e,this.route=t}}function UN(n,e,t){const r=n._root;return m0(r,e?e._root:null,t,[r.value])}function Zb(n,e,t){const r=function jN(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function m0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Bm(e);return n.children.forEach(h=>{(function HN(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function $N(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gp(n.url,e.url)||!nl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ZC(n,e)||!nl(n.queryParams,e.queryParams);default:return!ZC(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new yx(r)):(u.data=h.data,u._resolvedData=h._resolvedData),m0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new zb(m.outlet.component,h))}else h&&y0(e,m,o),o.canActivateChecks.push(new yx(r)),m0(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Ai(u,(h,m)=>y0(h,t.getContext(m),o)),o}function y0(n,e,t){const r=Bm(n),o=n.value;Ai(r,(u,h)=>{y0(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new zb(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class JN{}function _x(n){return new qn.y(e=>e.error(n))}class eO{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=$b(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Yt);if(null===t)return null;const r=new Ub([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Nc(r,t),u=new nx(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=tx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=dx(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const o=vx(r);return function tO(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return px(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!fx(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const G=r.length>0?jS(r).parameters:{};u=new Ub(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bx(e),aa(e),e.component,e,Ex(t),wx(t)+r.length,Ix(e))}else{const G=Hb(t,e,r);if(!G.matched)return null;h=G.consumedSegments,m=G.remainingSegments,u=new Ub(h,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bx(e),aa(e),e.component,e,Ex(t),wx(t)+h.length,Ix(e))}const w=function nO(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=$b(t,h,m,w.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const G=this.processChildren(w,C);return null===G?null:[new Nc(u,G)]}if(0===w.length&&0===M.length)return[new Nc(u,[])];const N=aa(e)===o,H=this.processSegment(w,C,M,N?Yt:o);return null===H?null:[new Nc(u,H)]}}function rO(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vx(n){const e=[],t=new Set;for(const r of n){if(!rO(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=vx(r.children);e.push(new Nc(r.value,o))}return e.filter(r=>!t.has(r))}function Ex(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function wx(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function bx(n){return n.data||{}}function Ix(n){return n.resolve||{}}function Dx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tT(n){return Ti(e=>{const t=n(e);return t?(0,Ft.D)(t).pipe((0,dt.U)(()=>e)):ht(e)})}class dO extends class cO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const nT=new d.OlP("ROUTES");class Cx{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,dt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new QC(BS(h.injector.get(nT,void 0,d.XFs.Self|d.XFs.Optional)).map(XC),h)}),Eh(u=>{throw t._loader$=void 0,u}));return t._loader$=new TR(o,()=>new el.x).pipe(OS()),t._loader$}loadModuleFactory(e){return rl(e()).pipe((0,zn.z)(t=>t instanceof d.YKP?ht(t):(0,Ft.D)(this.compiler.compileModuleAsync(t))))}}class fO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function pO(n){throw n}function gO(n,e,t){return e.parse("/")}function Tx(n,e){return ht(null)}const mO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ao=(()=>{class n{constructor(t,r,o,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new el.x,this.errorHandler=pO,this.malformedUriErrorHandler=gO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Tx,afterPreactivation:Tx},this.urlHandlingStrategy=new fO,this.routeReuseStrategy=new dO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const N=h.get(d.R0b);this.isNgZoneEnabled=N instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function $R(){return new pp(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Cx(h,m,H=>this.triggerEvent(new kS(H)),H=>this.triggerEvent(new FS(H))),this.routerState=ex(this.currentUrlTree,this.rootComponentType),this.transitions=new Ja({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ri(o=>0!==o.id),(0,dt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ti(o=>{let u=!1,h=!1;return ht(o).pipe((0,To.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ti(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Ax(m.source)&&(this.browserUrlTree=m.extractedUrl),ht(m).pipe(Ti(N=>{const H=this.transitions.getValue();return r.next(new BC(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?Vm.E:Promise.resolve(N)}),function VN(n,e,t,r){return Ti(o=>function kN(n,e,t,r,o){return new FN(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,dt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,To.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function iO(n,e,t,r,o){return(0,zn.z)(u=>function XN(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new eO(n,e,t,r,o,u).recognize();return null===h?_x(new JN):ht(h)}catch(h){return _x(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,dt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,To.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(G,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new MR(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:G,source:ee,restoredState:Re,extras:nt}=m,vt=new BC(H,this.serializeUrl(G),ee,Re);r.next(vt);const Lt=ex(G,this.rootComponentType).snapshot;return ht(Object.assign(Object.assign({},m),{targetSnapshot:Lt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Vm.E}),tT(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:G}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!G})}),(0,To.b)(m=>{const w=new RR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,dt.U)(m=>Object.assign(Object.assign({},m),{guards:UN(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function GN(n,e){return(0,zn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?ht(Object.assign(Object.assign({},t),{guardsResult:!0})):function qN(n,e,t,r){return(0,Ft.D)(n).pipe((0,zn.z)(o=>function QN(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ht(u.map(m=>{const w=Zb(m,e,o);let C;if(function DN(n){return n&&wh(n.canDeactivate)}(w))C=rl(w.canDeactivate(n,e,t,r));else{if(!wh(w))throw new Error("Invalid CanDeactivate guard");C=rl(w(n,e,t,r))}return C.pipe(hh())})).pipe(f0()):ht(!0)}(o.component,o.route,t,e,r)),hh(o=>!0!==o,!0))}(h,r,o,n).pipe((0,zn.z)(m=>m&&function EN(n){return"boolean"==typeof n}(m)?function zN(n,e,t,r){return(0,Ft.D)(e).pipe(yi(o=>ii(function WN(n,e){return null!==n&&e&&e(new kR(n)),ht(!0)}(o.route.parent,r),function ZN(n,e){return null!==n&&e&&e(new LR(n)),ht(!0)}(o.route,r),function YN(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function BN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>RS(()=>ht(h.guards.map(w=>{const C=Zb(w,h.node,t);let M;if(function IN(n){return n&&wh(n.canActivateChild)}(C))M=rl(C.canActivateChild(r,n));else{if(!wh(C))throw new Error("Invalid CanActivateChild guard");M=rl(C(r,n))}return M.pipe(hh())})).pipe(f0())));return ht(u).pipe(f0())}(n,o.path,t),function KN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const o=r.map(u=>RS(()=>{const h=Zb(u,e,t);let m;if(function bN(n){return n&&wh(n.canActivate)}(h))m=rl(h.canActivate(e,n));else{if(!wh(h))throw new Error("Invalid CanActivate guard");m=rl(h(e,n))}return m.pipe(hh())}));return ht(o).pipe(f0())}(n,o.route,t))),hh(o=>!0!==o,!0))}(r,u,n,e):ht(m)),(0,dt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,To.b)(m=>{if(mp(m.guardsResult)){const C=jC(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new NR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Ri(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),tT(m=>{if(m.guards.canActivateChecks.length)return ht(m).pipe((0,To.b)(w=>{const C=new OR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Ti(w=>{let C=!1;return ht(w).pipe(function sO(n,e){return(0,zn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ht(t);let u=0;return(0,Ft.D)(o).pipe(yi(h=>function oO(n,e,t,r){return function aO(n,e,t,r){const o=Dx(n);if(0===o.length)return ht({});const u={};return(0,Ft.D)(o).pipe((0,zn.z)(h=>function uO(n,e,t,r){const o=Zb(n,e,r);return rl(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,To.b)(m=>{u[h]=m}))),UC(1),(0,zn.z)(()=>Dx(u).length===o.length?ht(u):Vm.E))}(n._resolve,n,e,r).pipe((0,dt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),tx(n,t).resolve),null)))}(h.route,r,n,e)),(0,To.b)(()=>u++),UC(1),(0,zn.z)(h=>u===o.length?ht(t):Vm.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,To.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,To.b)(w=>{const C=new PR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),tT(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:G}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!G})}),(0,dt.U)(m=>{const w=function aN(n,e,t){const r=c0(n,e._root,t?t._root:void 0);return new XS(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,To.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new _N(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,To.b)({next(){u=!0},complete(){u=!0}}),function SR(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Eh(m=>{if(h=!0,function BR(n){return n&&n[VS]}(m)){const w=mp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new PS(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ax(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new xR(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Vm.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){cx(t),this.config=t.map(XC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,M=w?this.currentUrlTree.fragment:h;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function cN(n,e,t,r,o){if(0===t.length)return WC(e.root,e.root,e.root,r,o);const u=function dN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sx(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ai(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new sx(t,e,r)}(t);if(u.toRoot())return WC(e.root,e.root,new en([],{}),r,o);const h=function hN(n,e,t){if(n.isAbsolute)return new KC(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new KC(u,u===e.root,0)}const r=Bb(n.commands[0])?0:1;return function fN(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new KC(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?jb(h.segmentGroup,h.index,u.commands):ox(h.segmentGroup,h.index,u.commands);return WC(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=mp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function _O(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},mO):!1===r?Object.assign({},yO):r,mp(t))return $S(this.currentUrlTree,t,o);const u=this.parseUrl(t);return $S(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new a0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,w;if(this.disposed)return Promise.resolve(!1);let C,M,N;h?(C=h.resolve,M=h.reject,N=h.promise):N=new Promise((ee,Re)=>{C=ee,M=Re});const H=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):G=0,this.setTransition({id:H,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:M,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ee=>Promise.reject(ee))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new PS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ax(n){return"imperative"!==n}let _0=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new el.x,this.subscription=t.events.subscribe(u=>{u instanceof a0&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){if(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Hm(this.skipLocationChange),replaceUrl:Hm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Hm(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ao),d.Y36(jm),d.Y36(fe))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Hm(n){return""===n||!!n}class Sx{}class xx{preload(e,t){return ht(null)}}let Mx=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Cx(o,r,w=>t.triggerEvent(new kS(w)),w=>t.triggerEvent(new FS(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ri(t=>t instanceof a0),yi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Ft.D)(o).pipe((0,Ei.J)(),(0,dt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ht(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,zn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ao),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(Sx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),iT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof BC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof a0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof LS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new LS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const yp=new d.OlP("ROUTER_CONFIGURATION"),Rx=new d.OlP("ROUTER_FORROOT_GUARD"),bO=[ye,{provide:ZS,useClass:WS},{provide:Ao,useFactory:function AO(n,e,t,r,o,u,h={},m,w){const C=new Ao(null,n,e,t,r,o,BS(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function SO(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(M=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[ZS,p0,ye,d.zs3,d.Sil,nT,yp,[class hO{},new d.FiY],[class lO{},new d.FiY]]},p0,{provide:jm,useFactory:function xO(n){return n.routerState.root},deps:[Ao]},Mx,xx,class wO{preload(e,t){return t().pipe(Eh(()=>ht(null)))}},{provide:yp,useValue:{enableTracing:!1}}];function IO(){return new d.PXZ("Router",Ao)}let Nx=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[bO,Ox(t),{provide:Rx,useFactory:TO,deps:[[Ao,new d.FiY,new d.tp0]]},{provide:yp,useValue:r||{}},{provide:fe,useFactory:CO,deps:[he,[new d.tBr(Xe),new d.FiY],yp]},{provide:iT,useFactory:DO,deps:[Ao,uu,yp]},{provide:Sx,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:xx},{provide:d.PXZ,multi:!0,useFactory:IO},[sT,{provide:d.ip1,multi:!0,useFactory:MO,deps:[sT]},{provide:Px,useFactory:RO,deps:[sT]},{provide:d.tb,multi:!0,useExisting:Px}]]}}static forChild(t){return{ngModule:n,providers:[Ox(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Rx,8),d.LFG(Ao,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function DO(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new iT(n,e,t)}function CO(n,e,t={}){return t.useHash?new Ie(n,e):new Ze(n,e)}function TO(n){return"guarded"}function Ox(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:nT,multi:!0,useValue:n}]}let sT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new el.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Ao),h=this.injector.get(yp);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ht(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(yp),o=this.injector.get(Mx),u=this.injector.get(iT),h=this.injector.get(Ao),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function MO(n){return n.appInitializer.bind(n)}function RO(n){return n.bootstrapListener.bind(n)}const Px=new d.OlP("Router Initializer");let OO=(()=>{class n{constructor(t){this.httpClient=t,this.url="https://restcountries.com/v3.1/subregion/europe",this.urlPelis="https://api.themoviedb.org/3/movie/",this.apiKey="e286de8cab14e42ecc0868b49545d5cf",this.arrayPelis=[]}getPaises(){return this.httpClient.get(this.url)}getPeliculas(){return this.httpClient.get(this.urlPelis+20+"?api_key="+this.apiKey)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PO=function(n){return[n]};function kO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ul",5)(1,"li",6),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().getPaisSeleccionado(u)}),d.TgZ(2,"div")(3,"h6",7),d._uU(4),d.qZA(),d.TgZ(5,"small",2),d._uU(6),d.qZA()(),d.TgZ(7,"span",2),d._UZ(8,"img",8),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(4),d.Oqu(t.translations.spa.common),d.xp6(2),d.Oqu(t.capital),d.xp6(2),d.Q6J("src",d.VKq(3,PO,t.flags.png),d.LSH)}}let FO=(()=>{class n{constructor(t){this.http=t,this.paises=[],this.pelis=[],this.paisSeleccionado=new d.vpe,t.getPaises().subscribe(r=>{this.paises=r,console.log(this.paises)})}ngOnInit(){}getPaisSeleccionado(t){this.paisSeleccionado.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(OO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-paises"]],outputs:{paisSeleccionado:"paisSeleccionado"},decls:6,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"col","listaPaises"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed","paisContainer",3,"click"],[1,"my-0"],["alt","","width","84px","height","56px",1,"float-right",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),d._uU(3,"Nacionalidad"),d.qZA()(),d.TgZ(4,"div",3),d.YNc(5,kO,9,5,"ul",4),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.paises))},directives:[Pn],styles:[".container[_ngcontent-%COMP%]{height:65vh}.listaPaises[_ngcontent-%COMP%]{height:75%;overflow-y:scroll}.paisContainer[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}"]}),n})(),LO=(()=>{class n{constructor(t,r){this.fb=t,this.db=r,this.formGroup=this.fb.group({nombre:"",apellido:"",alias:"",edad:"",sexo:"",nacionalidad:""})}ngOnInit(){}obtenerNacionalidadActor(t){this.nacionalidad=t,this.formGroup.controls.nacionalidad.setValue(t.translations.spa.common)}altaActor(){var t=this;return(0,le.Z)(function*(){let r=t.formGroup.value;(yield t.db.alta(r,"Actor"))&&t.formGroup.reset()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xS),d.Y36(Nb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-alta"]],decls:80,vars:2,consts:[[1,"container"],[1,"py-5","text-center"],["src","../../../assets/bradPitt.png","alt","","width","100","height","100",1,"d-block","mx-auto","mb-4"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"paisSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup","submit"],[1,"col-md-6","mb-3"],["for","nombre"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre","required","",1,"form-control"],[1,"invalid-feedback"],["for","apellido"],["type","text","id","apellido","placeholder","","value","","formControlName","apellido","required","",1,"form-control"],["for","alias"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","alias","placeholder","Username","formControlName","alias","required","",1,"form-control"],[1,"invalid-feedback",2,"width","100%"],["for","sexo"],["id","sexo","formControlName","sexo","required","",1,"custom-select","d-block","w-100"],["value",""],["value","femenino"],["value","masculino"],["value","otro"],["for","edad"],[1,"text-muted"],["type","number","id","edad","placeholder","30","formControlName","edad",1,"form-control"],["for","nacionalidad"],["type","text","id","nacionalidad","placeholder","Ingrese una nacionalidad","formControlName","nacionalidad","required","","readonly","",1,"form-control"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"h2"),d._uU(4,"Alta actores"),d.qZA()(),d.TgZ(5,"div",3)(6,"div",4)(7,"app-tabla-paises",5),d.NdJ("paisSeleccionado",function(u){return r.obtenerNacionalidadActor(u)}),d.qZA()(),d.TgZ(8,"div",6)(9,"h4",7),d._uU(10,"Nuevo actor"),d.qZA(),d.TgZ(11,"form",8),d.NdJ("submit",function(){return r.altaActor()}),d.TgZ(12,"div",3)(13,"div",9)(14,"label",10),d._uU(15,"Nombre"),d.qZA(),d._UZ(16,"input",11),d.TgZ(17,"div",12),d._uU(18," Valid first name is required. "),d.qZA()(),d.TgZ(19,"div",9)(20,"label",13),d._uU(21,"Apellido"),d.qZA(),d._UZ(22,"input",14),d.TgZ(23,"div",12),d._uU(24," Valid last name is required. "),d.qZA()()(),d.TgZ(25,"div",7)(26,"label",15),d._uU(27,"Alias"),d.qZA(),d.TgZ(28,"div",16)(29,"div",17)(30,"span",18),d._uU(31,"@"),d.qZA()(),d._UZ(32,"input",19),d.TgZ(33,"div",20),d._uU(34," Your username is required. "),d.qZA()()(),d.TgZ(35,"div",3)(36,"div",9)(37,"label",21),d._uU(38,"G\xe9nero"),d.qZA(),d.TgZ(39,"select",22)(40,"option",23),d._uU(41,"Elegir..."),d.qZA(),d.TgZ(42,"option",24),d._uU(43,"Femenino"),d.qZA(),d.TgZ(44,"option",25),d._uU(45,"Masculino"),d.qZA(),d.TgZ(46,"option",26),d._uU(47,"Otro"),d.qZA()(),d.TgZ(48,"div",12),d._uU(49," Por favor seleccionar uno. "),d.qZA()(),d.TgZ(50,"div",9)(51,"label",27),d._uU(52,"Edad "),d.TgZ(53,"span",28),d._uU(54,"(Optional)"),d.qZA()(),d._UZ(55,"input",29),d.TgZ(56,"div",12),d._uU(57," Please enter a valid email address for shipping updates. "),d.qZA()()(),d.TgZ(58,"div",7)(59,"label",30),d._uU(60,"Nacionalidad"),d.qZA(),d._UZ(61,"input",31),d.TgZ(62,"div",12),d._uU(63," Por favor ingrese un pa\xeds. "),d.qZA()(),d._UZ(64,"hr",32),d.TgZ(65,"button",33),d._uU(66,"ALTA"),d.qZA()()()(),d.TgZ(67,"footer",34)(68,"p",35),d._uU(69,"\xa9 2017-2020 Company Name"),d.qZA(),d.TgZ(70,"ul",36)(71,"li",37)(72,"a",38),d._uU(73,"Privacy"),d.qZA()(),d.TgZ(74,"li",37)(75,"a",38),d._uU(76,"Terms"),d.qZA()(),d.TgZ(77,"li",37)(78,"a",38),d._uU(79,"Support"),d.qZA()()()()()),2&t&&(d.xp6(11),d.Q6J("formGroup",r.formGroup),d.xp6(54),d.Q6J("disabled",r.formGroup.invalid))},directives:[FO,xb,_b,r0,Jv,EC,Rb,o0,s0,FC,VC,Mb],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin-top:1rem}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}"]}),n})(),VO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"bienvenido works!"),d.qZA())},styles:[""]}),n})();class UO{constructor(e,t,r,o,u,h,m){this.id=e,this.nombre=t,this.tipo=r,this.fechaEstreno=o,this.cantidadPublico=u,this.fotoPelicula=h,this.actor=m}}const BO=function(){return["/altaPelicula"]},jO=function(){return["/altaActor"]};let kx=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:22,vars:4,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["href","#",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"form-inline","my-2","my-lg-0"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","mr-sm-2"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2,"Navbar"),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"Home "),d.TgZ(10,"span",8),d._uU(11,"(current)"),d.qZA()()(),d.TgZ(12,"li",9)(13,"a",10),d._uU(14,"Alta Peliculas"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",10),d._uU(17,"Alta Actores"),d.qZA()()(),d.TgZ(18,"form",11),d._UZ(19,"input",12),d.TgZ(20,"button",13),d._uU(21,"Search"),d.qZA()()()()),2&t&&(d.xp6(13),d.Q6J("routerLink",d.DdM(2,BO)),d.xp6(3),d.Q6J("routerLink",d.DdM(3,jO)))},directives:[_0,xb,_b,Sb],styles:[""]}),n})();function HO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td")(6,"button",3),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().mostrarDetallePelicula(u)}),d._uU(7,"VER DETALLE"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.id),d.xp6(2),d.Oqu(t.nombre)}}let $O=(()=>{class n{constructor(){this.peliculaSeleccionada=new d.vpe}ngOnInit(){}mostrarDetallePelicula(t){this.peliculaSeleccionada.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-pelicula"]],inputs:{inputTablaPeliculas:"inputTablaPeliculas"},outputs:{peliculaSeleccionada:"peliculaSeleccionada"},decls:11,vars:1,consts:[[1,"table","table-striped","table-dark"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),d._uU(4,"#"),d.qZA(),d.TgZ(5,"th",1),d._uU(6,"Nombre"),d.qZA(),d.TgZ(7,"th",1),d._uU(8,"Detalle"),d.qZA()()(),d.TgZ(9,"tbody"),d.YNc(10,HO,8,2,"tr",2),d.qZA()()),2&t&&(d.xp6(10),d.Q6J("ngForOf",r.inputTablaPeliculas))},directives:[Pn],styles:[".listaPaises[_ngcontent-%COMP%]{height:10%;overflow-y:scroll}"]}),n})(),GO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{inputDetallePelicula:"inputDetallePelicula"},decls:21,vars:5,consts:[[1,"col-md-4"],[1,"card",2,"width","18rem"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2")(2,"strong"),d._uU(3,"Detalle"),d.qZA()(),d.TgZ(4,"div",1),d._UZ(5,"img",2),d.TgZ(6,"div",3)(7,"h5",4),d._uU(8),d.qZA(),d.TgZ(9,"p",5),d._uU(10,"Genero: "),d.TgZ(11,"span"),d._uU(12),d.qZA()(),d.TgZ(13,"p",5),d._uU(14,"Fecha de estreno: "),d.TgZ(15,"span"),d._uU(16),d.qZA()(),d.TgZ(17,"p",5),d._uU(18,"Espectadores: "),d.TgZ(19,"span"),d._uU(20),d.qZA()()()()()),2&t&&(d.xp6(5),d.Q6J("src",r.inputDetallePelicula.fotoPelicula,d.LSH),d.xp6(3),d.Oqu(r.inputDetallePelicula.nombre),d.xp6(4),d.Oqu(r.inputDetallePelicula.tipo),d.xp6(4),d.Oqu(r.inputDetallePelicula.fechaEstreno),d.xp6(4),d.Oqu(r.inputDetallePelicula.cantidadPublico))},styles:[""]}),n})();function qO(n,e){if(1&n&&(d.TgZ(0,"ul",1)(1,"li",2),d._uU(2),d.TgZ(3,"span",3),d._uU(4),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(2),d.hij(" ",t.nombre," "),d.xp6(2),d.Oqu(t.cantidadPublico)}}let zO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-listado"]],inputs:{inputListadoPeliculas:"inputListadoPeliculas"},decls:4,vars:1,consts:[["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill"]],template:function(t,r){1&t&&(d.TgZ(0,"h2")(1,"strong"),d._uU(2,"Listado pel\xedculas"),d.qZA()(),d.YNc(3,qO,5,2,"ul",0)),2&t&&(d.xp6(3),d.Q6J("ngForOf",r.inputListadoPeliculas))},directives:[Pn],styles:[""]}),n})();const ZO=function(){return["/altaActor"]},WO=[{path:"",redirectTo:"/busqueda",pathMatch:"full"},{path:"bienvenido",component:VO},{path:"busqueda",component:(()=>{class n{constructor(t){this.db=t,this.listadoPeliculas=[],this.peliculaParaMostrar=new UO(0,"El Cabellero de la noche","Accion","13/08/2008",15e5,"https://image.tmdb.org/t/p/original/tSIH3DTA4oFQDhPaJgHxxQZoqHh.jpg","Christian Bale")}ngOnInit(){this.getPeliculas()}tomarPeliculaParaDetalle(t){this.peliculaParaMostrar=t}getPeliculas(){this.db.getCollection("peliculas").then(t=>t.subscribe(r=>{r.forEach(o=>{console.log(o.payload.doc.data()),this.listadoPeliculas.push(o.payload.doc.data())})}))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Nb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-busqueda"]],decls:29,vars:5,consts:[["role","main"],[1,"jumbotron"],[1,"container"],[1,"display-3"],[3,"inputTablaPeliculas","peliculaSeleccionada"],[1,"row"],[1,"col-md-4"],[3,"inputDetallePelicula"],[3,"inputListadoPeliculas"],[1,"widget","clearfix"],[1,"widgettitle"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-link",3,"routerLink"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.TgZ(1,"main",0)(2,"div",1)(3,"div",2)(4,"h1",3),d._uU(5,"Tabla Pel\xedculas"),d.qZA(),d.TgZ(6,"app-tabla-pelicula",4),d.NdJ("peliculaSeleccionada",function(u){return r.tomarPeliculaParaDetalle(u)}),d.qZA()()(),d.TgZ(7,"div",2)(8,"div",5)(9,"div",6),d._UZ(10,"app-detalle-pelicula",7),d.qZA(),d.TgZ(11,"div",6),d._UZ(12,"app-pelicula-listado",8),d.qZA(),d.TgZ(13,"div",6)(14,"section",9)(15,"h4",10),d._uU(16,"Alta actor"),d.qZA(),d.TgZ(17,"div",11)(18,"div",12)(19,"h5",13),d._uU(20,"Alta actor"),d.qZA(),d.TgZ(21,"p",14),d._uU(22,"Secci\xf3n que permite cargar un nuevo actor en nuestra base de datos"),d.qZA(),d.TgZ(23,"a",15),d._uU(24,"ALTA"),d.qZA()()()()()(),d._UZ(25,"hr"),d.qZA()(),d.TgZ(26,"footer",2)(27,"p"),d._uU(28,"\xa9 Company 2017-2020"),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("inputTablaPeliculas",r.listadoPeliculas),d.xp6(4),d.Q6J("inputDetallePelicula",r.peliculaParaMostrar),d.xp6(2),d.Q6J("inputListadoPeliculas",r.listadoPeliculas),d.xp6(11),d.Q6J("routerLink",d.DdM(4,ZO)))},directives:[kx,$O,GO,zO,_0],styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}"]}),n})()},{path:"altaActor",component:LO},{path:"altaPelicula",component:bR}];let KO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Nx.forRoot(WO)],Nx]}),n})(),YO=(()=>{class n{constructor(){this.title="practicaParcial"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-navbar")(1,"router-outlet")},directives:[kx,JC],styles:[""]}),n})();const Fx_firebaseConfig={apiKey:"AIzaSyAxg-CpNMw_rxSXobIvBVTGHryikbSbIvg",authDomain:"laboratorio-iv-nmm.firebaseapp.com",databaseURL:"https://laboratorio-iv-nmm-default-rtdb.firebaseio.com",projectId:"laboratorio-iv-nmm",storageBucket:"laboratorio-iv-nmm.appspot.com",messagingSenderId:"635865038088",appId:"1:635865038088:web:7bdac6eba72b6f7056c0bd"};let QO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[YO]}),n.\u0275inj=d.cJS({providers:[],imports:[[ya,SS,_R,KO,Lo,fn.hO.initializeApp(Fx_firebaseConfig),_M]]}),n})();(0,d.G48)(),pl().bootstrapModule(QO).catch(n=>console.error(n))},5867:(it,Ce,k)=>{k.d(Ce,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=k(9681);(0,d.registerVersion)("firebase","9.7.0","app")},127:(it,Ce,k)=>{k.d(Ce,{Z:()=>d.Z});var d=k(3942);d.Z.registerVersion("firebase","9.7.0","app-compat")},820:(it,Ce,k)=>{k.r(Ce);var d=k(5861),K=k(3942),O=k(2090),oe=k(9681),X=k(655),pe=k(1877),re=k(4859);const xe=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new pe.Yd("@firebase/auth");function Ze(y,...f){Xe.logLevel<=pe.in.ERROR&&Xe.error(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}function Ie(y,...f){throw je(y,...f)}function ye(y,...f){return je(y,...f)}function _e(y,f,p){const v=Object.assign(Object.assign({},ke()),{[f]:p});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function He(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ie(y,"argument-error"),_e(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const p=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return fe.create(y,...f)}function ne(y,f,...p){if(!y)throw je(f,...p)}function qe(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ze(f),new Error(f)}function J(y,f){y||qe(f)}const se=new Map;function te(y){J(y instanceof Function,"Expected a class definition");let f=se.get(y);return f?(J(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,se.set(y,f),f)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function It(){return"http:"===qt()||"https:"===qt()}function qt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ut{constructor(f,p){this.shortDelay=f,this.longDelay=p,J(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function rn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(It()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jn(y,f){J(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class vn{static initialize(f,p,v){this.fetchImpl=f,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},hi=new Ut(3e4,6e4);function Wt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Bt(y,f,p,v){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(y,f,p,v,T={}){return Yr(y,T,(0,d.Z)(function*(){let R={},q={};v&&("GET"===f?q=v:R={body:JSON.stringify(v)});const ie=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),vn.fetch()(Mr(y,y.config.apiHost,p,ie),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Yr(y,f,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(y,f,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Jt),f);try{const T=new zi(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw Zi(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ie=R.ok?q.errorMessage:q.error.message,[Fe,Qe]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Zi(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Fe)throw Zi(y,"email-already-in-use",q);const pt=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw _e(y,pt,Qe);Ie(y,pt)}}catch(T){if(T instanceof O.ZR)throw T;Ie(y,"network-request-failed")}})).apply(this,arguments)}function xr(y,f,p,v){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(y,f,p,v,T={}){const R=yield Bt(y,f,p,v,T);return"mfaPendingCredential"in R&&Ie(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Mr(y,f,p,v){const T=`${f}${p}?${v}`;return y.config.emulator?Jn(y.config,T):`${y.config.apiScheme}://${T}`}class zi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),hi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zi(y,f,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ye(y,f,v);return T.customData._tokenResponse=p,T}function kr(){return(kr=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Xn(y,f){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Qr(y,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function gn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ua(){return(ua=(0,d.Z)(function*(y,f=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(f),T=rt(v);ne(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:gn(jt(T.auth_time)),issuedAtTime:gn(jt(T.iat)),expirationTime:gn(jt(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function jt(y){return 1e3*Number(y)}function rt(y){const[f,p,v]=y.split(".");if(void 0===f||void 0===p||void 0===v)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T),null}}function sr(y,f){return xi.apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Vt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Bs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield p.iteration()}),v)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&f.schedule(!0))}f.schedule()})()}}class mr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=gn(this.lastLoginAt),this.creationTime=gn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(y){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(y){var f;const p=y.auth,v=yield y.getIdToken(),T=yield sr(y,Qr(p,{idToken:v}));ne(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?De(R.providerUserInfo):[],ie=We(y.providerData,q),pt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ie?void 0:ie.length)),st={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ie,metadata:new mr(R.createdAt,R.lastLoginAt),isAnonymous:pt};Object.assign(y,st)})).apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield or(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function We(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function De(y){return y.map(f=>{var{providerId:p}=f,v=(0,X._T)(f,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,d.Z)(function*(y,f){const p=yield Yr(y,{},(0,d.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=Mr(y,T,"/v1/token",`key=${R}`),ie=yield y._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",vn.fetch()(q,{method:"POST",headers:ie,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(void 0!==f.idToken,"internal-error"),ne(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function mt(y){const f=rt(y);return ne(f,"internal-error"),ne(void 0!==f.exp,"internal-error"),ne(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var v=this;return(0,d.Z)(function*(){return ne(!v.accessToken||v.refreshToken,f,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var v=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function Je(y,f){return ut.apply(this,arguments)}(f,p);v.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(f,p,v){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,q=new kt;return v&&(ne("string"==typeof v,"internal-error",{appName:f}),q.refreshToken=v),T&&(ne("string"==typeof T,"internal-error",{appName:f}),q.accessToken=T),R&&(ne("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return qe("not implemented")}}function Nt(y,f){ne("string"==typeof y||void 0===y,"internal-error",{appName:f})}class U{constructor(f){var{uid:p,auth:v,stsTokenManager:T}=f,R=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new mr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,d.Z)(function*(){const v=yield sr(p,p.stsTokenManager.getToken(p.auth,f));return ne(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(f){return function ds(y){return ua.apply(this,arguments)}(this,f)}reload(){return function yr(y){return Pt.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new U(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var v=this;return(0,d.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield or(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,d.Z)(function*(){const p=yield f.getIdToken();return yield sr(f,function ot(y,f){return kr.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var v,T,R,q,ie,Fe,Qe,pt;const st=null!==(v=p.displayName)&&void 0!==v?v:void 0,Dn=null!==(T=p.email)&&void 0!==T?T:void 0,Ui=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,$l=null!==(q=p.photoURL)&&void 0!==q?q:void 0,_d=null!==(ie=p.tenantId)&&void 0!==ie?ie:void 0,po=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,Rs=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,Kp=null!==(pt=p.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:go,emailVerified:Gl,isAnonymous:qo,providerData:Zh,stsTokenManager:vd}=p;ne(go&&vd,f,"internal-error");const Yp=kt.fromJSON(this.name,vd);ne("string"==typeof go,f,"internal-error"),Nt(st,f.name),Nt(Dn,f.name),ne("boolean"==typeof Gl,f,"internal-error"),ne("boolean"==typeof qo,f,"internal-error"),Nt(Ui,f.name),Nt($l,f.name),Nt(_d,f.name),Nt(po,f.name),Nt(Rs,f.name),Nt(Kp,f.name);const Wh=new U({uid:go,auth:f,email:Dn,emailVerified:Gl,displayName:st,isAnonymous:qo,photoURL:$l,phoneNumber:Ui,tenantId:_d,stsTokenManager:Yp,createdAt:Rs,lastLoginAt:Kp});return Zh&&Array.isArray(Zh)&&(Wh.providerData=Zh.map(Qp=>Object.assign({},Qp))),po&&(Wh._redirectEventId=po),Wh}static _fromIdTokenResponse(f,p,v=!1){return(0,d.Z)(function*(){const T=new kt;T.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield or(R),R})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,d.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,d.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,d.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function ce(y,f,p){return`firebase:${y}:${f}:${p}`}class Y{constructor(f,p,v){this.persistence=f,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=ce(this.userKey,T.apiKey,R),this.fullPersistenceKey=ce("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?U._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,d.Z)(function*(){if(p.persistence===f)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,v="authUser"){return(0,d.Z)(function*(){if(!p.length)return new Y(te($),f,v);const T=(yield Promise.all(p.map(function(){var Qe=(0,d.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=T[0]||te($);const q=ce(v,f.config.apiKey,f.name);let ie=null;for(const Qe of p)try{const pt=yield Qe._get(q);if(pt){const st=U._fromJSON(f,pt);Qe!==R&&(ie=st),R=Qe;break}}catch(pt){}const Fe=T.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],ie&&(yield R._set(q,ie.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,d.Z)(function*(pt){if(pt!==R)try{yield pt._remove(q)}catch(st){}});return function(pt){return Qe.apply(this,arguments)}}())),new Y(R,f,v)):new Y(R,f,v)})()}}function Ve(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ht(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ft(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(At(f))return"Blackberry";if(ln(f))return"Webos";if(Kt(f))return"Safari";if((f.includes("chrome/")||_r(f))&&!f.includes("edge/"))return"Chrome";if(En(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ft(y=(0,O.z$)()){return/firefox\//i.test(y)}function Kt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function _r(y=(0,O.z$)()){return/crios\//i.test(y)}function Ht(y=(0,O.z$)()){return/iemobile/i.test(y)}function En(y=(0,O.z$)()){return/android/i.test(y)}function At(y=(0,O.z$)()){return/blackberry/i.test(y)}function ln(y=(0,O.z$)()){return/webos/i.test(y)}function tr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Wi(y=(0,O.z$)()){return tr(y)||En(y)||ln(y)||At(y)||/windows phone/i.test(y)||Ht(y)}function ca(y,f=[]){let p;switch(y){case"Browser":p=Ve((0,O.z$)());break;case"Worker":p=`${Ve((0,O.z$)())}-${y}`;break;default:p=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class Jr{constructor(f,p,v){this.app=f,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,p){var v=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p)}})()}initializeCurrentUser(f){var p=this;return(0,d.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,q=null==T?void 0:T._redirectEventId,ie=yield p.tryRedirectSignIn(f);(!R||R===q)&&(null==ie?void 0:ie.user)&&(T=ie.user)}return T?T._redirectEventId?(ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var p=this;return(0,d.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,d.Z)(function*(){try{yield or(f)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function $e(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,d.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&ne(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(f){var p=this;return(0,d.Z)(function*(){if(!p._deleted)return f&&ne(p.tenantId===f.tenantId,p,"tenant-id-mismatch"),p.queue((0,d.Z)(function*(){yield p.directlySetCurrentUser(f),p.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var p=this;return this.queue((0,d.Z)(function*(){yield p.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,p,v){return this.registerStateListener(this.authStateSubscription,f,p,v)}onIdTokenChanged(f,p,v){return this.registerStateListener(this.idTokenSubscription,f,p,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var v=this;return(0,d.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,d.Z)(function*(){if(!p.redirectPersistenceManager){const v=f&&te(f)||p._popupRedirectResolver;ne(v,p,"argument-error"),p.redirectPersistenceManager=yield Y.create(p,[te(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,d.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,d.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,d.Z)(function*(){if(f===p.currentUser)return p.queue((0,d.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof p?f.addObserver(p,v,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,d.Z)(function*(){p.currentUser&&p.currentUser!==f&&(p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh()),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ca(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var p;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Me(y){return(0,O.m9)(y)}class xt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ar(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function On(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class sn{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return qe("not implemented")}_getIdTokenResponse(f){return qe("not implemented")}_linkToIdToken(f,p){return qe("not implemented")}_getReauthenticationResolver(f){return qe("not implemented")}}function An(y,f){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:resetPassword",Wt(y,f))})).apply(this,arguments)}function Ct(y,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $s(y,f){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",Wt(y,f))})).apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithPassword",Wt(y,f))})).apply(this,arguments)}function Ki(y,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:sendOobCode",Wt(y,f))})).apply(this,arguments)}function fi(y,f){return on.apply(this,arguments)}function on(){return(on=(0,d.Z)(function*(y,f){return Ki(y,f)})).apply(this,arguments)}function eu(y,f){return tu.apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(y,f){return Ki(y,f)})).apply(this,arguments)}function pi(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(y,f){return Ki(y,f)})).apply(this,arguments)}function Oc(y,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(y,f){return Ki(y,f)})).apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithEmailLink",Wt(y,f))})).apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithEmailLink",Wt(y,f))})).apply(this,arguments)}class ru extends sn{constructor(f,p,v,T=null){super("password",v),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new ru(f,p,"password")}static _fromEmailAndCode(f,p,v=null){return new ru(f,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,d.Z)(function*(){switch(p.signInMethod){case"password":return function ps(y,f){return Pn.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function nu(y,f){return Fr.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,p){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return Ct(f,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function bh(y,f){return Pc.apply(this,arguments)}(f,{idToken:p,email:v._email,oobCode:v._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function kn(y,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithIdp",Wt(y,f))})).apply(this,arguments)}class Qi extends sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new Qi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ie("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=p,R=(0,X._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const q=new Qi(v,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return kn(f,this.buildRequest())}_linkToIdToken(f,p){const v=this.buildRequest();return v.idToken=p,kn(f,v)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,kn(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,O.xO)(p)}return f}}function Ep(y,f){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:sendVerificationCode",Wt(y,f))})).apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,f))})).apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(y,f){const p=yield xr(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,f));if(p.temporaryProof)throw Zi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const bp={USER_NOT_FOUND:"user-not-found"};function Vc(){return(Vc=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),bp)})).apply(this,arguments)}class So extends sn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new So({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new So({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function il(y,f){return ms.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function wp(y,f){return Lc.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Ip(y,f){return Vc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=f;return v||p||T||R?new So({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class Gs{constructor(f){var p,v,T,R,q,ie;const Fe=(0,O.zd)((0,O.pd)(f)),Qe=null!==(p=Fe.apiKey)&&void 0!==p?p:null,pt=null!==(v=Fe.oobCode)&&void 0!==v?v:null,st=function $m(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);ne(Qe&&pt&&st,"argument-error"),this.apiKey=Qe,this.operation=st,this.code=pt,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Fe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ie=Fe.tenantId)&&void 0!==ie?ie:null}static parseLink(f){const p=function iu(y){const f=(0,O.zd)((0,O.pd)(y)).link,p=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||f||y}(f);try{return new Gs(p)}catch(v){return null}}}let sl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ru._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=Gs.parseLink(v);return ne(T,"argument-error"),ru._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ys{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Lr extends ys{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xo extends Lr{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),Qi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:ie}=f;if(!v&&!T&&!p&&!R||!ie)return null;try{return new xo(ie)._credential({idToken:p,accessToken:v,nonce:q,pendingToken:R})}catch(Fe){return null}}}let qs=(()=>{class y extends Lr{constructor(){super("facebook.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ha=(()=>{class y extends Lr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Uc=(()=>{class y extends Lr{constructor(){super("github.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Mo extends sn{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return kn(f,this.buildRequest())}_linkToIdToken(f,p){const v=this.buildRequest();return v.idToken=p,kn(f,v)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,kn(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new Mo(v,R):null}static _create(f,p){return new Mo(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ei extends ys{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ei.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ei.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Mo.fromJSON(f);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:v}=f;if(!p||!v)return null;try{return Mo._create(v,p)}catch(T){return null}}}let su=(()=>{class y extends Lr{constructor(){super("twitter.com")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ou(y,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signUp",Wt(y,f))})).apply(this,arguments)}class ur{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,v,T=!1){return(0,d.Z)(function*(){const R=yield U._fromIdTokenResponse(f,v,T),q=Dh(v);return new ur({user:R,providerId:q,_tokenResponse:v,operationType:p})})()}static _forOperation(f,p,v){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=Dh(v);return new ur({user:f,providerId:T,_tokenResponse:v,operationType:p})})()}}function Dh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Bc(){return(Bc=(0,d.Z)(function*(y){var f;const p=Me(y);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new ur({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield ou(p,{returnSecureToken:!0}),T=yield ur._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class uu extends O.ZR{constructor(f,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,uu.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,p,v,T){return new uu(f,p,v,T)}}function lu(y,f,p,v){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?uu._fromErrorAndOperation(y,R,f,v):R})}function Ji(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function ol(){return(ol=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y);yield vs(!0,p,f);const{providerUserInfo:v}=yield Xn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Ji(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function dn(y,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(y,f,p=!1){const v=yield sr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return ur._forOperation(y,"link",v)})).apply(this,arguments)}function vs(y,f,p){return an.apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(y,f,p){yield or(f);const T=!1===y?"provider-already-linked":"no-such-provider";ne(Ji(f.providerData).has(p)===y,f.auth,T)})).apply(this,arguments)}function jc(y,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(y,f,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield sr(y,lu(v,T,f,y),p);ne(R.idToken,v,"internal-error");const q=rt(R.idToken);ne(q,v,"internal-error");const{sub:ie}=q;return ne(y.uid===ie,v,"user-mismatch"),ur._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ie(v,"user-mismatch"),R}})).apply(this,arguments)}function Zs(y,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(y,f,p=!1){const v="signIn",T=yield lu(y,v,f),R=yield ur._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(y,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(y,f){return Zs(Me(y),f)})).apply(this,arguments)}function gi(y,f){return Er.apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y);return yield vs(!1,p,f.providerId),dn(p,f)})).apply(this,arguments)}function Es(y,f){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,d.Z)(function*(y,f){return jc((0,O.m9)(y),f)})).apply(this,arguments)}function cu(y,f){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(y,f){return xr(y,"POST","/v1/accounts:signInWithCustomToken",Wt(y,f))})).apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(y,f){const p=Me(y),v=yield cu(p,{token:f,returnSecureToken:!0}),T=yield ur._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?du._fromServerResponse(f,p):Ie(f,"internal-error")}}class du extends lt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new du(p)}}function ga(y,f,p){var v;ne((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ne(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function fu(){return(fu=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};p&&ga(v,T,p),yield eu(v,T)})).apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(y,f,p){yield An((0,O.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,d.Z)(function*(y,f){yield $s((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ot(y,f){return ll.apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y),v=yield An(p,{oobCode:f}),T=v.requestType;switch(ne(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(v.mfaInfo,p,"internal-error");default:ne(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=lt._fromServerResponse(Me(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(y,f){const{data:p}=yield Ot((0,O.m9)(y),f);return p.email})).apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(y,f,p){const v=Me(y),T=yield ou(v,{returnSecureToken:!0,email:f,password:p}),R=yield ur._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Hc(){return(Hc=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};ne(p.handleCodeInApp,v,"argument-error"),p&&ga(v,T,p),yield pi(v,T)})).apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),T=sl.credentialWithLink(f,p||Pe());return ne(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,T)})).apply(this,arguments)}function lr(y,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:createAuthUri",Wt(y,f))})).apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(y,f){const v={identifier:f,continueUri:It()?Pe():"http://localhost"},{signinMethods:T}=yield lr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(y,f){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ga(p.auth,T,f);const{email:R}=yield fi(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&ga(v.auth,R,p);const{email:q}=yield Oc(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function pl(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},q=yield sr(v,pl(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const ie=v.providerData.find(({providerId:Fe})=>"password"===Fe);ie&&(ie.displayName=v.displayName,ie.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function yl(y,f,p){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(y,f,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),p&&(R.password=p);const q=yield sr(y,Ct(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Ks{constructor(f,p,v={}){this.isNewUser=f,this.providerId=p,this.profile=v}}class qc extends Ks{constructor(f,p,v,T){super(f,p,v),this.username=T}}class zc extends Ks{constructor(f,p){super(f,"facebook.com",p)}}class Ys extends qc{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Cs extends Ks{constructor(f,p){super(f,"google.com",p)}}class _l extends qc{constructor(f,p,v){super(f,"twitter.com",p,v)}}function wr(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Gc(y){var f,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(p=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new Ks(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new zc(R,T);case"github.com":return new Ys(R,T);case"google.com":return new Cs(R,T);case"twitter.com":return new _l(R,T,y.screenName||null);case"custom":case"anonymous":return new Ks(R,null);default:return new Ks(R,v,T)}}(p)}class es{constructor(f,p){this.type=f,this.credential=p}static _fromIdtoken(f){return new es("enroll",f)}static _fromMfaPendingCredential(f){return new es("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,v;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return es._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return es._fromIdtoken(f.multiFactorSession.idToken)}return null}}class _a{constructor(f,p,v){this.session=f,this.hints=p,this.signInResolver=v}static _fromError(f,p){const v=Me(f),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(ie=>lt._fromServerResponse(v,ie));ne(T.mfaPendingCredential,v,"internal-error");const q=es._fromMfaPendingCredential(T.mfaPendingCredential);return new _a(q,R,function(){var ie=(0,d.Z)(function*(Fe){const Qe=yield Fe._process(v,q);delete T.mfaInfo,delete T.mfaPendingCredential;const pt=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const st=yield ur._fromIdTokenResponse(v,p.operationType,pt);return yield v._updateCurrentUser(st.user),st;case"reauthenticate":return ne(p.user,v,"internal-error"),ur._forOperation(p.user,p.operationType,pt);default:Ie(v,"internal-error")}});return function(Fe){return ie.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,d.Z)(function*(){return p.signInResolver(f)})()}}function Fn(y,f){return Bt(y,"POST","/v2/accounts/mfaEnrollment:start",Wt(y,f))}class ts{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>lt._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new ts(f)}getSession(){var f=this;return(0,d.Z)(function*(){return es._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,p){var v=this;return(0,d.Z)(function*(){const T=f,R=yield v.getSession(),q=yield sr(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(f){var p=this;return(0,d.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield p.user.getIdToken(),R=yield sr(p.user,function Cp(y,f){return Bt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(y,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:q})=>q!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Po=new WeakMap,wl="__sak";class Qs{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(wl,"1"),this.storage.removeItem(wl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ft=(()=>{class y extends Qs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Kc(){const y=(0,O.z$)();return Kt(y)||tr(y)}()&&function Gn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Wi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ie,Fe,Qe)=>{this.notifyListeners(ie,Qe)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(T);if(p.newValue!==ie)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const ie=this.storage.getItem(T);!v&&this.localCache[T]===ie||this.notifyListeners(T,ie)},q=this.storage.getItem(T);!function la(){return(0,O.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,d.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,d.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,d.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),qn=(()=>{class y extends Qs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let Js=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,d.Z)(function*(){const T=p,{eventId:R,eventType:q,data:ie}=T.data,Fe=v.handlersMap[q];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Qe=Array.from(Fe).map(function(){var st=(0,d.Z)(function*(Dn){return Dn(T.origin,ie)});return function(Dn){return st.apply(this,arguments)}}()),pt=yield function zn(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return f.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:pt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function yi(y="",f=10){let p="";for(let v=0;v<f;v++)p+=Math.floor(10*Math.random());return y+p}class Rr{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,v=50){var T=this;return(0,d.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ie;return new Promise((Fe,Qe)=>{const pt=yi("",20);R.port1.start();const st=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ie={messageChannel:R,onMessage(Dn){const Ui=Dn;if(Ui.data.eventId===pt)switch(Ui.data.status){case"ack":clearTimeout(st),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Fe(Ui.data.response);break;default:clearTimeout(st),clearTimeout(q),Qe(new Error("invalid_response"))}}},T.handlers.add(ie),R.port1.addEventListener("message",ie.onMessage),T.target.postMessage({eventType:f,eventId:pt,data:p},[R.port2])}).finally(()=>{ie&&T.removeMessageHandler(ie)})})()}}function Mt(){return window}function dt(){return void 0!==Mt().WorkerGlobalScope&&"function"==typeof Mt().importScripts}function ns(){return(ns=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const bl="firebaseLocalStorageDb",ko="firebaseLocalStorage",Xs="fbase_key";class Ni{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function jr(y,f){return y.transaction([ko],f?"readwrite":"readonly").objectStore(ko)}function eo(){const y=indexedDB.open(bl,1);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(ko,{keyPath:Xs})}catch(T){p(T)}}),y.addEventListener("success",(0,d.Z)(function*(){const v=y.result;v.objectStoreNames.contains(ko)?f(v):(v.close(),yield function _i(){const y=indexedDB.deleteDatabase(bl);return new Ni(y).toPromise()}(),f(yield eo()))}))})}function Il(y,f,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(y,f,p){const v=jr(y,!0).put({[Xs]:f,value:p});return new Ni(v).toPromise()})).apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(y,f){const p=jr(y,!1).get(f),v=yield new Ni(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function to(y,f){const p=jr(y,!0).delete(f);return new Ni(p).toPromise()}const ni=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,d.Z)(function*(){return p.db||(p.db=yield eo()),p.db})()}_withRetries(p){var v=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,d.Z)(function*(){return dt()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,d.Z)(function*(){p.receiver=Js._getInstance(function Yc(){return dt()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,d.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,d.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,d.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function va(){return ns.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Rr(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,d.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function As(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const p=yield eo();return yield Il(p,wl,"1"),yield to(p,wl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,d.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(R=>Il(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,d.Z)(function*(){const T=yield v._withRetries(R=>function wu(y,f){return Fo.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,d.Z)(function*(){return v._withPendingWrite((0,d.Z)(function*(){return yield v._withRetries(T=>to(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,d.Z)(function*(){const v=yield p._withRetries(q=>{const ie=jr(q,!1).getAll();return new Ni(ie).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:ie}of v)R.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(ie)&&(p.notifyListeners(q,ie),T.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!R.has(q)&&(p.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function bu(y,f){return Bt(y,"POST","/v2/accounts/mfaSignIn:start",Wt(y,f))}function vi(){return(vi=(0,d.Z)(function*(y){return(yield Bt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ro(y){return new Promise((f,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const R=ye("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function Dl(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function Du(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Oi=1e12;class Ap{constructor(f){this.auth=f,this.counter=Oi,this._widgets=new Map}render(f,p){const v=this.counter;return this._widgets.set(v,new Qc(f,this.auth.name,p||{})),this.counter++,v}reset(f){var p;const v=f||Oi;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Oi))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,d.Z)(function*(){var v;return null===(v=p._widgets.get(f||Oi))||void 0===v||v.execute(),""})()}}class Qc{constructor(f,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ne(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ia(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cl=Du("rcb"),qm=new Ut(3e4,6e4);class Sp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mt().grecaptcha}load(f,p=""){return ne(function xp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Mt().grecaptcha):new Promise((v,T)=>{const R=Mt().setTimeout(()=>{T(ye(f,"network-request-failed"))},qm.get());Mt()[Cl]=()=>{Mt().clearTimeout(R),delete Mt()[Cl];const ie=Mt().grecaptcha;if(!ie)return void T(ye(f,"internal-error"));const Fe=ie.render;ie.render=(Qe,pt)=>{const st=Fe(Qe,pt);return this.counter++,st},this.hostLanguage=p,v(ie)},ro(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Cl,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ye(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Mt().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jc{load(f){return(0,d.Z)(function*(){return new Ap(f)})()}clearedOneInstance(){}}const Cu="recaptcha",Xc={theme:"light",type:"image"};class Mp{constructor(f,p=Object.assign({},Xc),v){this.parameters=p,this.type=Cu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Me(v),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jc:new Sp,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const q=ie=>{!ie||(f.tokenChangeListeners.delete(q),R(ie))};f.tokenChangeListeners.add(q),f.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof f)f(p);else if("string"==typeof f){const v=Mt()[f];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){ne(It()&&!dt(),f.auth,"internal-error"),yield function ed(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function Iu(y){return vi.apply(this,arguments)}(f.auth);ne(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class so{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=So._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function xn(){return(xn=(0,d.Z)(function*(y,f,p){const v=Me(y),T=yield fn(v,f,(0,O.m9)(p));return new so(T,R=>Sn(v,R))})).apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);yield vs(!1,v,"phone");const T=yield fn(v.auth,f,(0,O.m9)(p));return new so(T,R=>gi(v,R))})).apply(this,arguments)}function td(){return(td=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y),T=yield fn(v.auth,f,(0,O.m9)(p));return new so(T,R=>Es(v,R))})).apply(this,arguments)}function fn(y,f,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(y,f,p){var v;const T=yield p.verify();try{let R;if(ne("string"==typeof T,y,"argument-error"),ne(p.type===Cu,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return ne("enroll"===q.type,y,"internal-error"),(yield Fn(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===q.type,y,"internal-error");const ie=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ne(ie,y,"missing-multi-factor-info"),(yield bu(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Ep(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{p._reset()}})).apply(this,arguments)}function Ei(){return(Ei=(0,d.Z)(function*(y,f){yield dn((0,O.m9)(y),f)})).apply(this,arguments)}let wi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Me(p)}verifyPhoneNumber(p,v){return fn(this.auth,p,(0,O.m9)(v))}static credential(p,v){return So._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?So._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ii(y,f){return f?te(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class xs extends sn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return kn(f,this._buildIdpRequest())}_linkToIdToken(f,p){return kn(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return kn(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Da(y){return Zs(y.auth,new xs(y),y.bypassAuthState)}function nd(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),jc(p,new xs(y),y.bypassAuthState)}function Vo(y){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),dn(p,new xs(y),y.bypassAuthState)})).apply(this,arguments)}class Hr{constructor(f,p,v,T,R=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,d.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,d.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:q,error:ie,type:Fe}=f;if(ie)return void p.reject(ie);const Qe={auth:p.auth,requestUri:v,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Qe))}catch(pt){p.reject(pt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Da;case"linkViaPopup":case"linkViaRedirect":return Vo;case"reauthViaPopup":case"reauthViaRedirect":return nd;default:Ie(this.auth,"internal-error")}}resolve(f){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rd=new Ut(2e3,1e4);function id(){return(id=(0,d.Z)(function*(y,f,p){const v=Me(y);He(y,f,ys);const T=ii(v,p);return new Et(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);He(v.auth,f,ys);const T=ii(v.auth,p);return new Et(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);He(v.auth,f,ys);const T=ii(v.auth,p);return new Et(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Et=(()=>{class y extends Hr{constructor(p,v,T,R,q){super(p,v,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,d.Z)(function*(){const v=yield p.execute();return ne(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,d.Z)(function*(){J(1===p.filter.length,"Popup operations only handle one event");const v=yi();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,rd.get())};p()}}return y.currentPopupAction=null,y})();const Vn=new Map;class Ke extends Hr{constructor(f,p,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,d.Z)(function*(){let v=Vn.get(p.auth._key());if(!v){try{const R=(yield function Ta(y,f){return yt.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}Vn.set(p.auth._key(),v)}return p.bypassAuthState||Vn.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,v=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,p().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function yt(){return(yt=(0,d.Z)(function*(y,f){const p=D(f),v=I(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function Fi(y,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(y,f){return I(y)._set(D(f),"true")})).apply(this,arguments)}function I(y){return te(y._redirectPersistence)}function D(y){return ce("pendingRedirect",y.config.apiKey,y.name)}function Z(){return(Z=(0,d.Z)(function*(y,f,p){const v=Me(y);He(y,f,ys);const T=ii(v,p);return yield Fi(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function Le(){return(Le=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);He(v.auth,f,ys);const T=ii(v.auth,p);yield Fi(T,v.auth);const R=yield Uo(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function $t(){return($t=(0,d.Z)(function*(y,f,p){const v=(0,O.m9)(y);He(v.auth,f,ys);const T=ii(v.auth,p);yield vs(!1,v,f.providerId),yield Fi(T,v.auth);const R=yield Uo(v);return T._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(y,f){return yield Me(y)._initializationPromise,Mn(y,f,!1)})).apply(this,arguments)}function Mn(y,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(y,f,p=!1){const v=Me(y),T=ii(v,f),q=yield new Ke(v,T,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,f)),q})).apply(this,arguments)}function Uo(y){return $r.apply(this,arguments)}function $r(){return($r=(0,d.Z)(function*(y){const f=yi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class yn{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(p=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function xh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nr(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var v;if(f.error&&!Nr(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const v=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rs(f))}saveEventToCache(f){this.cachedEventUids.add(rs(f)),this.lastProcessedEventTime=Date.now()}}function rs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Nr({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Al(y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(y,f={}){return Bt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Mh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rp=/^https?/;function Ms(){return(Ms=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Al(y);for(const p of f)try{if(Sl(p))return}catch(v){}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function Sl(y){const f=Pe(),{protocol:p,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===v}if(!Rp.test(p))return!1;if(Mh.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Wm=new Ut(3e4,6e4);function Au(){const y=Mt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Su=null;function Km(y){return Su=Su||function Rh(y){return new Promise((f,p)=>{var v,T,R;function q(){Au(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Au(),p(ye(y,"network-request-failed"))},timeout:Wm.get()})}if(null===(T=null===(v=Mt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=Mt().gapi)||void 0===R?void 0:R.load)){const ie=Du("iframefcb");return Mt()[ie]=()=>{gapi.load?q():p(ye(y,"network-request-failed"))},ro(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Fe=>p(Fe))}q()}}).catch(f=>{throw Su=null,f})}(y),Su}const Ym=new Ut(5e3,15e3),xu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jo(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?Jn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:oe.SDK_VERSION},T=xl.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Nh(){return Nh=(0,d.Z)(function*(y){const f=yield Km(y),p=Mt().gapi;return ne(p,y,"internal-error"),f.open({where:document.body,url:jo(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xu,dontclear:!0},v=>new Promise(function(){var T=(0,d.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const ie=ye(y,"network-request-failed"),Fe=Mt().setTimeout(()=>{q(ie)},Ym.get());function Qe(){Mt().clearTimeout(Fe),R(v)}v.ping(Qe).then(Qe,()=>{q(ie)})});return function(R,q){return T.apply(this,arguments)}}()))}),Nh.apply(this,arguments)}const Pp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Aa{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Mu(y,f,p,v,T,R){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(f instanceof ys){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Qe]of Object.entries(R||{}))q[Fe]=Qe}if(f instanceof Lr){const Fe=f.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(q.scopes=Fe.join(","))}y.tenantId&&(q.tid=y.tenantId);const ie=q;for(const Fe of Object.keys(ie))void 0===ie[Fe]&&delete ie[Fe];return`${function od({config:y}){return y.emulator?Jn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ie).slice(1)}`}const Li="webStorageSupport";class Ph extends class Lp{constructor(f){this.factorId=f}_process(f,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,v);case"signin":return this._finalizeSignIn(f,p.credential);default:return qe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ph(f)}_finalizeEnroll(f,p,v){return function Zc(y,f){return Bt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(y,f))}(f,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function wa(y,f){return Bt(y,"POST","/v2/accounts/mfaSignIn:finalize",Wt(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ey=(()=>{class y{constructor(){}static assertion(p){return Ph._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var ty="@firebase/auth",Vp="0.19.12";class kh{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,d.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function co(){return window}function In(){return(In=(0,d.Z)(function*(y,f,p){var v;const{BuildInfo:T}=co();J(f.sessionId,"AuthEvent did not contain a session ID");const R=yield b0(f.sessionId),q={};return tr()?q.ibi=T.packageName:En()?q.apn=T.packageName:Ie(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,Mu(y,p,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function Gr(){return(Gr=(0,d.Z)(function*(y){const{BuildInfo:f}=co(),p={};tr()?p.iosBundleId=f.packageName:En()?p.androidPackageName=f.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Al(y,p)})).apply(this,arguments)}function ud(){return(ud=(0,d.Z)(function*(y,f,p){const{cordova:v}=co();let T=()=>{};try{yield new Promise((R,q)=>{let ie=null;function Fe(){var st;R();const Dn=null===(st=v.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Dn&&Dn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Qe(){ie||(ie=window.setTimeout(()=>{q(ye(y,"redirect-cancelled-by-user"))},2e3))}function pt(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}f.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),En()&&document.addEventListener("visibilitychange",pt,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",pt,!1),ie&&window.clearTimeout(ie)}})}finally{T()}})).apply(this,arguments)}function b0(y){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,d.Z)(function*(y){const f=$p(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $p(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function Up(y){(0,oe._registerComponent)(new re.wA("auth",(f,{options:p})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=v.options;return((ie,Fe)=>{ne(R&&!R.includes(":"),"invalid-api-key",{appName:ie.name}),ne(!(null==q?void 0:q.includes(":")),"argument-error",{appName:ie.name});const Qe={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ca(y)},pt=new Jr(ie,Fe,Qe);return function ge(y,f){const p=(null==f?void 0:f.persistence)||[],v=(Array.isArray(p)?p:[p]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(pt,p),pt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,v)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new re.wA("auth-internal",f=>{const p=Me(f.getProvider("auth").getImmediate());return new kh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(ty,Vp,function Fh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(ty,Vp,"esm2017")}("Browser");class Uh extends yn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function ry(y){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(y){const f=yield ld()._get(Hh(y));return f&&(yield ld()._remove(Hh(y))),f})).apply(this,arguments)}function jh(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function ld(){return te(Ft)}function Hh(y){return ce("authEvent",y.config.apiKey,y.name)}function kl(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Gp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Fl(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Gh(y=(0,O.z$)()){return!("file:"!==Fl()&&"ionic:"!==Fl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kn(){try{const y=self.localStorage,f=yi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ou(y=(0,O.z$)()){return function iy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function oi(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Ho()&&(0,O.hl)()}return!1}function Ho(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vl(){return(function hd(){return"http:"===Fl()||"https:"===Fl()}()||(0,O.ru)()||Gh())&&!function Ll(){return(0,O.b$)()||(0,O.UG)()}()&&Kn()&&!Ho()}function Ul(){return Gh()&&"undefined"!=typeof document}function $o(){return($o=(0,d.Z)(function*(){return!!Ul()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},Oa=ne,Bl="persistence";function Go(y){return pd.apply(this,arguments)}function pd(){return(pd=(0,d.Z)(function*(y){yield y._initializationPromise;const f=gd(),p=ce(Bl,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function gd(){var y;try{return(null===(y=function Na(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const md=ne;class Vi{constructor(){this.browserResolver=te(class Sa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qn,this._completeRedirectFn=Mn}_openPopup(f,p,v,T){var R=this;return(0,d.Z)(function*(){var q;J(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ie=Mu(f,p,v,Pe(),T);return function Fp(y,f,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let ie="";const Fe=Object.assign(Object.assign({},Pp),{width:v.toString(),height:T.toString(),top:R,left:q}),Qe=(0,O.z$)().toLowerCase();p&&(ie=_r(Qe)?"_blank":p),ft(Qe)&&(f=f||"http://localhost",Fe.scrollbars="yes");const pt=Object.entries(Fe).reduce((Dn,[Ui,$l])=>`${Dn}${Ui}=${$l},`,"");if(function Xa(y=(0,O.z$)()){var f;return tr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Qe)&&"_self"!==ie)return function Rl(y,f){const p=document.createElement("a");p.href=y,p.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(f||"",ie),new Aa(null);const st=window.open(f||"",ie,pt);ne(st,y,"popup-blocked");try{st.focus()}catch(Dn){}return new Aa(st)}(f,ie,yi())})()}_openRedirect(f,p,v,T){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(f),function Ri(y){Mt().location.href=y}(Mu(f,p,v,Pe(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(J(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(f){var p=this;return(0,d.Z)(function*(){const v=yield function Qm(y){return Nh.apply(this,arguments)}(f),T=new yn(f);return v.register("authEvent",R=>(ne(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Li,{type:Li},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Li];void 0!==q&&p(!!q),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Np(y){return Ms.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Wi()||Kt()||tr()}}),this.cordovaResolver=te(class dd{constructor(){this._redirectPersistence=qn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn}_initialize(f){var p=this;return(0,d.Z)(function*(){const v=f._key();let T=p.eventManagers.get(v);return T||(T=new Uh(f),p.eventManagers.set(v,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,v,T){var R=this;return(0,d.Z)(function*(){!function Vh(y){var f,p,v,T,R,q,ie,Fe,Qe,pt;const st=co();ne("function"==typeof(null===(f=null==st?void 0:st.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(p=null==st?void 0:st.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(R=null===(T=null===(v=null==st?void 0:st.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Fe=null===(ie=null===(q=null==st?void 0:st.cordova)||void 0===q?void 0:q.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(pt=null===(Qe=null==st?void 0:st.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===pt?void 0:pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function uo(){Vn.clear()}(),yield R._originValidation(f);const ie=function Ol(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:jh(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(f,v,T);yield function ny(y,f){return ld()._set(Hh(y),f)}(f,ie);const Fe=yield function Lh(y,f,p){return In.apply(this,arguments)}(f,ie,p),Qe=yield function xa(y){const{cordova:f}=co();return new Promise(p=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function js(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Fe);return function jp(y,f,p){return ud.apply(this,arguments)}(f,q,Qe)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function cr(y){return Gr.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=co(),q=setTimeout((0,d.Z)(function*(){yield ry(f),p.onEvent(Gp())}),500),ie=function(){var pt=(0,d.Z)(function*(st){clearTimeout(q);const Dn=yield ry(f);let Ui=null;Dn&&(null==st?void 0:st.url)&&(Ui=function Bh(y,f){var p,v;const T=function Pl(y){const f=kl(y),p=f.link?decodeURIComponent(f.link):void 0,v=kl(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return kl(T).link||T||v||p||y}(f);if(T.includes("/__/auth/callback")){const R=kl(T),q=R.firebaseError?function Ru(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,ie=null===(v=null===(p=null==q?void 0:q.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Fe=ie?ye(ie):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Dn,st.url)),p.onEvent(Ui||Gp())});return function(Dn){return pt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ie);const Fe=T,Qe=`${R.packageName.toLowerCase()}://`;co().handleOpenURL=function(){var pt=(0,d.Z)(function*(st){if(st.toLowerCase().startsWith(Qe)&&ie({url:st}),"function"==typeof Fe)try{Fe(st)}catch(Dn){console.error(Dn)}});return function(st){return pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=qn,this._completeRedirectFn=Mn}_initialize(f){var p=this;return(0,d.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,v,T){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,p,v,T)})()}_openRedirect(f,p,v,T){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,p,v,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ul()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return md(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Ir(){return $o.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function qh(y){return y.unwrap()}function yd(y){return Pu(y)}function Pu(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return wi.credentialFromResult(y);const p=f.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=ha;break;case"facebook.com":v=qs;break;case"github.com":v=Uc;break;case"twitter.com":v=su;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ie,nonce:Fe}=f;return R||q||T||ie?ie?p.startsWith("saml.")?Mo._create(p,ie):Qi._fromParams({providerId:p,signInMethod:p,pendingToken:ie,idToken:T,accessToken:R}):new xo(p).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function dr(y,f){return f.catch(p=>{throw p instanceof O.ZR&&function sy(y,f){var p;const v=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new ka(y,function vu(y,f){var p;const v=(0,O.m9)(y),T=f;return ne(f.customData.operationType,v,"argument-error"),ne(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),_a._fromError(v,T)}(y,f));else if(v){const T=Pu(f),R=f;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:yd(p),additionalUserInfo:wr(p),user:is.getOrCreate(T)}})}function ku(y,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:v=>dr(y,p.confirm(v))}})).apply(this,arguments)}class ka{constructor(f,p){this.resolver=p,this.auth=function Zp(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return dr(qh(this.auth),this.resolver.resolveSignIn(f))}}class is{constructor(f){this._delegate=f,this.multiFactor=function Wc(y){const f=(0,O.m9)(y);return Po.has(f)||Po.set(f,ts._fromUser(f)),Po.get(f)}(f)}static getOrCreate(f){return is.USER_MAP.has(f)||is.USER_MAP.set(f,new is(f)),is.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,d.Z)(function*(){return dr(p.auth,gi(p._delegate,f))})()}linkWithPhoneNumber(f,p){var v=this;return(0,d.Z)(function*(){return ku(v.auth,function Tl(y,f,p){return Lo.apply(this,arguments)}(v._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,d.Z)(function*(){return dr(p.auth,function Tu(y,f,p){return ki.apply(this,arguments)}(p._delegate,f,Vi))})()}linkWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield Go(Me(p.auth)),function Ye(y,f,p){return function wt(y,f,p){return $t.apply(this,arguments)}(y,f,p)}(p._delegate,f,Vi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,d.Z)(function*(){return dr(p.auth,Es(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return ku(this.auth,function Zm(y,f,p){return td.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return dr(this.auth,function le(y,f,p){return Pi.apply(this,arguments)}(this._delegate,f,Vi))}reauthenticateWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield Go(Me(p.auth)),function W(y,f,p){return function Se(y,f,p){return Le.apply(this,arguments)}(y,f,p)}(p._delegate,f,Vi)})()}sendEmailVerification(f){return function mi(y,f){return fl.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,d.Z)(function*(){return yield function fa(y,f){return ol.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function ml(y,f){return yl((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function $c(y,f){return yl((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Zn(y,f){return Ei.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ya(y,f){return gl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function yu(y,f,p){return _u.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}is.USER_MAP=new WeakMap;const jl=ne;let Hl=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;jl(T,"invalid-api-key",{appName:p.name}),jl(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Vi:void 0;this._delegate=v.initialize({options:{persistence:zh(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function cn(y,f,p){const v=Me(y);ne(v._canInitEmulator,v,"emulator-config-failed"),ne(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=ar(f),{host:q,port:ie}=function hs(y){const f=ar(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:On(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:On(q)}}}(f);v.config.emulator={url:`${R}//${q}${null===ie?"":`:${ie}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:ie,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Mi(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function ul(y,f){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ot(this._delegate,p)}confirmPasswordReset(p,v){return function pu(y,f,p){return al.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,d.Z)(function*(){return dr(T._delegate,function Oo(y,f,p){return Br.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function mu(y,f){return Ds.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function hl(y,f){const p=Gs.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,d.Z)(function*(){jl(Vl(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function bt(y,f){return Un.apply(this,arguments)}(p._delegate,Vi);return v?dr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Nu(y,f){Me(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:q,complete:ie}=Fa(p,v,T);return this._delegate.onAuthStateChanged(R,q,ie)}onIdTokenChanged(p,v,T){const{next:R,error:q,complete:ie}=Fa(p,v,T);return this._delegate.onIdTokenChanged(R,q,ie)}sendSignInLinkToEmail(p,v){return function dl(y,f,p){return Hc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function hu(y,f,p){return fu.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,d.Z)(function*(){let T;switch(function fd(y,f){Oa(Object.values(qr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Oa(f!==qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Oa(f===qr.NONE,y,"unsupported-persistence-type"):Ho()?Oa(f===qr.NONE||f===qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Oa(f===qr.NONE||Kn(),y,"unsupported-persistence-type")}(v._delegate,p),p){case qr.SESSION:T=qn;break;case qr.LOCAL:T=(yield te(ni)._isAvailable())?ni:Ft;break;case qr.NONE:T=$;break;default:return Ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return dr(this._delegate,function au(y){return Bc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return dr(this._delegate,Sn(this._delegate,p))}signInWithCustomToken(p){return dr(this._delegate,function ws(y,f){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return dr(this._delegate,function cl(y,f,p){return Sn((0,O.m9)(y),sl.credential(f,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return dr(this._delegate,function gu(y,f,p){return Is.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return ku(this._delegate,function zm(y,f,p){return xn.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,d.Z)(function*(){return jl(Vl(),v._delegate,"operation-not-supported-in-this-environment"),dr(v._delegate,function Ca(y,f,p){return id.apply(this,arguments)}(v._delegate,p,Vi))})()}signInWithRedirect(p){var v=this;return(0,d.Z)(function*(){return jl(Vl(),v._delegate,"operation-not-supported-in-this-environment"),yield Go(v._delegate),function x(y,f,p){return function F(y,f,p){return Z.apply(this,arguments)}(y,f,p)}(v._delegate,p,Vi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function mn(y,f){return No.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=qr,y})();function Fa(y,f,p){let v=y;"function"!=typeof y&&({next:v,error:f,complete:p}=y);const T=v;return{next:q=>T(q&&is.getOrCreate(q)),error:f,complete:p}}function zh(y,f){const p=function zp(y,f){const p=gd();if(!p)return[];const v=ce(Bl,y,f);switch(p.getItem(v)){case qr.NONE:return[$];case qr.LOCAL:return[ni,qn];case qr.SESSION:return[qn];default:return[]}}(y,f);if("undefined"!=typeof self&&!p.includes(ni)&&p.push(ni),"undefined"!=typeof window)for(const v of[Ft,qn])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class ho{constructor(){this.providerId="phone",this._delegate=new wi(qh(K.Z.auth()))}static credential(f,p){return wi.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}ho.PHONE_SIGN_IN_METHOD=wi.PHONE_SIGN_IN_METHOD,ho.PROVIDER_ID=wi.PROVIDER_ID;const Wp=ne;class oy{constructor(f,p,v=K.Z.app()){var T;Wp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Mp(f,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fo(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Hl(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:sl,FacebookAuthProvider:qs,GithubAuthProvider:Uc,GoogleAuthProvider:ha,OAuthProvider:xo,SAMLAuthProvider:ei,PhoneAuthProvider:ho,PhoneMultiFactorGenerator:ey,RecaptchaVerifier:oy,TwitterAuthProvider:su,Auth:Hl,AuthCredential:sn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(K.Z)},8306:(it,Ce,k)=>{k.d(Ce,{y:()=>B});var d=k(2961),K=k(727),O=k(8822),oe=k(4671);var re=k(2416),he=k(576),ue=k(2806);let B=(()=>{class Te{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const fe=new Te;return fe.source=this,fe.operator=ke,fe}subscribe(ke,fe,ve){const Xe=function Ge(Te){return Te&&Te instanceof d.Lv||function Q(Te){return Te&&(0,he.m)(Te.next)&&(0,he.m)(Te.error)&&(0,he.m)(Te.complete)}(Te)&&(0,K.Nn)(Te)}(ke)?ke:new d.Hp(ke,fe,ve);return(0,ue.x)(()=>{const{operator:Ze,source:Ie}=this;Xe.add(Ze?Ze.call(Xe,Ie):Ie?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(ke){try{return this._subscribe(ke)}catch(fe){ke.error(fe)}}forEach(ke,fe){return new(fe=j(fe))((ve,Xe)=>{const Ze=new d.Hp({next:Ie=>{try{ke(Ie)}catch(ye){Xe(ye),Ze.unsubscribe()}},error:Xe,complete:ve});this.subscribe(Ze)})}_subscribe(ke){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(ke)}[O.L](){return this}pipe(...ke){return function pe(Te){return 0===Te.length?oe.y:1===Te.length?Te[0]:function(ke){return Te.reduce((fe,ve)=>ve(fe),ke)}}(ke)(this)}toPromise(ke){return new(ke=j(ke))((fe,ve)=>{let Xe;this.subscribe(Ze=>Xe=Ze,Ze=>ve(Ze),()=>fe(Xe))})}}return Te.create=xe=>new Te(xe),Te})();function j(Te){var xe;return null!==(xe=null!=Te?Te:re.v.Promise)&&void 0!==xe?xe:Promise}},7579:(it,Ce,k)=>{k.d(Ce,{x:()=>re});var d=k(8306),K=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),pe=k(2806);let re=(()=>{class ue extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new he(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Ge,observers:Te}=this;return Q||Ge?K.Lc:(this.currentObservers=null,Te.push(j),new K.w0(()=>{this.currentObservers=null,(0,X.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Ge,isStopped:Te}=this;Q?j.error(Ge):Te&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return ue.create=(B,j)=>new he(B,j),ue})();class he extends re{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:K.Lc}}},2961:(it,Ce,k)=>{k.d(Ce,{Hp:()=>ke,Lv:()=>Q});var d=k(576),K=k(727),O=k(2416),oe=k(7849);function X(){}const pe=ue("C",void 0,void 0);function ue(Ie,ye,_e){return{kind:Ie,value:ye,error:_e}}var B=k(3410),j=k(2806);class Q extends K.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,K.Nn)(ye)&&ye.add(this)):this.destination=Ze}static create(ye,_e,He){return new ke(ye,_e,He)}next(ye){this.isStopped?Xe(function he(Ie){return ue("N",Ie,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Xe(function re(Ie){return ue("E",void 0,Ie)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Xe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Te(Ie,ye){return Ge.call(Ie,ye)}class xe{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:_e}=this;if(_e.next)try{_e.next(ye)}catch(He){fe(He)}}error(ye){const{partialObserver:_e}=this;if(_e.error)try{_e.error(ye)}catch(He){fe(He)}else fe(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(_e){fe(_e)}}}class ke extends Q{constructor(ye,_e,He){let je;if(super(),(0,d.m)(ye)||!ye)je={next:null!=ye?ye:void 0,error:null!=_e?_e:void 0,complete:null!=He?He:void 0};else{let ne;this&&O.v.useDeprecatedNextContext?(ne=Object.create(ye),ne.unsubscribe=()=>this.unsubscribe(),je={next:ye.next&&Te(ye.next,ne),error:ye.error&&Te(ye.error,ne),complete:ye.complete&&Te(ye.complete,ne)}):je=ye}this.destination=new xe(je)}}function fe(Ie){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ie):(0,oe.h)(Ie)}function Xe(Ie,ye){const{onStoppedNotification:_e}=O.v;_e&&B.z.setTimeout(()=>_e(Ie,ye))}const Ze={closed:!0,next:X,error:function ve(Ie){throw Ie},complete:X}},727:(it,Ce,k)=>{k.d(Ce,{Lc:()=>pe,w0:()=>X,Nn:()=>re});var d=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Ge)=>`${Ge+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class X{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Te of Ge)try{he(Te)}catch(xe){B=null!=B?B:[],xe instanceof O?B=[...B,...xe.errors]:B.push(xe)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof X){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof X&&B._removeParent(this)}}X.EMPTY=(()=>{const ue=new X;return ue.closed=!0,ue})();const pe=X.EMPTY;function re(ue){return ue instanceof X||ue&&"closed"in ue&&(0,d.m)(ue.remove)&&(0,d.m)(ue.add)&&(0,d.m)(ue.unsubscribe)}function he(ue){(0,d.m)(ue)?ue():ue.unsubscribe()}},2416:(it,Ce,k)=>{k.d(Ce,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ce,k)=>{k.d(Ce,{E:()=>K});const K=new(k(8306).y)(X=>X.complete())},8996:(it,Ce,k)=>{k.d(Ce,{D:()=>ye});var d=k(8421),K=k(5363),O=k(9468),pe=k(8306),he=k(2202),ue=k(576),B=k(9672);function Q(_e,He){if(!_e)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,B.f)(je,He,()=>{const ne=_e[Symbol.asyncIterator]();(0,B.f)(je,He,()=>{ne.next().then(qe=>{qe.done?je.complete():je.next(qe.value)})},0,!0)})})}var Ge=k(3670),Te=k(8239),xe=k(1144),ke=k(6495),fe=k(2206),ve=k(4532),Xe=k(3260);function ye(_e,He){return He?function Ie(_e,He){if(null!=_e){if((0,Ge.c)(_e))return function oe(_e,He){return(0,d.Xf)(_e).pipe((0,O.R)(He),(0,K.Q)(He))}(_e,He);if((0,xe.z)(_e))return function re(_e,He){return new pe.y(je=>{let ne=0;return He.schedule(function(){ne===_e.length?je.complete():(je.next(_e[ne++]),je.closed||this.schedule())})})}(_e,He);if((0,Te.t)(_e))return function X(_e,He){return(0,d.Xf)(_e).pipe((0,O.R)(He),(0,K.Q)(He))}(_e,He);if((0,fe.D)(_e))return Q(_e,He);if((0,ke.T)(_e))return function j(_e,He){return new pe.y(je=>{let ne;return(0,B.f)(je,He,()=>{ne=_e[he.h](),(0,B.f)(je,He,()=>{let qe,J;try{({value:qe,done:J}=ne.next())}catch(se){return void je.error(se)}J?je.complete():je.next(qe)},0,!0)}),()=>(0,ue.m)(null==ne?void 0:ne.return)&&ne.return()})}(_e,He);if((0,Xe.L)(_e))return function Ze(_e,He){return Q((0,Xe.Q)(_e),He)}(_e,He)}throw(0,ve.z)(_e)}(_e,He):(0,d.Xf)(_e)}},8421:(it,Ce,k)=>{k.d(Ce,{Xf:()=>Ge});var d=k(655),K=k(1144),O=k(8239),oe=k(8306),X=k(3670),pe=k(2206),re=k(4532),he=k(6495),ue=k(3260),B=k(576),j=k(7849),Q=k(8822);function Ge(Ie){if(Ie instanceof oe.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Te(Ie){return new oe.y(ye=>{const _e=Ie[Q.L]();if((0,B.m)(_e.subscribe))return _e.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,K.z)(Ie))return function xe(Ie){return new oe.y(ye=>{for(let _e=0;_e<Ie.length&&!ye.closed;_e++)ye.next(Ie[_e]);ye.complete()})}(Ie);if((0,O.t)(Ie))return function ke(Ie){return new oe.y(ye=>{Ie.then(_e=>{ye.closed||(ye.next(_e),ye.complete())},_e=>ye.error(_e)).then(null,j.h)})}(Ie);if((0,pe.D)(Ie))return ve(Ie);if((0,he.T)(Ie))return function fe(Ie){return new oe.y(ye=>{for(const _e of Ie)if(ye.next(_e),ye.closed)return;ye.complete()})}(Ie);if((0,ue.L)(Ie))return function Xe(Ie){return ve((0,ue.Q)(Ie))}(Ie)}throw(0,re.z)(Ie)}function ve(Ie){return new oe.y(ye=>{(function Ze(Ie,ye){var _e,He,je,ne;return(0,d.mG)(this,void 0,void 0,function*(){try{for(_e=(0,d.KL)(Ie);!(He=yield _e.next()).done;)if(ye.next(He.value),ye.closed)return}catch(qe){je={error:qe}}finally{try{He&&!He.done&&(ne=_e.return)&&(yield ne.call(_e))}finally{if(je)throw je.error}}ye.complete()})})(Ie,ye).catch(_e=>ye.error(_e))})}},6451:(it,Ce,k)=>{k.d(Ce,{T:()=>pe});var d=k(8189),K=k(8421),O=k(515),oe=k(7669),X=k(8996);function pe(...re){const he=(0,oe.yG)(re),ue=(0,oe._6)(re,1/0),B=re;return B.length?1===B.length?(0,K.Xf)(B[0]):(0,d.J)(ue)((0,X.D)(B,he)):O.E}},5403:(it,Ce,k)=>{k.d(Ce,{x:()=>K});var d=k(2961);function K(oe,X,pe,re,he){return new O(oe,X,pe,re,he)}class O extends d.Lv{constructor(X,pe,re,he,ue,B){super(X),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Q){X.error(Q)}}:super._next,this._error=he?function(j){try{he(j)}catch(Q){X.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(j){X.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(it,Ce,k)=>{k.d(Ce,{U:()=>O});var d=k(4482),K=k(5403);function O(oe,X){return(0,d.e)((pe,re)=>{let he=0;pe.subscribe((0,K.x)(re,ue=>{re.next(oe.call(X,ue,he++))}))})}},8189:(it,Ce,k)=>{k.d(Ce,{J:()=>O});var d=k(5577),K=k(4671);function O(oe=1/0){return(0,d.z)(K.y,oe)}},5577:(it,Ce,k)=>{k.d(Ce,{z:()=>he});var d=k(4004),K=k(8421),O=k(4482),oe=k(9672),X=k(5403),re=k(576);function he(ue,B,j=1/0){return(0,re.m)(B)?he((Q,Ge)=>(0,d.U)((Te,xe)=>B(Q,Te,Ge,xe))((0,K.Xf)(ue(Q,Ge))),j):("number"==typeof B&&(j=B),(0,O.e)((Q,Ge)=>function pe(ue,B,j,Q,Ge,Te,xe,ke){const fe=[];let ve=0,Xe=0,Ze=!1;const Ie=()=>{Ze&&!fe.length&&!ve&&B.complete()},ye=He=>ve<Q?_e(He):fe.push(He),_e=He=>{Te&&B.next(He),ve++;let je=!1;(0,K.Xf)(j(He,Xe++)).subscribe((0,X.x)(B,ne=>{null==Ge||Ge(ne),Te?ye(ne):B.next(ne)},()=>{je=!0},void 0,()=>{if(je)try{for(ve--;fe.length&&ve<Q;){const ne=fe.shift();xe?(0,oe.f)(B,xe,()=>_e(ne)):_e(ne)}Ie()}catch(ne){B.error(ne)}}))};return ue.subscribe((0,X.x)(B,ye,()=>{Ze=!0,Ie()})),()=>{null==ke||ke()}}(Q,Ge,ue,j)))}},5363:(it,Ce,k)=>{k.d(Ce,{Q:()=>oe});var d=k(9672),K=k(4482),O=k(5403);function oe(X,pe=0){return(0,K.e)((re,he)=>{re.subscribe((0,O.x)(he,ue=>(0,d.f)(he,X,()=>he.next(ue),pe),()=>(0,d.f)(he,X,()=>he.complete(),pe),ue=>(0,d.f)(he,X,()=>he.error(ue),pe)))})}},3099:(it,Ce,k)=>{k.d(Ce,{B:()=>pe});var d=k(8996),K=k(5698),O=k(7579),oe=k(2961),X=k(4482);function pe(he={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Q=!0}=he;return Ge=>{let Te=null,xe=null,ke=null,fe=0,ve=!1,Xe=!1;const Ze=()=>{null==xe||xe.unsubscribe(),xe=null},Ie=()=>{Ze(),Te=ke=null,ve=Xe=!1},ye=()=>{const _e=Te;Ie(),null==_e||_e.unsubscribe()};return(0,X.e)((_e,He)=>{fe++,!Xe&&!ve&&Ze();const je=ke=null!=ke?ke:ue();He.add(()=>{fe--,0===fe&&!Xe&&!ve&&(xe=re(ye,Q))}),je.subscribe(He),Te||(Te=new oe.Hp({next:ne=>je.next(ne),error:ne=>{Xe=!0,Ze(),xe=re(Ie,B,ne),je.error(ne)},complete:()=>{ve=!0,Ze(),xe=re(Ie,j),je.complete()}}),(0,d.D)(_e).subscribe(Te))})(Ge)}}function re(he,ue,...B){return!0===ue?(he(),null):!1===ue?null:ue(...B).pipe((0,K.q)(1)).subscribe(()=>he())}},9468:(it,Ce,k)=>{k.d(Ce,{R:()=>K});var d=k(4482);function K(O,oe=0){return(0,d.e)((X,pe)=>{pe.add(O.schedule(()=>X.subscribe(pe),oe))})}},5698:(it,Ce,k)=>{k.d(Ce,{q:()=>oe});var d=k(515),K=k(4482),O=k(5403);function oe(X){return X<=0?()=>d.E:(0,K.e)((pe,re)=>{let he=0;pe.subscribe((0,O.x)(re,ue=>{++he<=X&&(re.next(ue),X<=he&&re.complete())}))})}},8505:(it,Ce,k)=>{k.d(Ce,{b:()=>X});var d=k(576),K=k(4482),O=k(5403),oe=k(4671);function X(pe,re,he){const ue=(0,d.m)(pe)||re||he?{next:pe,error:re,complete:he}:pe;return ue?(0,K.e)((B,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let Ge=!0;B.subscribe((0,O.x)(j,Te=>{var xe;null===(xe=ue.next)||void 0===xe||xe.call(ue,Te),j.next(Te)},()=>{var Te;Ge=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var xe;Ge=!1,null===(xe=ue.error)||void 0===xe||xe.call(ue,Te),j.error(Te)},()=>{var Te,xe;Ge&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(xe=ue.finalize)||void 0===xe||xe.call(ue)}))}):oe.y}},4408:(it,Ce,k)=>{k.d(Ce,{o:()=>X});var d=k(727);class K extends d.w0{constructor(re,he){super()}schedule(re,he=0){return this}}const O={setInterval(pe,re,...he){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,re,...he):setInterval(pe,re,...he)},clearInterval(pe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class X extends K{constructor(re,he){super(re,he),this.scheduler=re,this.work=he,this.pending=!1}schedule(re,he=0){if(this.closed)return this;this.state=re;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(B,this.id,he),this}requestAsyncId(re,he,ue=0){return O.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,he,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return he;O.clearInterval(he)}execute(re,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,he);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,he){let B,ue=!1;try{this.work(re)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:he}=this,{actions:ue}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(he,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ce,k)=>{k.d(Ce,{v:()=>O});var d=k(6063);class K{constructor(X,pe=K.now){this.schedulerActionCtor=X,this.now=pe}schedule(X,pe=0,re){return new this.schedulerActionCtor(this,X).schedule(re,pe)}}K.now=d.l.now;class O extends K{constructor(X,pe=K.now){super(X,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:pe}=this;if(this._active)return void pe.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=pe.shift());if(this._active=!1,re){for(;X=pe.shift();)X.unsubscribe();throw re}}}},4986:(it,Ce,k)=>{k.d(Ce,{z:()=>O});var d=k(4408);const O=new(k(7565).v)(d.o)},6063:(it,Ce,k)=>{k.d(Ce,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(it,Ce,k)=>{k.d(Ce,{z:()=>d});const d={setTimeout(K,O,...oe){const{delegate:X}=d;return(null==X?void 0:X.setTimeout)?X.setTimeout(K,O,...oe):setTimeout(K,O,...oe)},clearTimeout(K){const{delegate:O}=d;return((null==O?void 0:O.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(it,Ce,k)=>{k.d(Ce,{h:()=>K});const K=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ce,k)=>{k.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ce,k)=>{k.d(Ce,{_6:()=>pe,jO:()=>oe,yG:()=>X});var d=k(576);function O(re){return re[re.length-1]}function oe(re){return(0,d.m)(O(re))?re.pop():void 0}function X(re){return function K(re){return re&&(0,d.m)(re.schedule)}(O(re))?re.pop():void 0}function pe(re,he){return"number"==typeof O(re)?re.pop():he}},8737:(it,Ce,k)=>{function d(K,O){if(K){const oe=K.indexOf(O);0<=oe&&K.splice(oe,1)}}k.d(Ce,{P:()=>d})},3888:(it,Ce,k)=>{function d(K){const oe=K(X=>{Error.call(X),X.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>d})},2806:(it,Ce,k)=>{k.d(Ce,{O:()=>oe,x:()=>O});var d=k(2416);let K=null;function O(X){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!K;if(pe&&(K={errorThrown:!1,error:null}),X(),pe){const{errorThrown:re,error:he}=K;if(K=null,re)throw he}}else X()}function oe(X){d.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=X)}},9672:(it,Ce,k)=>{function d(K,O,oe,X=0,pe=!1){const re=O.schedule(function(){oe(),pe?K.add(this.schedule(null,X)):this.unsubscribe()},X);if(K.add(re),!pe)return re}k.d(Ce,{f:()=>d})},4671:(it,Ce,k)=>{function d(K){return K}k.d(Ce,{y:()=>d})},1144:(it,Ce,k)=>{k.d(Ce,{z:()=>d});const d=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(it,Ce,k)=>{k.d(Ce,{D:()=>K});var d=k(576);function K(O){return Symbol.asyncIterator&&(0,d.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(it,Ce,k)=>{function d(K){return"function"==typeof K}k.d(Ce,{m:()=>d})},3670:(it,Ce,k)=>{k.d(Ce,{c:()=>O});var d=k(8822),K=k(576);function O(oe){return(0,K.m)(oe[d.L])}},6495:(it,Ce,k)=>{k.d(Ce,{T:()=>O});var d=k(2202),K=k(576);function O(oe){return(0,K.m)(null==oe?void 0:oe[d.h])}},8239:(it,Ce,k)=>{k.d(Ce,{t:()=>K});var d=k(576);function K(O){return(0,d.m)(null==O?void 0:O.then)}},3260:(it,Ce,k)=>{k.d(Ce,{L:()=>oe,Q:()=>O});var d=k(655),K=k(576);function O(X){return(0,d.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:he,done:ue}=yield(0,d.qq)(re.read());if(ue)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{re.releaseLock()}})}function oe(X){return(0,K.m)(null==X?void 0:X.getReader)}},4482:(it,Ce,k)=>{k.d(Ce,{A:()=>K,e:()=>O});var d=k(576);function K(oe){return(0,d.m)(null==oe?void 0:oe.lift)}function O(oe){return X=>{if(K(X))return X.lift(function(pe){try{return oe(pe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(it,Ce,k)=>{k.d(Ce,{h:()=>O});var d=k(2416),K=k(3410);function O(oe){K.z.setTimeout(()=>{const{onUnhandledError:X}=d.v;if(!X)throw oe;X(oe)})}},4532:(it,Ce,k)=>{function d(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>d})},655:(it,Ce,k)=>{function oe(J,se){var te={};for(var Ee in J)Object.prototype.hasOwnProperty.call(J,Ee)&&se.indexOf(Ee)<0&&(te[Ee]=J[Ee]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(Ee=Object.getOwnPropertySymbols(J);ge<Ee.length;ge++)se.indexOf(Ee[ge])<0&&Object.prototype.propertyIsEnumerable.call(J,Ee[ge])&&(te[Ee[ge]]=J[Ee[ge]])}return te}function he(J,se,te,Ee){return new(te||(te=Promise))(function(Pe,It){function qt(Ut){try{$e(Ee.next(Ut))}catch(Jn){It(Jn)}}function rn(Ut){try{$e(Ee.throw(Ut))}catch(Jn){It(Jn)}}function $e(Ut){Ut.done?Pe(Ut.value):function ge(Pe){return Pe instanceof te?Pe:new te(function(It){It(Pe)})}(Ut.value).then(qt,rn)}$e((Ee=Ee.apply(J,se||[])).next())})}function fe(J){return this instanceof fe?(this.v=J,this):new fe(J)}function ve(J,se,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,Ee=te.apply(J,se||[]),Pe=[];return ge={},It("next"),It("throw"),It("return"),ge[Symbol.asyncIterator]=function(){return this},ge;function It(vn){Ee[vn]&&(ge[vn]=function(Jt){return new Promise(function(hi,Wt){Pe.push([vn,Jt,hi,Wt])>1||qt(vn,Jt)})})}function qt(vn,Jt){try{!function rn(vn){vn.value instanceof fe?Promise.resolve(vn.value.v).then($e,Ut):Jn(Pe[0][2],vn)}(Ee[vn](Jt))}catch(hi){Jn(Pe[0][3],hi)}}function $e(vn){qt("next",vn)}function Ut(vn){qt("throw",vn)}function Jn(vn,Jt){vn(Jt),Pe.shift(),Pe.length&&qt(Pe[0][0],Pe[0][1])}}function Ze(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function Q(J){var se="function"==typeof Symbol&&Symbol.iterator,te=se&&J[se],Ee=0;if(te)return te.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ee>=J.length&&(J=void 0),{value:J&&J[Ee++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),te={},Ee("next"),Ee("throw"),Ee("return"),te[Symbol.asyncIterator]=function(){return this},te);function Ee(Pe){te[Pe]=J[Pe]&&function(It){return new Promise(function(qt,rn){!function ge(Pe,It,qt,rn){Promise.resolve(rn).then(function($e){Pe({value:$e,done:qt})},It)}(qt,rn,(It=J[Pe](It)).done,It.value)})}}}k.d(Ce,{FC:()=>ve,KL:()=>Ze,_T:()=>oe,mG:()=>he,qq:()=>fe})},5e3:(it,Ce,k)=>{k.d(Ce,{$8M:()=>Du,$Z:()=>Hd,AFp:()=>Hw,AaK:()=>he,CHM:()=>ll,CRH:()=>ra,CZH:()=>sa,CqO:()=>Af,DdM:()=>_m,EJc:()=>zw,EpF:()=>o_,F4k:()=>u_,FYo:()=>dm,FiY:()=>si,G48:()=>Ti,GfV:()=>sv,Gpc:()=>j,JOm:()=>ie,LFG:()=>Ye,LSH:()=>$h,Lbi:()=>GD,NdJ:()=>Za,OlP:()=>bn,Oqu:()=>Pf,PXZ:()=>Kw,Q6J:()=>qa,QGY:()=>a_,Qsj:()=>gD,R0b:()=>oa,RDi:()=>Ji,Rgc:()=>Kf,SBq:()=>$f,Sil:()=>WD,Suo:()=>bv,TTD:()=>qs,TgZ:()=>Df,VKq:()=>Zf,VLi:()=>Ww,X6Q:()=>Mm,XFs:()=>ot,Xpm:()=>Nt,Y36:()=>If,YKP:()=>qf,YNc:()=>aE,Yjl:()=>_r,Yz7:()=>Jt,ZZ4:()=>zv,_Bn:()=>_c,_UZ:()=>kg,_Vd:()=>cm,_c5:()=>Pm,_uU:()=>Hg,aQg:()=>Wv,c2e:()=>qw,cJS:()=>Wt,cg1:()=>Ff,dDg:()=>xm,deG:()=>Sp,dqk:()=>Vt,eFA:()=>dh,ekj:()=>Ka,g9A:()=>$w,h0i:()=>vc,hGG:()=>cb,hij:()=>Gu,iGM:()=>Mw,ifc:()=>jt,ip1:()=>Rv,kL8:()=>Kg,lG2:()=>Kt,n5z:()=>Dl,oAB:()=>Y,oxw:()=>Fg,q4F:()=>hm,qLn:()=>dr,qOj:()=>Cg,qZA:()=>$d,sBO:()=>eb,sIi:()=>$a,s_b:()=>Em,soG:()=>Ov,tBr:()=>$r,tb:()=>Gw,tp0:()=>rs,uIk:()=>Wy,vHH:()=>xe,vpe:()=>Io,wAp:()=>gt,xp6:()=>vy,z2F:()=>Bv,zSh:()=>Hi,zs3:()=>bi});var d=k(7579),K=k(727),O=k(8306),oe=k(6451),X=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return he(this())},i}function Q(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class xe extends Error{constructor(s,a){super(function ke(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function ye(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${ve(i)} found${a}`)}function rn(i,s){null==i&&function $e(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Bt(i){return ir(i,Si)||ir(i,zi)}function ir(i,s){return i.hasOwnProperty(s)?i[s]:null}function xr(i){return i&&(i.hasOwnProperty(Mr)||i.hasOwnProperty(Zi))?i[Mr]:null}const Si=pe({\u0275prov:pe}),Mr=pe({\u0275inj:pe}),zi=pe({ngInjectableDef:pe}),Zi=pe({ngInjectorDef:pe});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let kr;function $n(i){const s=kr;return kr=i,s}function Qr(i,s,a){const l=Bt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ot.Optional?null:void 0!==s?s:void ye(he(i),"Injector")}function gn(i){return{toString:i}.toString()}var er=(()=>((er=er||{})[er.OnPush=0]="OnPush",er[er.Default=1]="Default",er))(),jt=(()=>{return(i=jt||(jt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",jt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=rt||"undefined"!=typeof global&&global||mt||sr,or={},at=[],yr=pe({\u0275cmp:pe}),Pt=pe({\u0275dir:pe}),We=pe({\u0275pipe:pe}),De=pe({\u0275mod:pe}),Je=pe({\u0275fac:pe}),ut=pe({__NG_ELEMENT_ID__:pe});let kt=0;function Nt(i){return gn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===er.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||jt.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,g=i.features,_=i.pipes;return l.id+=kt++,l.inputs=ft(i.inputs,a),l.outputs=ft(i.outputs),g&&g.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,l})}function L(i){return Ht(i)||function En(i){return i[Pt]||null}(i)}function $(i){return function At(i){return i[We]||null}(i)}const ce={};function Y(i){return gn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ce[i.id]=i.type),s})}function ft(i,s){if(null==i)return or;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],g=c;Array.isArray(c)&&(g=c[1],c=c[0]),a[c]=l,s&&(s[c]=g)}return a}const Kt=Nt;function _r(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ht(i){return i[yr]||null}function ln(i,s){const a=i[De]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function pi(i){return Array.isArray(i)&&"object"==typeof i[1]}function Xr(i){return Array.isArray(i)&&!0===i[1]}function Oc(i){return 0!=(8&i.flags)}function gs(i){return 2==(2&i.flags)}function nu(i){return 1==(1&i.flags)}function Fr(i){return null!==i.template}function bh(i){return 0!=(512&i[2])}function Lr(i,s){return i.hasOwnProperty(Je)?i[Je]:null}class xo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function qs(){return ha}function ha(i){return i.type.prototype.ngOnChanges&&(i.setInput=Dp),Uc}function Uc(){const i=_s(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===or)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Dp(i,s,a,l){const c=_s(i)||function ei(i,s){return i[Mo]=s}(i,{previous:or,current:null}),g=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],b=_[E];g[E]=new xo(b&&b.currentValue,s,_===or),i[l]=s}qs.ngInherit=!0;const Mo="__ngSimpleChanges__";function _s(i){return i[Mo]||null}let lu;function Ji(i){lu=i}function dn(i){return!!i.listen}const Ro={createRenderer:(i,s)=>function fa(){return void 0!==lu?lu:"undefined"!=typeof document?document:void 0}()};function an(i){for(;Array.isArray(i);)i=i[0];return i}function Zs(i,s){return an(s[i])}function vr(i,s){return an(s[i.index])}function pa(i,s){return i.data[s]}function Er(i,s){const a=s[i];return pi(a)?a:a[0]}function Es(i){return 4==(4&i[2])}function Xi(i){return 128==(128&i[2])}function Ur(i,s){return null==s?null:i[s]}function ws(i){i[18]=0}function bs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:Ks(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function pu(){return lt.bindingsEnabled}function we(){return lt.lFrame.lView}function Ot(){return lt.lFrame.tView}function ll(i){return lt.lFrame.contextLView=i,i[8]}function mn(){let i=No();for(;null!==i&&64===i.type;)i=i.parent;return i}function No(){return lt.lFrame.currentTNode}function Br(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function cl(){return lt.lFrame.isParent}function gu(){return lt.isInCheckNoChangesMode}function Is(i){lt.isInCheckNoChangesMode=i}function lr(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Ds(){return lt.lFrame.bindingIndex++}function _u(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ma(s)}function ma(i){lt.lFrame.currentDirectiveIndex=i}function gl(){return lt.lFrame.currentQueryIndex}function ml(i){lt.lFrame.currentQueryIndex=i}function $c(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function yl(i,s,a){if(a&ot.SkipSelf){let c=s,g=i;for(;!(c=c.parent,null!==c||a&ot.Host||(c=$c(g),null===c||(g=g[15],10&c.type))););if(null===c)return!1;s=c,i=g}const l=lt.lFrame=Gc();return l.currentTNode=s,l.lView=i,!0}function Ws(i){const s=Gc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Gc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Ks(i):s}function Ks(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function qc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const zc=qc;function Ys(){const i=qc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function wr(){return lt.lFrame.selectedIndex}function Ts(i){lt.lFrame.selectedIndex=i}function wn(){const i=lt.lFrame;return pa(i.tView,i.selectedIndex)}function es(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:S}=g;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function _a(i,s,a){Zc(i,s,3,a)}function vu(i,s,a,l){(3&i[2])===a&&Zc(i,s,a,l)}function Fn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Zc(i,s,a,l){const g=null!=l?l:-1,_=s.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=l&&E>=l)break}else s[b]<0&&(i[18]+=65536),(E<g||-1==g)&&(Cp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Cp(i,s,a,l){const c=a[l]<0,g=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Po{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ht(i,s,a){const l=dn(i);let c=0;for(;c<a.length;){const g=a[c];if("number"==typeof g){if(0!==g)break;c++;const _=a[c++],E=a[c++],b=a[c++];l?i.setAttribute(s,E,b,_):s.setAttributeNS(_,E,b)}else{const _=g,E=a[++c];zn(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function qn(i){return 3===i||4===i||6===i}function zn(i){return 64===i.charCodeAt(0)}function Js(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||yi(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function yi(i,s,a,l,c){let g=0,_=i.length;if(-1===s)_=-1;else for(;g<i.length;){const E=i[g++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=g-1;break}}}for(;g<i.length;){const E=i[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[g+1]=c));if(l===i[g+1])return void(i[g+2]=c)}g++,null!==l&&g++,null!==c&&g++}-1!==_&&(i.splice(_,0,s),g=_+1),i.splice(g++,0,a),null!==l&&i.splice(g++,0,l),null!==c&&i.splice(g++,0,c)}function Rr(i){return-1!==i}function Mt(i){return 32767&i}function dt(i,s){let a=function Ri(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let va=!0;function ns(i){const s=va;return va=i,s}let Ah=0;function Xs(i,s){const a=jr(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Ni(l.data,i),Ni(s,null),Ni(l.blueprint,null));const c=_i(i,s),g=i.injectorIndex;if(Rr(c)){const _=Mt(c),E=dt(c,s),b=E[1].data;for(let A=0;A<8;A++)s[g+A]=E[_+A]|b[_+A]}return s[g+8]=c,g}function Ni(i,s){i.push(0,0,0,0,0,0,0,0,s)}function jr(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function _i(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const g=c[1],_=g.type;if(l=2===_?g.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function eo(i,s,a){!function ko(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(l=a[ut]),null==l&&(l=a[ut]=Ah++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Ss(i,s,a){if(a&ot.Optional)return i;ye(s,"NodeInjector")}function wu(i,s,a,l){if(a&ot.Optional&&void 0===l&&(l=null),0==(a&(ot.Self|ot.Host))){const c=i[9],g=$n(void 0);try{return c?c.get(s,l,a&ot.Optional):Qr(s,l,a&ot.Optional)}finally{$n(g)}}return Ss(l,s,a)}function Fo(i,s,a,l=ot.Default,c){if(null!==i){const g=function bu(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:no:s}(a);if("function"==typeof g){if(!yl(s,i,l))return l&ot.Host?Ss(c,a,l):wu(s,a,l,c);try{const _=g(l);if(null!=_||l&ot.Optional)return _;ye(a)}finally{zc()}}else if("number"==typeof g){let _=null,E=jr(i,s),b=-1,A=l&ot.Host?s[16][6]:null;for((-1===E||l&ot.SkipSelf)&&(b=-1===E?_i(i,s):s[E+8],-1!==b&&Iu(l,!1)?(_=s[1],E=Mt(b),s=dt(b,s)):E=-1);-1!==E;){const S=s[1];if(wa(g,E,S.data)){const P=Ln(E,s,a,_,l,A);if(P!==to)return P}b=s[E+8],-1!==b&&Iu(l,s[1].data[E+8]===A)&&wa(g,E,s)?(_=S,E=Mt(b),s=dt(b,s)):E=-1}}}return wu(s,a,l,c)}const to={};function no(){return new vi(mn(),we())}function Ln(i,s,a,l,c,g){const _=s[1],E=_.data[i+8],S=Ea(E,_,a,null==l?gs(E)&&va:l!=_&&0!=(3&E.type),c&ot.Host&&g===E);return null!==S?ni(s,_,S,E):to}function Ea(i,s,a,l,c){const g=i.providerIndexes,_=s.data,E=1048575&g,b=i.directiveStart,S=g>>20,V=c?E+S:i.directiveEnd;for(let z=l?E:E+S;z<V;z++){const me=_[z];if(z<b&&a===me||z>=b&&me.type===a)return z}if(c){const z=_[b];if(z&&Fr(z)&&z.type===a)return b}return null}function ni(i,s,a,l){let c=i[a];const g=s.data;if(function Wc(i){return i instanceof Po}(c)){const _=c;_.resolving&&function Xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(g[a]));const E=ns(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?$n(_.injectImpl):null;yl(i,l,ot.Default);try{c=i[a]=_.factory(void 0,g,i,l),s.firstCreatePass&&a>=l.directiveStart&&function El(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:g}=s.type.prototype;if(l){const _=ha(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==b&&$n(b),ns(E),_.resolving=!1,zc()}}return c}function wa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Iu(i,s){return!(i&ot.Self||i&ot.Host&&s)}class vi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Fo(this._tNode,this._lView,s,l,a)}}function Dl(i){return gn(()=>{const s=i.prototype.constructor,a=s[Je]||ro(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const g=c[Je]||ro(c);if(g&&g!==a)return g;c=Object.getPrototypeOf(c)}return g=>new g})}function ro(i){return Ge(i)?()=>{const s=ro(Q(i));return s&&s()}:Lr(i)}function Du(i){return function Il(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const g=a[c];if(qn(g))break;if(0===g)c+=2;else if("number"==typeof g)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(g===s)return a[c+1];c+=2}}}return null}(mn(),i)}const ba="__parameters__";function Ia(i,s,a){return gn(()=>{const l=function Qc(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...g){if(this instanceof c)return l.apply(this,g),this;const _=new c(...g);return E.annotation=_,E;function E(b,A,S){const P=b.hasOwnProperty(ba)?b[ba]:Object.defineProperty(b,ba,{value:[]})[ba];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),b}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class bn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Sp=new bn("AnalyzeForEntryComponents");function fn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),fn(l,s)):s!==i&&s.push(l)}return s}function ri(i,s){i.forEach(a=>Array.isArray(a)?ri(a,s):s(a))}function Zn(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ei(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Hr(i,s,a){let l=Ca(i,s);return l>=0?i[1|l]=a:(l=~l,function Da(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function rd(i,s){const a=Ca(i,s);if(a>=0)return i[1|a]}function Ca(i,s){return function le(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const g=l+(c-l>>1),_=i[g<<a];if(s===_)return g<<a;_>s?c=g:l=g+1}return~(c<<a)}(i,s,1)}const Fi={},ao="__NG_DI_FLAG__",uo="ngTempTokenPath",D=/\n/gm,F="__source",Z=pe({provide:String,useValue:pe});let W;function Se(i){const s=W;return W=i,s}function Le(i,s=ot.Default){if(void 0===W)throw new xe(203,"");return null===W?Qr(i,void 0,s):W.get(i,s&ot.Optional?null:void 0,s)}function Ye(i,s=ot.Default){return(function Xn(){return kr}()||Le)(Q(i),s)}const $t=Ye;function bt(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new xe(900,"");let c,g=ot.Default;for(let _=0;_<l.length;_++){const E=l[_],b=Mn(E);"number"==typeof b?-1===b?c=E.token:g|=b:c=E}s.push(Ye(c,g))}else s.push(Ye(l))}return s}function Un(i,s){return i[ao]=s,i.prototype[ao]=s,i}function Mn(i){return i[ao]}const $r=Un(Ia("Inject",i=>({token:i})),-1),si=Un(Ia("Optional"),8),rs=Un(Ia("SkipSelf"),4);class Fp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Li(i){return i instanceof Fp?i.changingThisBreaksApplicationSecurity:i}const co=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Lh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();function $h(i){const s=function Ou(){const i=we();return i&&i[12]}();return s?s.sanitize(Wn.URL,i)||"":function Sa(i,s){const a=function ad(i){return i instanceof Fp&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Li(i):function In(i){return(i=String(i)).match(co)||i.match(Lh)?i:"unsafe:"+i}(fe(i))}const Ul="__ngContext__";function Ir(i,s){i[Ul]=s}function Na(i){const s=function $o(i){return i[Ul]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function yd(i){return i.ngOriginalError}function Pu(i,...s){i.error(...s)}class dr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function sy(i){return i&&i.ngErrorLogger||Pu}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&yd(s);for(;a&&yd(a);)a=yd(a);return a||null}}const oy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function p(i){return i instanceof Function?i():i}var ie=(()=>((ie=ie||{})[ie.Important=1]="Important",ie[ie.DashCase=2]="DashCase",ie))();function Qe(i,s){return undefined(i,s)}function Dn(i){const s=i[3];return Xr(s)?s[3]:s}function _d(i){return Rs(i[13])}function po(i){return Rs(i[4])}function Rs(i){for(;null!==i&&!Xr(i);)i=i[4];return i}function go(i,s,a,l,c){if(null!=l){let g,_=!1;Xr(l)?g=l:pi(l)&&(_=!0,l=l[0]);const E=an(l);0===i&&null!==a?null==c?eg(s,a,E):zo(s,a,E,c||null,!0):1===i&&null!==a?zo(s,a,E,c||null,!0):2===i?function Jh(i,s,a){const l=Fu(i,s);l&&function Yh(i,s,a,l){dn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=g&&function gy(i,s,a,l,c){const g=a[7];g!==an(a)&&go(s,i,l,g,c);for(let E=10;E<a.length;E++){const b=a[E];ss(b[1],b,i,s,l,g)}}(s,i,g,a,c)}}function vd(i,s,a){if(dn(i))return i.createElement(s,a);{const l=null!==a?function uu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function ly(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,bs(c,-1)),a.splice(l,1)}function Jp(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&ly(c,l),s>0&&(i[a-1][4]=l[4]);const g=Ei(i,10+s);!function Yp(i,s){ss(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=g[19];null!==_&&_.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Xp(i,s){if(!(256&s[2])){const a=s[11];dn(a)&&a.destroyNode&&ss(i,s,a,3,null,null),function I0(i){let s=i[13];if(!s)return cy(i[1],i);for(;s;){let a=null;if(pi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)pi(s)&&cy(s[1],s),s=s[3];null===s&&(s=i),pi(s)&&cy(s[1],s),a=s&&s[4]}s=a}}(s)}}function cy(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Kb(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Po)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const E=c[g[_]],b=g[_+1];try{b.call(E)}finally{}}else try{g.call(c)}finally{}}}}(i,s),function Wb(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],E="function"==typeof _?_(s):an(s[_]),b=l[c=a[g+2]],A=a[g+3];"boolean"==typeof A?E.removeEventListener(a[g],b,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),g+=2}else{const _=l[c=a[g+1]];a[g].call(_)}if(null!==l){for(let g=c+1;g<l.length;g++)l[g]();s[7]=null}}(i,s),1===s[1].type&&dn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Xr(s[3])){a!==s[3]&&ly(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Kh(i,s,a){return function Ed(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===jt.None||c===jt.Emulated)return null}return vr(l,a)}(i,s.parent,a)}function zo(i,s,a,l,c){dn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function eg(i,s,a){dn(i)?i.appendChild(s,a):s.appendChild(a)}function dy(i,s,a,l,c){null!==l?zo(i,s,a,l,c):eg(i,s,a)}function Fu(i,s){return dn(i)?i.parentNode(s):s.parentNode}let D0=function hy(i,s,a){return 40&i.type?vr(i,a):null};function tg(i,s,a,l){const c=Kh(i,l,s),g=s[11],E=function nr(i,s,a){return D0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let b=0;b<a.length;b++)dy(g,c,a[b],E,!1);else dy(g,c,a,E,!1)}function Qh(i,s){if(null!==s){const a=s.type;if(3&a)return vr(s,i);if(4&a)return ng(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Qh(i,l);{const c=i[s.index];return Xr(c)?ng(-1,c):an(c)}}if(32&a)return Qe(s,i)()||an(i[s.index]);{const l=py(i,s);return null!==l?Array.isArray(l)?l[0]:Qh(Dn(i[16]),l):Qh(i,s.next)}}return null}function py(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ng(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Qh(l,c)}return s[7]}function rg(i,s,a,l,c,g,_){for(;null!=a;){const E=l[a.index],b=a.type;if(_&&0===s&&(E&&Ir(an(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)rg(i,s,a.child,l,c,g,!1),go(s,i,c,E,g);else if(32&b){const A=Qe(a,l);let S;for(;S=A();)go(s,i,c,S,g);go(s,i,c,E,g)}else 16&b?A0(i,s,l,a,c,g):go(s,i,c,E,g);a=_?a.projectionNext:a.next}}function ss(i,s,a,l,c,g){rg(a,l,i.firstChild,s,c,g,!1)}function A0(i,s,a,l,c,g){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)go(s,i,c,b[A],g);else rg(i,s,b,_[3],c,g,!0)}function my(i,s,a){dn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ef(i,s,a){dn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function tf(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const g=s.length;if(c+g===l||i.charCodeAt(c+g)<=32)return c}a=c+1}}const ig="ng-template";function sg(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==tf(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function S0(i){return 4===i.type&&i.value!==ig}function x0(i,s,a){return s===(4!==i.type||a?i.value:ig)}function nf(i,s,a){let l=4;const c=i.attrs||[],g=function R0(i){for(let s=0;s<i.length;s++)if(qn(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!x0(i,b,a)||""===b&&1===s.length){if(Ns(l))return!1;_=!0}}else{const A=8&l?b:s[++E];if(8&l&&null!==i.attrs){if(!sg(i.attrs,A,a)){if(Ns(l))return!1;_=!0}continue}const P=M0(8&l?"class":b,c,S0(i),a);if(-1===P){if(Ns(l))return!1;_=!0;continue}if(""!==A){let V;V=P>g?"":c[P+1].toLowerCase();const z=8&l?V:null;if(z&&-1!==tf(z,A,0)||2&l&&A!==V){if(Ns(l))return!1;_=!0}}}}else{if(!_&&!Ns(l)&&!Ns(b))return!1;if(_&&Ns(b))continue;_=!1,l=b|1&l}}return Ns(l)||_}function Ns(i){return 0==(1&i)}function M0(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let g=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)g=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=g?1:2}return-1}return function ag(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function og(i,s,a=!1){for(let l=0;l<s.length;l++)if(nf(i,s[l],a))return!0;return!1}function _y(i,s){return i?":not("+s.trim()+")":s}function ql(i){let s=i[0],a=1,l=2,c="",g=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!Ns(_)&&(s+=_y(g,c),c=""),l=_,g=g||!Ns(l);a++}return""!==c&&(s+=_y(g,c)),s}const Tt={};function vy(i){rf(Ot(),we(),wr()+i,gu())}function rf(i,s,a,l){if(!l)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&_a(s,g,a)}else{const g=i.preOrderHooks;null!==g&&vu(s,g,0,a)}Ts(a)}function sf(i,s){return i<<17|s<<2}function Os(i){return i>>17&32767}function Ey(i){return 2|i}function mo(i){return(131068&i)>>2}function wy(i,s){return-131069&i|s<<2}function ug(i){return 1|i}function Wl(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],g=a[l+1];if(-1!==g){const _=i.data[g];ml(c),_.contentQueries(2,s[g],g)}}}function cf(i,s,a,l,c,g,_,E,b,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,ws(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=g,S[16]=2==s.type?i[16]:S,S}function os(i,s,a,l,c){let g=i.data[s];if(null===g)g=function Rn(i,s,a,l,c){const g=No(),_=cl(),b=i.data[s]=function Vu(i,s,a,l,c,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(i,s,a,l,c),function fl(){return lt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=c;const _=function Oo(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Br(g,!0),g}function ks(i,s,a,l){if(0===a)return-1;const c=s.length;for(let g=0;g<a;g++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Kl(i,s,a){Ws(s);try{const l=i.viewQuery;null!==l&&ky(1,l,a);const c=i.template;null!==c&&F0(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wl(i,s),i.staticViewQueries&&ky(2,i.viewQuery,a);const g=i.components;null!==g&&function Dr(i,s){for(let a=0;a<s.length;a++)$0(i,s[a])}(s,g)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Ys()}}function Yl(i,s,a,l){const c=s[2];if(256==(256&c))return;Ws(s);const g=gu();try{ws(s),function mu(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&F0(i,s,a,2,l);const _=3==(3&c);if(!g)if(_){const A=i.preOrderCheckHooks;null!==A&&_a(s,A,null)}else{const A=i.preOrderHooks;null!==A&&vu(s,A,0,null),Fn(s,0)}if(function mf(i){for(let s=_d(i);null!==s;s=po(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],g=c[3];0==(1024&c[2])&&bs(g,1),c[2]|=1024}}}(s),function aI(i){for(let s=_d(i);null!==s;s=po(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Xi(l)&&Yl(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Wl(i,s),!g)if(_){const A=i.contentCheckHooks;null!==A&&_a(s,A)}else{const A=i.contentHooks;null!==A&&vu(s,A,1),Fn(s,1)}!function Pr(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Ts(~c);else{const g=c,_=a[++l],E=a[++l];_u(_,g),E(2,s[g])}}}finally{Ts(-1)}}(i,s);const E=i.components;null!==E&&function tI(i,s){for(let a=0;a<s.length;a++)hg(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&ky(2,b,l),!g)if(_){const A=i.viewCheckHooks;null!==A&&_a(s,A)}else{const A=i.viewHooks;null!==A&&vu(s,A,2),Fn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),g||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,bs(s[3],-1))}finally{Ys()}}function df(i,s,a,l){const c=s[10],g=!gu(),_=Es(s);try{g&&!_&&c.begin&&c.begin(),_&&Kl(i,s,l),Yl(i,s,a,l)}finally{g&&!_&&c.end&&c.end()}}function F0(i,s,a,l,c){const g=wr(),_=2&l;try{Ts(-1),_&&s.length>20&&rf(i,s,20,gu()),a(l,c)}finally{Ts(g)}}function Ba(i,s,a){!pu()||(function j0(i,s,a,l){const c=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Xs(a,s),Ir(l,s);const _=a.initialInputs;for(let E=c;E<g;E++){const b=i.data[E],A=Fr(b);A&&H0(s,a,b);const S=ni(s,i,E,a);Ir(S,s),null!==_&&iI(0,E-c,S,b,0,_),A&&(Er(a.index,s)[8]=S)}}(i,s,a,vr(a,s)),128==(128&a.flags)&&function ai(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function pl(){return lt.lFrame.currentDirectiveIndex}();try{Ts(_);for(let b=l;b<c;b++){const A=i.data[b],S=s[b];ma(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Ry(A,S)}}finally{Ts(-1),ma(E)}}(i,s,a))}function Ql(i,s,a=vr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function Cy(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ue(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ue(i,s,a,l,c,g,_,E,b,A){const S=20+l,P=S+c,V=function L0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Tt);return a}(S,P),z="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:z,incompleteFirstPass:!1}}function Dd(i,s,a,l){const c=z0(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Fy(i).push(l,c.length-1))}function Ay(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function My(i,s,a,l){let c=!1;if(pu()){const g=function Cn(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let g=0;g<l.length;g++){const _=l[g];og(a,_.selectors,!1)&&(c||(c=[]),eo(Xs(a,s),i,_.type),Fr(_)?(pf(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==g){c=!0,gf(a,i.data.length,g.length);for(let S=0;S<g.length;S++){const P=g[S];P.providersResolver&&P.providersResolver(P)}let E=!1,b=!1,A=ks(i,s,g.length,null);for(let S=0;S<g.length;S++){const P=g[S];a.mergedAttrs=Js(a.mergedAttrs,P.hostAttrs),Td(i,a,s,A,P),Jl(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function Cd(i,s){const l=s.directiveEnd,c=i.data,g=s.attrs,_=[];let E=null,b=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],P=S.inputs,V=null===g||S0(s)?null:sI(P,g);_.push(V),E=Ay(P,A,E),b=Ay(S.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=b}(i,a)}_&&function Ny(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const g=a[s[c+1]];if(null==g)throw new xe(-301,!1);l.push(s[c],g)}}}(a,l,_)}return a.mergedAttrs=Js(a.mergedAttrs,a.attrs),c}function U0(i,s,a,l,c,g){const _=g.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~s.index;(function B0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,c,_)}}function Ry(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function pf(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Jl(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Fr(s)&&(a[""]=i)}}function gf(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Td(i,s,a,l,c){i.data[l]=c;const g=c.factory||(c.factory=Lr(c.type)),_=new Po(g,Fr(c),null);i.blueprint[l]=_,a[l]=_,U0(i,s,0,l,ks(i,a,c.hostVars,Tt),c)}function H0(i,s,a){const l=vr(s,i),c=Cy(a),g=i[10],_=pr(i,cf(i,c,null,a.onPush?64:16,l,s,g,g.createRenderer(l,a),null,null));i[s.index]=_}function Ko(i,s,a,l,c,g){const _=vr(i,s);!function _o(i,s,a,l,c,g,_){if(null==g)dn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?fe(g):_(g,l||"",c);dn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,g,i.value,a,l,c)}function iI(i,s,a,l,c,g){const _=g[s];if(null!==_){const E=l.setInput;for(let b=0;b<_.length;){const A=_[b++],S=_[b++],P=_[b++];null!==E?l.setInput(a,P,A,S):a[S]=P}}}function sI(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Uu(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function hg(i,s){const a=Er(s,i);if(Xi(a)){const l=a[1];80&a[2]?Yl(l,a,l.template,a[8]):a[5]>0&&Ad(a)}}function Ad(i){for(let l=_d(i);null!==l;l=po(l))for(let c=10;c<l.length;c++){const g=l[c];if(1024&g[2]){const _=g[1];Yl(_,g,_.template,g[8])}else g[5]>0&&Ad(g)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Er(a[l],i);Xi(c)&&c[5]>0&&Ad(c)}}function $0(i,s){const a=Er(s,i),l=a[1];(function G0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Kl(l,a,a[8])}function pr(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Oy(i){for(;i;){i[2]|=64;const s=Dn(i);if(bh(i)&&!s)return i;i=s}return null}function fg(i,s,a){const l=s[10];l.begin&&l.begin();try{Yl(i,s,i.template,a)}catch(c){throw Yo(s,c),c}finally{l.end&&l.end()}}function q0(i){!function Py(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Na(a),c=l[1];df(c,l,c.template,a)}}(i[8])}function ky(i,s,a){ml(0),s(i,a)}const Sd=(()=>Promise.resolve(null))();function z0(i){return i[7]||(i[7]=[])}function Fy(i){return i.cleanup||(i.cleanup=[])}function Yo(i,s){const a=i[9],l=a?a.get(dr,null):null;l&&l.handleError(s)}function Vy(i,s,a,l,c){for(let g=0;g<a.length;){const _=a[g++],E=a[g++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,c,l,E):b[E]=c}}function ji(i,s,a){const l=Zs(s,i);!function qo(i,s,a){dn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function ec(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,g=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?g=E:1==g?c=ue(c,E):2==g&&(l=ue(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const yf=new bn("INJECTOR",-1);class tc{get(s,a=Fi){if(a===Fi){const l=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw l.name="NullInjectorError",l}return a}}const Hi=new bn("Set Injector scope."),xd={},_f={};let gg;function mg(){return void 0===gg&&(gg=new tc),gg}function yg(i,s=null,a=null,l){const c=By(i,s,a,l);return c._resolveInjectorDefTypes(),c}function By(i,s=null,a=null,l){return new W0(i,a,s||mg(),l)}class W0{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&ri(a,E=>this.processProvider(E,s,a)),ri([s],E=>this.processInjectorType(E,[],g)),this.records.set(yf,ja(void 0,this));const _=this.records.get(Hi);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:he(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Fi,l=ot.Default){this.assertNotDestroyed();const c=Se(this),g=$n(void 0);try{if(!(l&ot.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function eE(i){return"function"==typeof i||"object"==typeof i&&i instanceof bn}(s)&&Bt(s);E=b&&this.injectableDefInScope(b)?ja(jy(s),xd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ot.Self?mg():this.parent).get(s,a=l&ot.Optional&&a===Fi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[uo]=_[uo]||[]).unshift(he(s)),c)throw _;return function lo(i,s,a,l){const c=i[uo];throw s[F]&&c.unshift(s[F]),i.message=function Uo(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=he(s);if(Array.isArray(s))c=s.map(he).join(" -> ");else if("object"==typeof s){let g=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];g.push(_+":"+("string"==typeof E?JSON.stringify(E):he(E)))}c=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[uo]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{$n(g),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(he(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let c=xr(s);const g=null==c&&s.ngModule||void 0,_=void 0===g?s:g,E=-1!==l.indexOf(_);if(void 0!==g&&(c=xr(g)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{ri(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:z}=S[P];ri(z,me=>this.processProvider(me,V,z||at))}}this.injectorDefTypes.add(_);const b=Lr(_)||(()=>new _);this.records.set(_,ja(b,xd));const A=c.providers;if(null!=A&&!E){const S=s;ri(A,P=>this.processProvider(P,S,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,l){let c=vo(s=Q(s))?s:Q(s&&s.provide);const g=function Y0(i,s,a){return Q0(i)?ja(void 0,i.useValue):ja(Hy(i),xd)}(s);if(vo(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=ja(void 0,xd,!0),_.factory=()=>bt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,g)}hydrate(s,a){return a.value===xd&&(a.value=_f,a.value=a.factory()),"object"==typeof a.value&&a.value&&function rc(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function jy(i){const s=Bt(i),a=null!==s?s.factory:Lr(i);if(null!==a)return a;if(i instanceof bn)throw new xe(204,!1);if(i instanceof Function)return function K0(i){const s=i.length;if(s>0)throw function wi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function Yr(i){const s=i&&(i[Si]||i[zi]);if(s){const a=function cs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function Hy(i,s,a){let l;if(vo(i)){const c=Q(i);return Lr(c)||jy(c)}if(Q0(i))l=()=>Q(i.useValue);else if(function J0(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...bt(i.deps||[]));else if(function dI(i){return!(!i||!i.useExisting)}(i))l=()=>Ye(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function X0(i){return!!i.deps}(i))return Lr(c)||jy(c);l=()=>new c(...bt(i.deps))}return l}function ja(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Q0(i){return null!==i&&"object"==typeof i&&Z in i}function vo(i){return"function"==typeof i}let bi=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return yg({name:""},l,a,"");{const g=null!==(c=a.name)&&void 0!==c?c:"";return yg({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=Fi,i.NULL=new tc,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>Ye(yf)}),i.__NG_ELEMENT_ID__=-1,i})();function Dg(i,s){es(Na(i)[1],mn())}function Cg(i){let s=function _n(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Fr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=zy(i.inputs),_.declaredInputs=zy(i.declaredInputs),_.outputs=zy(i.outputs);const E=c.hostBindings;E&&Zy(i,E);const b=c.viewQuery,A=c.contentQueries;if(b&&Fs(i,b),A&&gI(i,A),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),Fr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const g=c.features;if(g)for(let _=0;_<g.length;_++){const E=g[_];E&&E.ngInherit&&E(i),E===Cg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Od(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Js(c.hostAttrs,a=Js(a,c.hostAttrs))}}(l)}function zy(i){return i===or?{}:i===at?[]:i}function Fs(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function gI(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,g)=>{s(l,c,g),a(l,c,g)}:s}function Zy(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let nn=null;function Pd(){if(!nn){const i=Vt.Symbol;if(i&&i.iterator)nn=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(nn=l)}}}return nn}function $a(i){return!!Sg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Pd()in i)}function Sg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Eo(i,s,a){return i[s]=a}function li(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Wy(i,s,a,l){const c=we();return li(c,Ds(),s)&&(Ot(),Ko(wn(),c,i,s,a,l)),Wy}function aE(i,s,a,l,c,g,_,E){const b=we(),A=Ot(),S=i+20,P=A.firstCreatePass?function Xy(i,s,a,l,c,g,_,E,b){const A=s.consts,S=os(s,i,4,_||null,Ur(A,E));My(s,a,S,Ur(A,b)),es(s,S);const P=S.tViews=Ue(2,S,l,c,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,b,s,a,l,c,g,_):A.data[S];Br(P,!1);const V=b[11].createComment("");tg(A,b,V,P),Ir(V,b),pr(b,b[S]=Uu(V,b,V,P)),nu(P)&&Ba(A,b,P),null!=_&&Ql(b,P,E)}function If(i,s=ot.Default){const a=we();return null===a?Ye(i,s):Fo(mn(),a,Q(i),s)}function Hd(){throw new Error("invalid")}function qa(i,s,a){const l=we();return li(l,Ds(),s)&&function Cr(i,s,a,l,c,g,_,E){const b=vr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(Vy(i,a,S,l,c),gs(s)&&function xy(i,s){const a=Er(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Sy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,dn(g)?g.setProperty(b,l,c):zn(l)||(b.setProperty?b.setProperty(l,c):b[l]=c))}(Ot(),wn(),l,i,s,l[11],a,!1),qa}function i_(i,s,a,l,c){const _=c?"class":"style";Vy(i,a,s.inputs[_],_,l)}function Df(i,s,a,l){const c=we(),g=Ot(),_=20+i,E=c[11],b=c[_]=vd(E,s,function Gm(){return lt.lFrame.currentNamespace}()),A=g.firstCreatePass?function ac(i,s,a,l,c,g,_){const E=s.consts,A=os(s,i,2,c,Ur(E,g));return My(s,a,A,Ur(E,_)),null!==A.attrs&&ec(A,A.attrs,!1),null!==A.mergedAttrs&&ec(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,g,c,0,s,a,l):g.data[_];Br(A,!0);const S=A.mergedAttrs;null!==S&&ht(E,b,S);const P=A.classes;null!==P&&ef(E,b,P);const V=A.styles;return null!==V&&my(E,b,V),64!=(64&A.flags)&&tg(g,c,b,A),0===function ga(){return lt.lFrame.elementDepthCount}()&&Ir(b,c),function hu(){lt.lFrame.elementDepthCount++}(),nu(A)&&(Ba(g,c,A),function Wo(i,s,a){if(Oc(s)){const c=s.directiveEnd;for(let g=s.directiveStart;g<c;g++){const _=i.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}(g,A,c)),null!==l&&Ql(c,A),Df}function $d(){let i=mn();cl()?function dl(){lt.lFrame.isParent=!1}():(i=i.parent,Br(i,!1));const s=i;!function fu(){lt.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(es(a,i),Oc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Th(i){return 0!=(16&i.flags)}(s)&&i_(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tp(i){return 0!=(32&i.flags)}(s)&&i_(a,s,we(),s.stylesWithoutHost,!1),$d}function kg(i,s,a,l){return Df(i,s,a,l),$d(),kg}function o_(){return we()}function a_(i){return!!i&&"function"==typeof i.then}function u_(i){return!!i&&"function"==typeof i.subscribe}const Af=u_;function Za(i,s,a,l){const c=we(),g=Ot(),_=mn();return function qd(i,s,a,l,c,g,_,E){const b=nu(l),S=i.firstCreatePass&&Fy(i),P=s[8],V=z0(s);let z=!0;if(3&l.type||E){const Be=vr(l,s),et=E?E(Be):Be,be=V.length,ct=E?Gt=>E(an(Gt[l.index])):l.index;if(dn(a)){let Gt=null;if(!E&&b&&(Gt=function Gd(i,s,a,l){const c=i.cleanup;if(null!=c)for(let g=0;g<c.length-1;g+=2){const _=c[g];if(_===a&&c[g+1]===l){const E=s[7],b=c[g+2];return E.length>b?E[b]:null}"string"==typeof _&&(g+=2)}return null}(i,s,c,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=g,Gt.__ngLastListenerFn__=g,z=!1;else{g=Sf(l,s,P,g,!1);const un=a.listen(et,c,g);V.push(g,un),S&&S.push(c,ct,be,be+1)}}else g=Sf(l,s,P,g,!0),et.addEventListener(c,g,_),V.push(g),S&&S.push(c,ct,be,_)}else g=Sf(l,s,P,g,!1);const me=l.outputs;let Ne;if(z&&null!==me&&(Ne=me[c])){const Be=Ne.length;if(Be)for(let et=0;et<Be;et+=2){const us=s[Ne[et]][Ne[et+1]].subscribe(g),Mc=V.length;V.push(g,us),S&&S.push(c,l.index,Mc,-(Mc+1))}}}(g,c,c[11],_,i,s,!!a,l),Za}function l_(i,s,a,l){try{return!1!==a(l)}catch(c){return Yo(i,c),!1}}function Sf(i,s,a,l,c){return function g(_){if(_===Function)return l;const E=2&i.flags?Er(i.index,s):s;0==(32&s[2])&&Oy(E);let b=l_(s,0,l,_),A=g.__ngNextListenerFn__;for(;A;)b=l_(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return c&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function Fg(i=1){return function Cs(i){return(lt.lFrame.contextLView=function _l(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function IE(i,s,a,l,c){const g=i[a+1],_=null===s;let E=l?Os(g):mo(g),b=!1;for(;0!==E&&(!1===b||_);){const S=i[E+1];LI(i[E],s)&&(b=!0,i[E+1]=l?ug(S):Ey(S)),E=l?Os(S):mo(S)}b&&(i[a+1]=l?Ey(g):ug(g))}function LI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ca(i,s)>=0}function Ka(i,s){return function Kr(i,s,a,l){const c=we(),g=Ot(),_=function mi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function SE(i,s,a,l){const c=i.data;if(null===c[a+1]){const g=c[wr()],_=function p_(i,s){return s>=i.expandoStartIndex}(i,a);(function y_(i,s){return 0!=(i.flags&(s?16:32))})(g,l)&&null===s&&!_&&(s=!1),s=function UI(i,s,a,l){const c=function ya(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Nf(a=jg(null,i,s,a,l),s.attrs,l),g=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=jg(c,i,s,a,l),null===g){let b=function BI(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==mo(l))return i[Os(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=jg(null,i,s,b[1],l),b=Nf(b,s.attrs,l),function jI(i,s,a,l){i[Os(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else g=function Bg(i,s,a){let l;const c=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<c;g++)l=Nf(l,i[g].hostAttrs,a);return Nf(l,s.attrs,a)}(i,s,l)}return void 0!==g&&(l?s.residualClasses=g:s.residualStyles=g),a}(c,g,s,l),function lc(i,s,a,l,c,g){let _=g?s.classBindings:s.styleBindings,E=Os(_),b=mo(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||Ca(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==b){const V=Os(i[E+1]);i[l+1]=sf(V,E),0!==V&&(i[V+1]=wy(i[V+1],l)),i[E+1]=function Jb(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=sf(E,0),0!==E&&(i[E+1]=wy(i[E+1],l)),E=l;else i[l+1]=sf(b,0),0===E?E=l:i[b+1]=wy(i[b+1],l),b=l;A&&(i[l+1]=Ey(i[l+1])),IE(i,S,l,!0),IE(i,S,l,!1),function bE(i,s,a,l,c){const g=c?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&Ca(g,s)>=0&&(a[l+1]=ug(a[l+1]))}(s,S,i,l,g),_=sf(E,b),g?s.classBindings=_:s.styleBindings=_}(c,g,s,a,_,l)}}(g,i,_,l),s!==Tt&&li(c,_,s)&&function Yd(i,s,a,l,c,g,_,E){if(!(3&s.type))return;const b=i.data,A=b[E+1];Of(function k0(i){return 1==(1&i)}(A)?m_(b,s,a,c,mo(A),_):void 0)||(Of(g)||function zl(i){return 2==(2&i)}(A)&&(g=m_(b,null,a,c,E,_)),function Xh(i,s,a,l,c){const g=dn(i);if(s)c?g?i.addClass(a,l):a.classList.add(l):g?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ie.DashCase;if(null==c)g?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ie.Important),g?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Zs(wr(),a),c,g))}(g,g.data[wr()],c,c[11],i,c[_+1]=function $I(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=he(Li(i)))),i}(s,a),l,_)}(i,s,null,!0),Ka}function jg(i,s,a,l,c){let g=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(g=s[E],l=Nf(l,g.hostAttrs,c),g!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Nf(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hr(i,_,!!a||s[++g]))}return void 0===i?null:i}function m_(i,s,a,l,c,g){const _=null===s;let E;for(;c>0;){const b=i[c],A=Array.isArray(b),S=A?b[1]:b,P=null===S;let V=a[c+1];V===Tt&&(V=P?at:void 0);let z=P?rd(V,l):S===l?V:void 0;if(A&&!Of(z)&&(z=rd(b,l)),Of(z)&&(E=z,_))return E;const me=i[c+1];c=_?Os(me):mo(me)}if(null!==s){let b=g?s.residualClasses:s.residualStyles;null!=b&&(E=rd(b,l))}return E}function Of(i){return void 0!==i}function Hg(i,s=""){const a=we(),l=Ot(),c=i+20,g=l.firstCreatePass?os(l,c,1,s,null):l.data[c],_=a[c]=function Gl(i,s){return dn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);tg(l,a,_,g),Br(g,!1)}function Pf(i){return Gu("",i,""),Pf}function Gu(i,s,a){const l=we(),c=function Qo(i,s,a,l){return li(i,Ds(),a)?s+fe(a)+l:Tt}(l,i,s,a);return c!==Tt&&ji(l,wr(),c),Gu}const qu=void 0;var Wg=["en",[["a","p"],["AM","PM"],qu],[["AM","PM"],qu,qu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qu,"{1} 'at' {0}",qu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function T_(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ta={};function Ff(i){const s=function YI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=S_(s);if(a)return a;const l=s.split("-")[0];if(a=S_(l),a)return a;if("en"===l)return Wg;throw new Error(`Missing locale data for the locale "${i}".`)}function Kg(i){return Ff(i)[gt.PluralCase]}function S_(i){return i in ta||(ta[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),ta[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const Lf="en-US";let GE=Lf;function Q_(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let g=0;g<i.length;g++)Q_(i[g],s,a,l,c);else{const g=Ot(),_=we();let E=vo(i)?i:Q(i.provide),b=Hy(i);const A=mn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(vo(i)||!i.multi){const z=new Po(b,c,If),me=jf(E,s,c?S:S+V,P);-1===me?(eo(Xs(A,_),g,E),Bf(g,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(z),_.push(z)):(a[me]=z,_[me]=z)}else{const z=jf(E,s,S+V,P),me=jf(E,s,S,S+V),Ne=z>=0&&a[z],Be=me>=0&&a[me];if(c&&!Be||!c&&!Ne){eo(Xs(A,_),g,E);const et=function X_(i,s,a,l,c){const g=new Po(i,a,If);return g.multi=[],g.index=s,g.componentProviders=0,lw(g,c,l&&!a),g}(c?J_:fD,a.length,c,l,b);!c&&Be&&(a[me].providerFactory=et),Bf(g,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(et),_.push(et)}else Bf(g,i,z>-1?z:me,lw(a[c?me:z],b,!c&&l));!c&&l&&Be&&a[me].componentProviders++}}}function Bf(i,s,a,l){const c=vo(s),g=function nc(i){return!!i.useClass}(s);if(c||g){const b=(g?Q(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,b]):A[S+1].push(l,b)}else A.push(a,b)}}}function lw(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function jf(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function fD(i,s,a,l){return Hf(this.multi,[])}function J_(i,s,a,l){const c=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ni(a,a[1],this.providerFactory.index,l);g=E.slice(0,_),Hf(c,g);for(let b=_;b<E.length;b++)g.push(E[b])}else g=[],Hf(c,g);return g}function Hf(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function _c(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Y_(i,s,a){const l=Ot();if(l.firstCreatePass){const c=Fr(i);Q_(a,l.data,l.blueprint,c,!0),Q_(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class um{}class ev{resolveComponentFactory(s){throw function pD(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let cm=(()=>{class i{}return i.NULL=new ev,i})();function tv(){return ih(mn(),we())}function ih(i,s){return new $f(vr(i,s))}let $f=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=tv,i})();function nv(i){return i instanceof $f?i.nativeElement:i}class dm{}let gD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function mD(){const i=we(),a=Er(mn().index,i);return function rv(i){return i[11]}(pi(a)?a:i)}(),i})(),iv=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class sv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const hm=new sv("13.3.4"),fm={};function pm(i,s,a,l,c=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&l.push(an(g)),Xr(g))for(let E=10;E<g.length;E++){const b=g[E],A=b[1].firstChild;null!==A&&pm(b[1],b,A,l)}const _=a.type;if(8&_)pm(i,s,a.child,l);else if(32&_){const E=Qe(a,s);let b;for(;b=E();)l.push(b)}else if(16&_){const E=py(s,a);if(Array.isArray(E))l.push(...E);else{const b=Dn(s[16]);pm(b[1],b,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Gf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return pm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Xr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Jp(s,l),Ei(a,l))}this._attachedToViewContainer=!1}Xp(this._lView[1],this._lView)}onDestroy(s){Dd(this._lView[1],this._lView,null,s)}markForCheck(){Oy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function lI(i,s,a){Is(!0);try{fg(i,s,a)}finally{Is(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qp(i,s){ss(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class ov extends Gf{constructor(s){super(s),this._view=s}detectChanges(){q0(this._view)}checkNoChanges(){!function cI(i){Is(!0);try{q0(i)}finally{Is(!1)}}(this._view)}get context(){return null}}class dw extends cm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ht(s);return new lv(a,this.ngModule)}}function gm(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class lv extends um{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function O0(i){return i.map(ql).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return gm(this.componentDef.inputs)}get outputs(){return gm(this.componentDef.outputs)}create(s,a,l,c){const g=(c=c||this.ngModule)?function uv(i,s){return{get:(a,l,c)=>{const g=i.get(a,fm,c);return g!==fm||l===fm?g:s.get(a,l,c)}}}(s,c.injector):s,_=g.get(dm,Ro),E=g.get(iv,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function yo(i,s,a){if(dn(i))return i.selectRootElement(s,a===jt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):vd(_.createRenderer(null,this.componentDef),A,function av(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function Yn(i,s){return{components:[],scheduler:i||oy,clean:Sd,playerHandler:s||null,flags:0}}(),z=Ue(0,null,null,1,0,null,null,null,null,null),me=cf(null,z,V,P,null,null,_,b,E,g);let Ne,Be;Ws(me);try{const et=function qy(i,s,a,l,c,g){const _=a[1];a[20]=i;const b=os(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(ec(b,A,!0),null!==i&&(ht(c,i,A),null!==b.classes&&ef(c,i,b.classes),null!==b.styles&&my(c,i,b.styles)));const S=l.createRenderer(i,s),P=cf(a,Cy(s),null,s.onPush?64:16,a[20],b,l,S,g||null,null);return _.firstCreatePass&&(eo(Xs(b,a),_,s.type),pf(_,b),gf(b,a.length,1)),pr(a,P),a[20]=P}(S,this.componentDef,me,_,b);if(S)if(l)ht(b,S,["ng-version",hm.full]);else{const{attrs:be,classes:ct}=function P0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let g=i[l];if("string"==typeof g)2===c?""!==g&&s.push(g,i[++l]):8===c&&a.push(g);else{if(!Ns(c))break;c=g}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&ht(b,S,be),ct&&ct.length>0&&ef(b,S,ct.join(" "))}if(Be=pa(z,20),void 0!==a){const be=Be.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const Gt=a[ct];be.push(null!=Gt?Array.from(Gt):null)}}Ne=function Ha(i,s,a,l,c){const g=a[1],_=function V0(i,s,a){const l=mn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Td(i,l,s,ks(i,s,1,null),a));const c=ni(s,i,l.directiveStart,l);Ir(c,s);const g=vr(l,s);return g&&Ir(g,s),c}(g,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(b=>b(_,s)),s.contentQueries){const b=mn();s.contentQueries(1,_,b.directiveStart)}const E=mn();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ts(E.index),U0(a[1],E,0,E.directiveStart,E.directiveEnd,s),Ry(s,_)),_}(et,this.componentDef,me,V,[Dg]),Kl(z,me,null)}finally{Ys()}return new _D(this.componentType,Ne,ih(Be,me),me,Be)}}class _D extends class cw{}{constructor(s,a,l,c,g){super(),this.location=l,this._rootLView=c,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new ov(c),this.componentType=s}get injector(){return new vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class vc{}class qf{}const sh=new Map;class ym extends vc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new dw(this);const l=ln(s);this._bootstrapComponents=p(l.bootstrap),this._r3Injector=By(s,a,[{provide:vc,useValue:this},{provide:cm,useValue:this.componentFactoryResolver}],he(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=bi.THROW_IF_NOT_FOUND,l=ot.Default){return s===bi||s===vc||s===yf?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class zf extends qf{constructor(s){super(),this.moduleType=s,null!==ln(s)&&function vD(i){const s=new Set;!function a(l){const c=ln(l,!0),g=c.id;null!==g&&(function fw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${he(s)} vs ${he(s.name)}`)}(g,sh.get(g),l),sh.set(g,l));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new ym(this.moduleType,s)}}function _m(i,s,a){const l=lr()+i,c=we();return c[l]===Tt?Eo(c,l,a?s.call(a):s()):function kd(i,s){return i[s]}(c,l)}function Zf(i,s,a,l){return function mw(i,s,a,l,c,g){const _=s+a;return li(i,_,c)?Eo(i,_+1,g?l.call(g,c):l(c)):function Wf(i,s){const a=i[s];return a===Tt?void 0:a}(i,_+1)}(we(),lr(),i,s,a,l)}function zt(i){return s=>{setTimeout(i,void 0,s)}}const Io=class vm extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,g,_;let E=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),b=null===(g=P.error)||void 0===g?void 0:g.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=zt(b),E&&(E=zt(E)),A&&(A=zt(A)));const S=super.subscribe({next:E,error:b,complete:A});return s instanceof K.w0&&s.add(S),S}};function bw(){return this._results[Pd()]()}class Ec{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pd(),l=Ec.prototype;l[a]||(l[a]=bw)}get changes(){return this._changes||(this._changes=new Io)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=fn(s);(this._changesDetected=!function td(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],g=s[l];if(a&&(c=a(c),g=a(g)),g!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Kf=(()=>{class i{}return i.__NG_ELEMENT_ID__=na,i})();const Tn=Kf,ci=class extends Tn{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=cf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Kl(a,l,s),new Gf(l)}};function na(){return Yf(mn(),we())}function Yf(i,s){return 4&i.type?new ci(s,i,ih(i,s)):null}let Em=(()=>{class i{}return i.__NG_ELEMENT_ID__=wm,i})();function wm(){return Cw(mn(),we())}const Iw=Em,_v=class extends Iw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new vi(this._hostTNode,this._hostLView)}get parentInjector(){const s=_i(this._hostTNode,this._hostLView);if(Rr(s)){const a=dt(s,this._hostLView),l=Mt(s);return new vi(a[1].data[l+8],a)}return new vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Dw(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,g){const _=s&&!function Lo(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,c=P.projectableNodes,g=P.ngModuleRef}const b=_?s:new lv(Ht(s)),A=l||this.parentInjector;if(!g&&null==b.ngModule){const V=(_?A:this.parentInjector).get(vc,null);V&&(g=V)}const S=b.create(A,c,void 0,g);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function cu(i){return Xr(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],V=new _v(P,P[6],P[3]);V.detach(V.indexOf(s))}}const g=this._adjustIndex(a),_=this._lContainer;!function ay(i,s,a,l){const c=10+l,g=a.length;l>0&&(a[c-1][4]=s),l<g-10?(s[4]=a[c],Zn(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function uy(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,g);const E=ng(g,_),b=l[11],A=Fu(b,_[7]);return null!==A&&function Wh(i,s,a,l,c,g){l[0]=c,l[6]=s,ss(i,l,a,1,c,g)}(c,_[6],b,l,A,E),s.attachToViewContainerRef(),Zn(Qf(_),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Dw(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Jp(this._lContainer,a);l&&(Ei(Qf(this._lContainer),a),Xp(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Jp(this._lContainer,a);return l&&null!=Ei(Qf(this._lContainer),a)?new Gf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Dw(i){return i[8]}function Qf(i){return i[8]||(i[8]=[])}function Cw(i,s){let a;const l=s[i.index];if(Xr(l))a=l;else{let c;if(8&i.type)c=an(l);else{const g=s[11];c=g.createComment("");const _=vr(i,s);zo(g,Fu(g,_),c,function Yb(i,s){return dn(i)?i.nextSibling(s):s.nextSibling}(g,_),!1)}s[i.index]=a=Uu(l,s,c,i),pr(s,a)}return new _v(a,i,s)}class Tw{constructor(s){this.queryList=s,this.matches=null}clone(){return new Tw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qn{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);c.push(this.queries[_.indexInDeclarationView].clone())}return new Qn(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Rw(s,a).matches&&this.queries[a].setDirty()}}class vv{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Ev{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(s,c);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Ev(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class wv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new wv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const g=l[c];this.matchTNodeWithReadOption(s,a,Aw(a,g)),this.matchTNodeWithReadOption(s,a,Ea(a,s,g,!1,!1))}else l===Kf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ea(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===$f||c===Em||c===Kf&&4&a.type)this.addMatch(a.index,-2);else{const g=Ea(a,s,c,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Aw(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function SD(i,s,a,l){return-1===a?function AD(i,s){return 11&i.type?ih(i,s):4&i.type?Yf(i,s):null}(s,i):-2===a?function xD(i,s,a){return a===$f?ih(s,i):a===Kf?Yf(s,i):a===Em?Cw(s,i):void 0}(i,s,l):ni(i,i[1],a,s)}function Sw(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const g=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const A=_[b];E.push(A<0?null:SD(s,g[A],_[b+1],a.metadata.read))}c.matches=E}return c.matches}function xw(i,s,a,l){const c=i.queries.getByIndex(a),g=c.matches;if(null!==g){const _=Sw(i,s,c,a);for(let E=0;E<g.length;E+=2){const b=g[E];if(b>0)l.push(_[E/2]);else{const A=g[E+1],S=s[-b];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&xw(V[1],V,A,l)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const z=P[V];xw(z[1],z,A,l)}}}}}return l}function Mw(i){const s=we(),a=Ot(),l=gl();ml(l+1);const c=Rw(a,l);if(i.dirty&&Es(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const g=c.crossesNgTemplate?xw(a,s,l,[]):Sw(a,s,c,l);i.reset(g,nv),i.notifyOnChanges()}return!0}return!1}function bv(i,s,a,l){const c=Ot();if(c.firstCreatePass){const g=mn();(function Ku(i,s,a){null===i.queries&&(i.queries=new Ev),i.queries.track(new wv(s,a))})(c,new vv(s,a,l),g.index),function bm(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Do(i,s,a){const l=new Ec(4==(4&a));Dd(i,s,l,l.destroy),null===s[19]&&(s[19]=new Qn),s[19].queries.push(new Tw(l))}(c,we(),a)}function ra(){return function TT(i,s){return i[19].queries[s].queryList}(we(),gl())}function Rw(i,s){return i.queries.getByIndex(s)}function Cc(...i){}const Rv=new bn("Application Initializer");let sa=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Cc,this.reject=Cc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const g=this.appInits[c]();if(a_(g))a.push(g);else if(Af(g)){const _=new Promise((E,b)=>{g.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ye(Rv,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hw=new bn("AppId",{providedIn:"root",factory:function Ju(){return`${Nv()}${Nv()}${Nv()}`}});function Nv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $w=new bn("Platform Initializer"),GD=new bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gw=new bn("appBootstrapListener");let qw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ov=new bn("LocaleId",{providedIn:"root",factory:()=>$t(Ov,ot.Optional|ot.SkipSelf)||function zD(){return"undefined"!=typeof $localize&&$localize.locale||Lf}()}),zw=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let WD=(()=>{class i{compileModuleSync(a){return new zf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=p(ln(a).declarations).reduce((_,E)=>{const b=Ht(E);return b&&_.push(new lv(b)),_},[]);return new ZD(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const YD=(()=>Promise.resolve(0))();function Pv(i){"undefined"==typeof Zone?YD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class oa{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Io(!1),this.onMicrotaskEmpty=new Io(!1),this.onStable=new Io(!1),this.onError=new Io(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function QD(){let i=Vt.requestAnimationFrame,s=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function XD(i){const s=()=>{!function JD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,rp(i),i.isCheckStableRunning=!0,Sm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),rp(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,g,_,E)=>{try{return kv(i),a.invokeTask(c,g,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),Fv(i)}},onInvoke:(a,l,c,g,_,E,b)=>{try{return kv(i),a.invoke(c,g,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Fv(i)}},onHasTask:(a,l,c,g)=>{a.hasTask(c,g),l===c&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,rp(i),Sm(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,c,g)=>(a.handleError(c,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+c,s,PT,Cc,Cc);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const PT={};function Sm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function rp(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function kv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Fv(i){i._nesting--,Sm(i)}class ip{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Io,this.onMicrotaskEmpty=new Io,this.onStable=new Io,this.onError=new Io}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let xm=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oa.assertNotInAngularZone(),Pv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ye(oa))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),eC=(()=>{class i{constructor(){this._applications=new Map,ch.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ch.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class tC{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Ww(i){ch=i}let ch=new tC,Tc=null;const Lv=new bn("AllowMultipleToken"),Vv=new bn("PlatformOnDestroy");class Kw{constructor(s,a){this.name=s,this.token=a}}function dh(i,s,a=[]){const l=`Platform: ${s}`,c=new bn(l);return(g=[])=>{let _=op();if(!_||_.injector.get(Lv,!1)){const E=[...a,...g,{provide:c,useValue:!0}];i?i(E):function Yw(i){if(Tc&&!Tc.get(Lv,!1))throw new xe(400,"");Tc=i;const s=i.get(Sc),a=i.get($w,null);a&&a.forEach(l=>l())}(function Ci(i=[],s){return bi.create({name:s,providers:[{provide:Hi,useValue:"platform"},{provide:Vv,useValue:()=>Tc=null},...i]})}(E,l))}return function sp(i){const s=op();if(!s)throw new xe(401,"");return s}()}}function op(){var i;return null!==(i=null==Tc?void 0:Tc.get(Sc))&&void 0!==i?i:null}let Sc=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function xc(i,s){let a;return a="noop"===i?new ip:("zone.js"===i?void 0:i)||new oa({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:oa,useValue:E}];return E.run(()=>{const A=bi.create({providers:b,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(dr,null);if(!P)throw new xe(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:z=>{P.handleError(z)}});S.onDestroy(()=>{jv(this._modules,S),V.unsubscribe()})}),function Uv(i,s,a){try{const l=a();return a_(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const V=S.injector.get(sa);return V.runInitializers(),V.donePromise.then(()=>(function XI(i){rn(i,"Expected localeId to be defined"),"string"==typeof i&&(GE=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Ov,Lf)||Lf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Xu({},l);return function Ac(i,s,a){const l=new zf(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,c))}_moduleDoBootstrap(a){const l=a.injector.get(Bv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Vv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ye(bi))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Xu(i,s){return Array.isArray(s)?s.reduce(Xu,i):Object.assign(Object.assign({},i),s)}let Bv=(()=>{class i{constructor(a,l,c,g){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new O.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{oa.assertNotInAngularZone(),Pv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{oa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,E.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof um?a:this._injector.get(cm).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const g=function Di(i){return i.isBoundToModule}(c)?void 0:this._injector.get(vc),E=c.create(bi.NULL,[],l||c.selector,g),b=E.location.nativeElement,A=E.injector.get(xm,null),S=A&&E.injector.get(eC);return A&&S&&S.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),jv(this.components,E),S&&S.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;jv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Gw,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ye(oa),Ye(bi),Ye(dr),Ye(sa))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function jv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Jw=!0,ap=!1;function Mm(){return ap=!0,Jw}function Ti(){if(ap)throw new Error("Cannot enable prod mode after platform setup.");Jw=!1}let eb=(()=>{class i{}return i.__NG_ELEMENT_ID__=nC,i})();function nC(i){return function Rm(i,s,a){if(gs(i)&&!a){const l=Er(i.index,s);return new Gf(l,l)}return 47&i.type?new Gf(s[16],s):null}(mn(),we(),16==(16&i))}class sC{constructor(){}supports(s){return $a(s)}create(s){return new jT(s)}}const BT=(i,s)=>s;class jT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||BT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<Sr(l,c,g)?a:l,E=Sr(_,c,g),b=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{g||(g=[]);const A=E-c,S=b-c;if(A!=S){for(let V=0;V<A;V++){const z=V<g.length?g[V]:g[V]=0,me=z+V;S<=me&&me<A&&(g[V]=z+1)}g[_.previousIndex]=S-A}}E!==b&&s(_,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!$a(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,g,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)g=s[E],_=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,E),l=!0),a=a._next}else c=0,function Ag(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Pd()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,c)):s=this._addAfter(new ab(a,l),g,c),s}_verifyReinsertion(s,a,l,c){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?s=this._reinsertAfter(g,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,g=s._nextRemoved;return null===c?this._removalsHead=g:c._nextRemoved=g,null===g?this._removalsTail=c:g._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ab{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class ub{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new oC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sr(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Vs{constructor(){}supports(s){return s instanceof Map||Sg(s)}create(){return new Om}}class Om{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Sg(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const g=c._prev,_=c._next;return g&&(g._next=_),_&&(_._prev=g),c._next=null,c._prev=null,c}const l=new qv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class qv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lb(){return new zv([new sC])}let zv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||lb()),deps:[[i,new rs,new si]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new xe(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:lb}),i})();function Zv(){return new Wv([new Vs])}let Wv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Zv()),deps:[[i,new rs,new si]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new xe(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Zv}),i})();const Pm=dh(null,"core",[]);let cb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ye(Bv))},i.\u0275mod=Y({type:i}),i.\u0275inj=Wt({}),i})()},3942:(it,Ce,k)=>{k.d(Ce,{Z:()=>xe});var d=k(2090),K=k(4859),O=k(9681),oe=k(1877);class X{constructor(fe,ve){this._delegate=fe,this.firebase=ve,(0,O._addComponent)(fe,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,ve=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Xe=Ze.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ve})}_removeServiceInstance(fe,ve=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(ve)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const ke=function he(ke){const fe={},ve={__esModule:!0,initializeApp:function Ie(je,ne={}){const qe=O.initializeApp(je,ne);if((0,d.r3)(fe,qe.name))return fe[qe.name];const J=new ke(qe,ve);return fe[qe.name]=J,J},app:Ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function _e(je){const ne=je.name,qe=ne.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const J=(se=Ze())=>{if("function"!=typeof se[qe])throw re.create("invalid-app-argument",{appName:ne});return se[qe]()};void 0!==je.serviceProps&&(0,d.ZB)(J,je.serviceProps),ve[qe]=J,ke.prototype[qe]=function(...se){return this._getService.bind(this,ne).apply(this,je.multipleInstances?se:[])}}return"PUBLIC"===je.type?ve[qe]:null},removeApp:function Xe(je){delete fe[je]},useAsService:function He(je,ne){return"serverAuth"===ne?null:ne},modularAPIs:O}};function Ze(je){if(!(0,d.r3)(fe,je=je||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:je});return fe[je]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function ye(){return Object.keys(fe).map(je=>fe[je])}}),Ze.App=ke,ve}(X);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function fe(ve){(0,d.ZB)(ke,ve)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ke}(),j=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=B;!function Te(ke){(0,O.registerVersion)("@firebase/app-compat","0.1.23",ke)}()},9681:(it,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>xr,_DEFAULT_ENTRY_NAME:()=>qt,_addComponent:()=>Jn,_addOrOverwriteComponent:()=>vn,_apps:()=>$e,_clearComponents:()=>Bt,_components:()=>Ut,_getProvider:()=>hi,_registerComponent:()=>Jt,_removeServiceInstance:()=>Wt,deleteApp:()=>Zi,getApp:()=>Mr,getApps:()=>zi,initializeApp:()=>Si,onLog:()=>Xn,registerVersion:()=>kr,setLogLevel:()=>$n});var d=k(5861),K=k(4859),O=k(1877),oe=k(2090);class X{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function pe(We){const De=We.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Je)){const ut=Je.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Je=>Je).join(" ")}}const re="@firebase/app",ue=new O.Yd("@firebase/app"),qt="[DEFAULT]",rn={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$e=new Map,Ut=new Map;function Jn(We,De){try{We.container.addComponent(De)}catch(Je){ue.debug(`Component ${De.name} failed to register with FirebaseApp ${We.name}`,Je)}}function vn(We,De){We.container.addOrOverwriteComponent(De)}function Jt(We){const De=We.name;if(Ut.has(De))return ue.debug(`There were multiple attempts to register component ${De}.`),!1;Ut.set(De,We);for(const Je of $e.values())Jn(Je,We);return!0}function hi(We,De){const Je=We.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),We.container.getProvider(De)}function Wt(We,De,Je=qt){hi(We,De).clearInstance(Je)}function Bt(){Ut.clear()}const Yr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class cs{constructor(De,Je,ut){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}const xr="9.7.0";function Si(We,De={}){"object"!=typeof De&&(De={name:De});const Je=Object.assign({name:qt,automaticDataCollectionEnabled:!1},De),ut=Je.name;if("string"!=typeof ut||!ut)throw Yr.create("bad-app-name",{appName:String(ut)});const kt=$e.get(ut);if(kt){if((0,oe.vZ)(We,kt.options)&&(0,oe.vZ)(Je,kt.config))return kt;throw Yr.create("duplicate-app",{appName:ut})}const Nt=new K.H0(ut);for(const L of Ut.values())Nt.addComponent(L);const U=new cs(We,Je,Nt);return $e.set(ut,U),U}function Mr(We=qt){const De=$e.get(We);if(!De)throw Yr.create("no-app",{appName:We});return De}function zi(){return Array.from($e.values())}function Zi(We){return ot.apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(We){const De=We.name;$e.has(De)&&($e.delete(De),yield Promise.all(We.container.getProviders().map(Je=>Je.delete())),We.isDeleted=!0)})).apply(this,arguments)}function kr(We,De,Je){var ut;let kt=null!==(ut=rn[We])&&void 0!==ut?ut:We;Je&&(kt+=`-${Je}`);const Nt=kt.match(/\s|\//),U=De.match(/\s|\//);if(Nt||U){const L=[`Unable to register library "${kt}" with version "${De}":`];return Nt&&L.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Nt&&U&&L.push("and"),U&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Jt(new K.wA(`${kt}-version`,()=>({library:kt,version:De}),"VERSION"))}function Xn(We,De){if(null!==We&&"function"!=typeof We)throw Yr.create("invalid-log-argument");(0,O.Am)(We,De)}function $n(We){(0,O.Ub)(We)}const gn="firebase-heartbeat-store";let er=null;function ds(){return er||(er=(0,oe.X3)("firebase-heartbeat-database",1,(We,De)=>{0===De&&We.createObjectStore(gn)}).catch(We=>{throw Yr.create("storage-open",{originalErrorMessage:We.message})})),er}function jt(){return(jt=(0,d.Z)(function*(We){try{return(yield ds()).transaction(gn).objectStore(gn).get(sr(We))}catch(De){throw Yr.create("storage-get",{originalErrorMessage:De.message})}})).apply(this,arguments)}function rt(We,De){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(We,De){try{const ut=(yield ds()).transaction(gn,"readwrite");return yield ut.objectStore(gn).put(De,sr(We)),ut.complete}catch(Je){throw Yr.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function sr(We){return`${We.name}!${We.options.appId}`}class Bs{constructor(De){this.container=De,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new at(Je),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var De=this;return(0,d.Z)(function*(){const ut=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=mr();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==kt&&!De._heartbeatsCache.heartbeats.some(Nt=>Nt.date===kt))return De._heartbeatsCache.heartbeats.push({date:kt,agent:ut}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Nt=>{const U=new Date(Nt.date).valueOf();return Date.now()-U<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,d.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Je=mr(),{heartbeatsToSend:ut,unsentEntries:kt}=function or(We,De=1024){const Je=[];let ut=We.slice();for(const kt of We){const Nt=Je.find(U=>U.agent===kt.agent);if(Nt){if(Nt.dates.push(kt.date),yr(Je)>De){Nt.dates.pop();break}}else if(Je.push({agent:kt.agent,dates:[kt.date]}),yr(Je)>De){Je.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Je,unsentEntries:ut}}(De._heartbeatsCache.heartbeats),Nt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ut}));return De._heartbeatsCache.lastSentHeartbeatDate=Je,kt.length>0?(De._heartbeatsCache.heartbeats=kt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Nt})()}}function mr(){return(new Date).toISOString().substring(0,10)}class at{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,d.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function ua(We){return jt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Je=this;return(0,d.Z)(function*(){var ut;if(yield Je._canUseIndexedDBPromise){const Nt=yield Je.read();return rt(Je.app,{lastSentHeartbeatDate:null!==(ut=De.lastSentHeartbeatDate)&&void 0!==ut?ut:Nt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Je=this;return(0,d.Z)(function*(){var ut;if(yield Je._canUseIndexedDBPromise){const Nt=yield Je.read();return rt(Je.app,{lastSentHeartbeatDate:null!==(ut=De.lastSentHeartbeatDate)&&void 0!==ut?ut:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...De.heartbeats]})}})()}}function yr(We){return(0,oe.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Pt(We){Jt(new K.wA("platform-logger",De=>new X(De),"PRIVATE")),Jt(new K.wA("heartbeat",De=>new Bs(De),"PRIVATE")),kr(re,"0.7.22",We),kr(re,"0.7.22","esm2017"),kr("fire-js","")}("")},4859:(it,Ce,k)=>{k.d(Ce,{H0:()=>he,wA:()=>O});var d=k(5861),K=k(2090);class O{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class X{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new K.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:j});Ge&&Q.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ge=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if(Ge)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Ge});Q.resolve(Te)}catch(Te){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,d.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Te,xe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&xe.resolve(Ge);return Ge}onInit(B,j){var Q;const Ge=this.normalizeInstanceIdentifier(j),Te=null!==(Q=this.onInitCallbacks.get(Ge))&&void 0!==Q?Q:new Set;Te.add(B),this.onInitCallbacks.set(Ge,Te);const xe=this.instances.get(Ge);return xe&&B(xe,Ge),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Ge of Q)try{Ge(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch(Ge){}var ue;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new X(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ce,k)=>{k.d(Ce,{Am:()=>ue,Ub:()=>he,Yd:()=>re,in:()=>K});const d=[];var K=(()=>{return(B=K||(K={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",K;var B})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,X={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},pe=(B,j,...Q)=>{if(j<B.logLevel)return;const Ge=(new Date).toISOString(),Te=X[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Ge}]  ${B.name}:`,...Q)};class re{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in K))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function he(B){d.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Q of d){let Ge=null;j&&j.level&&(Ge=O[j.level]),Q.userLogHandler=null===B?null:(Te,xe,...ke)=>{const fe=ke.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(Xe){return null}}).filter(ve=>ve).join(" ");xe>=(null!=Ge?Ge:Te.logLevel)&&B({level:K[xe].toLowerCase(),message:fe,args:ke,type:Te.name})}}}},5861:(it,Ce,k)=>{function d(O,oe,X,pe,re,he,ue){try{var B=O[he](ue),j=B.value}catch(Q){return void X(Q)}B.done?oe(j):Promise.resolve(j).then(pe,re)}function K(O){return function(){var oe=this,X=arguments;return new Promise(function(pe,re){var he=O.apply(oe,X);function ue(j){d(he,pe,re,ue,B,"next",j)}function B(j){d(he,pe,re,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>K})}},it=>{it(it.s=934)}]);